!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function e(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function n(t,n){return e(t).appendChild(n)}function i(t,e,n,i){var r=document.createElement(t);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof e)r.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)r.appendChild(e[o]);return r}function r(t,e,n,r){var o=i(t,e,n,r);return o.setAttribute("role","presentation"),o}function o(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function s(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function a(e,n){var i=e.className;t(n).test(i)||(e.className+=(i?" ":"")+n)}function l(e,n){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!t(i[r]).test(n)&&(n+=" "+i[r]);return n}function u(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function c(t,e,n){e||(e={});for(var i in t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function h(t,e,n,i,r){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=i||0,s=r||0;;){var a=t.indexOf("\t",o);if(a<0||a>=e)return s+(e-o);s+=a-o,s+=n-s%n,o=a+1}}function p(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function d(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var s=o-i;if(o==t.length||r+s>=e)return i+Math.min(s,e-r);if(r+=o-i,r+=n-r%n,i=o+1,r>=e)return i}}function f(t){for(;$s.length<=t;)$s.push(_($s)+" ");return $s[t]}function _(t){return t[t.length-1]}function g(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function m(t,e,n){for(var i=0,r=n(e);i<t.length&&n(t[i])<=r;)i++;t.splice(i,0,e)}function v(){}function y(t,e){var n;return Object.create?n=Object.create(t):(v.prototype=t,n=new v),e&&c(e,n),n}function b(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||qs.test(t))}function w(t,e){return e?!!(e.source.indexOf("\\w")>-1&&b(t))||e.test(t):b(t)}function k(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function x(t){return t.charCodeAt(0)>=768&&Ys.test(t)}function C(t,e,n){for(;(n<0?e>0:e<t.length)&&x(t.charAt(e));)e+=n;return e}function S(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var r=(e+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+i}}function T(t,e,n){var o=this;this.input=n,o.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=r("div",null,"CodeMirror-code"),o.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=i("div",null,"CodeMirror-cursors"),o.measure=i("div",null,"CodeMirror-measure"),o.lineMeasure=i("div",null,"CodeMirror-measure"),o.lineSpace=r("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var s=r("div",[o.lineSpace],"CodeMirror-lines");o.mover=i("div",[s],null,"position: relative"),o.sizer=i("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=i("div",null,null,"position: absolute; height: "+Us+"px; width: 1px;"),o.gutters=i("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=i("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=i("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),ys&&bs<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),ws||_s&&Ms||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,n.init(o)}function O(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(e<o){n=r;break}e-=o}return n.lines[e]}function L(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;r==n.line&&(o=o.slice(0,n.ch)),r==e.line&&(o=o.slice(e.ch)),i.push(o),++r}),i}function E(t,e,n){var i=[];return t.iter(e,n,function(t){i.push(t.text)}),i}function M(t,e){var n=e-t.height;if(n)for(var i=t;i;i=i.parent)i.height+=n}function N(t){if(null==t.parent)return null;for(var e=t.parent,n=p(e.lines,t),i=e.parent;i;e=i,i=i.parent)for(var r=0;i.children[r]!=e;++r)n+=i.children[r].chunkSize();return n+e.first}function A(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(var s=0;s<t.lines.length;++s){var a=t.lines[s],l=a.height;if(e<l)break;e-=l}return n+s}function R(t,e){return e>=t.first&&e<t.first+t.size}function D(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function W(t,e,n){if(void 0===n&&(n=null),!(this instanceof W))return new W(t,e,n);this.line=t,this.ch=e,this.sticky=n}function P(t,e){return t.line-e.line||t.ch-e.ch}function z(t,e){return t.sticky==e.sticky&&0==P(t,e)}function I(t){return W(t.line,t.ch)}function B(t,e){return P(t,e)<0?e:t}function j(t,e){return P(t,e)<0?t:e}function F(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function H(t,e){if(e.line<t.first)return W(t.first,0);var n=t.first+t.size-1;return e.line>n?W(n,O(t,n).text.length):U(e,O(t,e.line).text.length)}function U(t,e){var n=t.ch;return null==n||n>e?W(t.line,e):n<0?W(t.line,0):t}function K(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=H(t,e[i]);return n}function V(){Zs=!0}function G(){Qs=!0}function X(t,e,n){this.marker=t,this.from=e,this.to=n}function $(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function q(t,e){for(var n,i=0;i<t.length;++i)t[i]!=e&&(n||(n=[])).push(t[i]);return n}function Y(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Z(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);if(a||o.from==e&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(i||(i=[])).push(new X(s,o.from,l?null:o.to))}}return i}function Q(t,e,n){var i;if(t)for(var r=0;r<t.length;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||o.from==e&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=e:o.from<e);(i||(i=[])).push(new X(s,l?null:o.from-e,null==o.to?null:o.to-e))}}return i}function J(t,e){if(e.full)return null;var n=R(t,e.from.line)&&O(t,e.from.line).markedSpans,i=R(t,e.to.line)&&O(t,e.to.line).markedSpans;if(!n&&!i)return null;var r=e.from.ch,o=e.to.ch,s=0==P(e.from,e.to),a=Z(n,r,s),l=Q(i,o,s),u=1==e.text.length,c=_(e.text).length+(u?r:0);if(a)for(var h=0;h<a.length;++h){var p=a[h];if(null==p.to){var d=$(l,p.marker);d?u&&(p.to=null==d.to?null:d.to+c):p.to=r}}if(l)for(var f=0;f<l.length;++f){var g=l[f];if(null!=g.to&&(g.to+=c),null==g.from){var m=$(a,g.marker);m||(g.from=c,u&&(a||(a=[])).push(g))}else g.from+=c,u&&(a||(a=[])).push(g)}a&&(a=tt(a)),l&&l!=a&&(l=tt(l));var v=[a];if(!u){var y,b=e.text.length-2;if(b>0&&a)for(var w=0;w<a.length;++w)null==a[w].to&&(y||(y=[])).push(new X(a[w].marker,null,null));for(var k=0;k<b;++k)v.push(y);v.push(l)}return v}function tt(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function et(t,e,n){var i=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=p(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:e,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var u=r[l];if(!(P(u.to,a.from)<0||P(u.from,a.to)>0)){var c=[l,1],h=P(u.from,a.from),d=P(u.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&c.push({from:u.from,to:a.from}),(d>0||!s.inclusiveRight&&!d)&&c.push({from:a.to,to:u.to}),r.splice.apply(r,c),l+=c.length-3}}return r}function nt(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function it(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function rt(t){return t.inclusiveLeft?-1:0}function ot(t){return t.inclusiveRight?1:0}function st(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var i=t.find(),r=e.find(),o=P(i.from,r.from)||rt(t)-rt(e);if(o)return-o;var s=P(i.to,r.to)||ot(t)-ot(e);return s||e.id-t.id}function at(t,e){var n,i=Qs&&t.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&null==(e?r.from:r.to)&&(!n||st(n,r.marker)<0)&&(n=r.marker);return n}function lt(t){return at(t,!0)}function ut(t){return at(t,!1)}function ct(t,e){var n,i=Qs&&t.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||st(n,o.marker)<0)&&(n=o.marker)}return n}function ht(t,e,n,i,r){var o=O(t,e),s=Qs&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var u=l.marker.find(0),c=P(u.from,n)||rt(l.marker)-rt(r),h=P(u.to,i)||ot(l.marker)-ot(r);if(!(c>=0&&h<=0||c<=0&&h>=0)&&(c<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?P(u.to,n)>=0:P(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?P(u.from,i)<=0:P(u.from,i)<0)))return!0}}}function pt(t){for(var e;e=lt(t);)t=e.find(-1,!0).line;return t}function dt(t){for(var e;e=ut(t);)t=e.find(1,!0).line;return t}function ft(t){for(var e,n;e=ut(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function _t(t,e){var n=O(t,e),i=pt(n);return n==i?e:N(i)}function gt(t,e){if(e>t.lastLine())return e;var n,i=O(t,e);if(!mt(t,i))return e;for(;n=ut(i);)i=n.find(1,!0).line;return N(i)+1}function mt(t,e){var n=Qs&&e.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&vt(t,e,i))return!0}}function vt(t,e,n){if(null==n.to){var i=n.marker.find(1,!0);return vt(t,i.line,$(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var r=void 0,o=0;o<e.markedSpans.length;++o)if(r=e.markedSpans[o],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&vt(t,e,r))return!0}function yt(t){t=pt(t);for(var e=0,n=t.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;e+=a.height}return e}function bt(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=lt(i);){var r=e.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=t;e=ut(i);){var o=e.find(0,!0);n-=i.text.length-o.from.ch,i=o.to.line,n+=i.text.length-o.to.ch}return n}function wt(t){var e=t.display,n=t.doc;e.maxLine=O(n,n.first),e.maxLineLength=bt(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=bt(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function kt(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}function xt(t,e,n){var i;Js=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:Js=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:Js=r)}return null!=i?i:Js}function Ct(t,e){var n=t.order;return null==n&&(n=t.order=ta(t.text,e)),n}function St(t,e){return t._handlers&&t._handlers[e]||ea}function Tt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=t._handlers,r=i&&i[e];if(r){var o=p(r,n);o>-1&&(i[e]=r.slice(0,o).concat(r.slice(o+1)))}}}function Ot(t,e){var n=St(t,e);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function Lt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),Ot(t,n||e.type,t,e),Dt(e)||e.codemirrorIgnore}function Et(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),i=0;i<e.length;++i)-1==p(n,e[i])&&n.push(e[i])}function Mt(t,e){return St(t,e).length>0}function Nt(t){t.prototype.on=function(t,e){na(this,t,e)},t.prototype.off=function(t,e){Tt(this,t,e)}}function At(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Rt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Dt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Wt(t){At(t),Rt(t)}function Pt(t){return t.target||t.srcElement}function zt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Ns&&t.ctrlKey&&1==e&&(e=3),e}function It(t){if(null==Fs){var e=i("span","\u200b");n(t,i("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Fs=e.offsetWidth<=1&&e.offsetHeight>2&&!(ys&&bs<8))}var r=Fs?i("span","\u200b"):i("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Bt(t){if(null!=Hs)return Hs;var i=n(t,document.createTextNode("A\u062eA")),r=Ws(i,0,1).getBoundingClientRect(),o=Ws(i,1,2).getBoundingClientRect();return e(t),!(!r||r.left==r.right)&&(Hs=o.right-r.right<3)}function jt(t){if(null!=aa)return aa;var e=n(t,i("span","x")),r=e.getBoundingClientRect(),o=Ws(e,0,1).getBoundingClientRect();return aa=Math.abs(r.left-o.left)>1}function Ft(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),la[t]=e}function Ht(t,e){ua[t]=e}function Ut(t){if("string"==typeof t&&ua.hasOwnProperty(t))t=ua[t];else if(t&&"string"==typeof t.name&&ua.hasOwnProperty(t.name)){var e=ua[t.name];"string"==typeof e&&(e={name:e}),t=y(e,t),t.name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Ut("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Ut("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Kt(t,e){e=Ut(e);var n=la[e.name];if(!n)return Kt(t,"text/plain");var i=n(t,e);if(ca.hasOwnProperty(e.name)){var r=ca[e.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=e.name,e.helperType&&(i.helperType=e.helperType),e.modeProps)for(var s in e.modeProps)i[s]=e.modeProps[s];return i}function Vt(t,e){c(e,ca.hasOwnProperty(t)?ca[t]:ca[t]={})}function Gt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var i in e){var r=e[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Xt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function $t(t,e,n){return!t.startState||t.startState(e,n)}function qt(t,e,n,i){var r=[t.state.modeGen],o={};ie(t,e.text,t.doc.mode,n,function(t,e){return r.push(t,e)},o,i);for(var s=n.state,a=0;a<t.state.overlays.length;++a)!function(i){n.baseTokens=r;var a=t.state.overlays[i],l=1,u=0;n.state=!0,ie(t,e.text,a.mode,n,function(t,e){for(var n=l;u<t;){var i=r[l];i>t&&r.splice(l,1,t,r[l+1],i),l+=2,u=Math.min(t,i)}if(e)if(a.opaque)r.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+e}},o),n.state=s,n.baseTokens=null,n.baseTokenPos=1}(a);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function Yt(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=Zt(t,N(e)),r=e.text.length>t.options.maxHighlightLength&&Gt(t.doc.mode,i.state),o=qt(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function Zt(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return new da(i,!0,e);var o=re(t,e,n),s=o>i.first&&O(i,o-1).stateAfter,a=s?da.fromSaved(i,s,o):new da(i,$t(i.mode),o);return i.iter(o,e,function(n){Qt(t,n.text,a);var i=a.line;n.stateAfter=i==e-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?a.save():null,a.nextLine()}),n&&(i.modeFrontier=a.line),a}function Qt(t,e,n,i){var r=t.doc.mode,o=new ha(e,t.options.tabSize,n);for(o.start=o.pos=i||0,""==e&&Jt(r,n.state);!o.eol();)te(r,o,n.state),o.start=o.pos}function Jt(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Xt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function te(t,e,n,i){for(var r=0;r<10;r++){i&&(i[0]=Xt(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}function ee(t,e,n,i){var r,o=t.doc,s=o.mode;e=H(o,e);var a,l=O(o,e.line),u=Zt(t,e.line,n),c=new ha(l.text,t.options.tabSize,u);for(i&&(a=[]);(i||c.pos<e.ch)&&!c.eol();)c.start=c.pos,r=te(s,c,u.state),i&&a.push(new fa(c,r,Gt(o.mode,u.state)));return i?a:new fa(c,r,u.state)}function ne(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[i])||(e[i]+=" "+n[2])}return t}function ie(t,e,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var l,u=0,c=null,h=new ha(e,t.options.tabSize,i),p=t.options.addModeClass&&[null];for(""==e&&ne(Jt(n,i.state),o);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&Qt(t,e,i,h.pos),h.pos=e.length,l=null):l=ne(te(n,h,i.state,p),o),p){var d=p[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!a||c!=l){for(;u<h.start;)u=Math.min(h.start,u+5e3),r(u,c);c=l}h.start=h.pos}for(;u<h.pos;){var f=Math.min(h.pos,u+5e3);r(f,c),u=f}}function re(t,e,n){for(var i,r,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>s;--a){if(a<=o.first)return o.first;var l=O(o,a-1),u=l.stateAfter;if(u&&(!n||a+(u instanceof pa?u.lookAhead:0)<=o.modeFrontier))return a;var c=h(l.text,null,t.options.tabSize);(null==r||i>c)&&(r=a-1,i=c)}return r}function oe(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var r=O(t,i).stateAfter;if(r&&(!(r instanceof pa)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}function se(t,e,n,i){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),nt(t),it(t,n);var r=i?i(t):1;r!=t.height&&M(t,r)}function ae(t){t.parent=null,nt(t)}function le(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?va:ma;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function ue(t,e){var n=r("span",null,null,ws?"padding-right: .1px":null),i={pre:r("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var o=0;o<=(e.rest?e.rest.length:0);o++){var s=o?e.rest[o-1]:e.line,a=void 0;i.pos=0,i.addToken=he,Bt(t.display.measure)&&(a=Ct(s,t.doc.direction))&&(i.addToken=de(i.addToken,a)),i.map=[];_e(s,i,Yt(t,s,e!=t.display.externalMeasured&&N(s))),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=l(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=l(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(It(t.display.measure))),0==o?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(ws){var u=i.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Ot(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=l(i.pre.className,i.textClass||"")),i}function ce(t){var e=i("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function he(t,e,n,r,o,s,a){if(e){var l,u=t.splitSpaces?pe(e,t.trailingSpace):e,c=t.cm.state.specialChars,h=!1;if(c.test(e)){l=document.createDocumentFragment();for(var p=0;;){c.lastIndex=p;var d=c.exec(e),_=d?d.index-p:e.length-p;if(_){var g=document.createTextNode(u.slice(p,p+_));ys&&bs<9?l.appendChild(i("span",[g])):l.appendChild(g),t.map.push(t.pos,t.pos+_,g),t.col+=_,t.pos+=_}if(!d)break;p+=_+1;var m=void 0;if("\t"==d[0]){var v=t.cm.options.tabSize,y=v-t.col%v;m=l.appendChild(i("span",f(y),"cm-tab")),m.setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=y}else"\r"==d[0]||"\n"==d[0]?(m=l.appendChild(i("span","\r"==d[0]?"\u240d":"\u2424","cm-invalidchar")),m.setAttribute("cm-text",d[0]),t.col+=1):(m=t.cm.options.specialCharPlaceholder(d[0]),m.setAttribute("cm-text",d[0]),ys&&bs<9?l.appendChild(i("span",[m])):l.appendChild(m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,l=document.createTextNode(u),t.map.push(t.pos,t.pos+e.length,l),ys&&bs<9&&(h=!0),t.pos+=e.length;if(t.trailingSpace=32==u.charCodeAt(e.length-1),n||r||o||h||a){var b=n||"";r&&(b+=r),o&&(b+=o);var w=i("span",[l],b,a);return s&&(w.title=s),t.content.appendChild(w)}t.content.appendChild(l)}}function pe(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,i="",r=0;r<t.length;r++){var o=t.charAt(r);" "!=o||!n||r!=t.length-1&&32!=t.charCodeAt(r+1)||(o="\xa0"),i+=o,n=" "==o}return i}function de(t,e){return function(n,i,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+i.length;;){for(var h=void 0,p=0;p<e.length&&(h=e[p],!(h.to>u&&h.from<=u));p++);if(h.to>=c)return t(n,i,r,o,s,a,l);t(n,i.slice(0,h.to-u),r,o,null,a,l),o=null,i=i.slice(h.to-u),u=h.to}}}function fe(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||(r=t.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function _e(t,e,n){var i=t.markedSpans,r=t.text,o=0;if(i)for(var s,a,l,u,c,h,p,d=r.length,f=0,_=1,g="",m=0;;){if(m==f){l=u=c=h=a="",p=null,m=1/0;for(var v=[],y=void 0,b=0;b<i.length;++b){var w=i[b],k=w.marker;"bookmark"==k.type&&w.from==f&&k.widgetNode?v.push(k):w.from<=f&&(null==w.to||w.to>f||k.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&m>w.to&&(m=w.to,u=""),k.className&&(l+=" "+k.className),k.css&&(a=(a?a+";":"")+k.css),k.startStyle&&w.from==f&&(c+=" "+k.startStyle),k.endStyle&&w.to==m&&(y||(y=[])).push(k.endStyle,w.to),k.title&&!h&&(h=k.title),k.collapsed&&(!p||st(p.marker,k)<0)&&(p=w)):w.from>f&&m>w.from&&(m=w.from)}if(y)for(var x=0;x<y.length;x+=2)y[x+1]==m&&(u+=" "+y[x]);if(!p||p.from==f)for(var C=0;C<v.length;++C)fe(e,0,v[C]);if(p&&(p.from||0)==f){if(fe(e,(null==p.to?d+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(f>=d)break;for(var S=Math.min(d,m);;){if(g){var T=f+g.length;if(!p){var O=T>S?g.slice(0,S-f):g;e.addToken(e,O,s?s+l:l,c,f+O.length==m?u:"",h,a)}if(T>=S){g=g.slice(S-f),f=S;break}f=T,c=""}g=r.slice(o,o=n[_++]),s=le(n[_++],e.cm.options)}}else for(var L=1;L<n.length;L+=2)e.addToken(e,r.slice(o,o=n[L]),le(n[L+1],e.cm.options))}function ge(t,e,n){this.line=e,this.rest=ft(e),this.size=this.rest?N(_(this.rest))-n+1:1,this.node=this.text=null,this.hidden=mt(t,e)}function me(t,e,n){for(var i,r=[],o=e;o<n;o=i){var s=new ge(t.doc,O(t.doc,o),o);i=o+s.size,r.push(s)}return r}function ve(t){ya?ya.ops.push(t):t.ownsGroup=ya={ops:[t],delayedCallbacks:[]}}function ye(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var i=0;i<t.ops.length;i++){var r=t.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<e.length)}function be(t,e){var n=t.ownsGroup;if(n)try{ye(n)}finally{ya=null,e(n)}}function we(t,e){var n=St(t,e);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);ya?i=ya.delayedCallbacks:ba?i=ba:(i=ba=[],setTimeout(ke,0));for(var o=0;o<n.length;++o)!function(t){i.push(function(){return n[t].apply(null,r)})}(o)}}function ke(){var t=ba;ba=null;for(var e=0;e<t.length;++e)t[e]()}function xe(t,e,n,i){for(var r=0;r<e.changes.length;r++){var o=e.changes[r];"text"==o?Oe(t,e):"gutter"==o?Ee(t,e,n,i):"class"==o?Le(t,e):"widget"==o&&Me(t,e,i)}e.changes=null}function Ce(t){return t.node==t.text&&(t.node=i("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),ys&&bs<8&&(t.node.style.zIndex=2)),t.node}function Se(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=Ce(e);e.background=r.insertBefore(i("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}}function Te(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):ue(t,e)}function Oe(t,e){var n=e.text.className,i=Te(t,e);e.text==e.node&&(e.node=i.pre),e.text.parentNode.replaceChild(i.pre,e.text),e.text=i.pre,i.bgClass!=e.bgClass||i.textClass!=e.textClass?(e.bgClass=i.bgClass,e.textClass=i.textClass,Le(t,e)):n&&(e.text.className=n)}function Le(t,e){Se(t,e),e.line.wrapClass?Ce(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function Ee(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var o=Ce(e);e.gutterBackground=i("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),o.insertBefore(e.gutterBackground,e.text)}var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var a=Ce(e),l=e.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(t.display.input.setUneditable(l),a.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(i("div",D(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var u=0;u<t.options.gutters.length;++u){var c=t.options.gutters[u],h=s.hasOwnProperty(c)&&s[c];h&&l.appendChild(i("div",[h],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function Me(t,e,n){e.alignable&&(e.alignable=null);for(var i=e.node.firstChild,r=void 0;i;i=r)r=i.nextSibling,"CodeMirror-linewidget"==i.className&&e.node.removeChild(i);Ae(t,e,n)}function Ne(t,e,n,i){var r=Te(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),Le(t,e),Ee(t,e,n,i),Ae(t,e,i),e.node}function Ae(t,e,n){if(Re(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)Re(t,e.rest[i],e,n,!1)}function Re(t,e,n,r,o){if(e.widgets)for(var s=Ce(n),a=0,l=e.widgets;a<l.length;++a){var u=l[a],c=i("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),De(u,c,n,r),t.display.input.setUneditable(c),o&&u.above?s.insertBefore(c,n.gutter||n.text):s.appendChild(c),we(u,"redraw")}}function De(t,e,n,i){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var r=i.wrapperWidth;e.style.left=i.fixedPos+"px",t.coverGutter||(r-=i.gutterTotalWidth,e.style.paddingLeft=i.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-i.gutterTotalWidth+"px"))}function We(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!o(document.body,t.node)){var r="position: relative;";t.coverGutter&&(r+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(r+="width: "+e.display.wrapper.clientWidth+"px;"),n(e.display.measure,i("div",[t.node],null,r))}return t.height=t.node.parentNode.offsetHeight}function Pe(t,e){for(var n=Pt(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function ze(t){return t.lineSpace.offsetTop}function Ie(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Be(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=n(t.measure,i("pre","x")),r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,o={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(t.cachedPaddingH=o),o}function je(t){return Us-t.display.nativeBarWidth}function Fe(t){return t.display.scroller.clientWidth-je(t)-t.display.barWidth}function He(t){return t.display.scroller.clientHeight-je(t)-t.display.barHeight}function Ue(t,e,n){var i=t.options.lineWrapping,r=i&&Fe(t);if(!e.measure.heights||i&&e.measure.width!=r){var o=e.measure.heights=[];if(i){e.measure.width=r;for(var s=e.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],u=s[a+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Ke(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(var r=0;r<t.rest.length;r++)if(N(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}function Ve(t,e){e=pt(e);var i=N(e),r=t.display.externalMeasured=new ge(t.doc,e,i);r.lineN=i;var o=r.built=ue(t,r);return r.text=o.pre,n(t.display.lineMeasure,o.pre),r}function Ge(t,e,n,i){return qe(t,$e(t,e),n,i)}function Xe(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[On(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function $e(t,e){var n=N(e),i=Xe(t,n);i&&!i.text?i=null:i&&i.changes&&(xe(t,i,n,kn(t)),t.curOp.forceUpdate=!0),i||(i=Ve(t,e));var r=Ke(i,e,n);return{line:e,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function qe(t,e,n,i,r){e.before&&(n=-1);var o,s=n+(i||"");return e.cache.hasOwnProperty(s)?o=e.cache[s]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Ue(t,e.view,e.rect),e.hasHeights=!0),o=Qe(t,e,n,i),o.bogus||(e.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}function Ye(t,e,n){for(var i,r,o,s,a,l,u=0;u<t.length;u+=3)if(a=t[u],l=t[u+1],e<a?(r=0,o=1,s="left"):e<l?(r=e-a,o=r+1):(u==t.length-3||e==l&&t[u+3]>e)&&(o=l-a,r=o-1,e>=l&&(s="right")),null!=r){if(i=t[u+2],a==l&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)i=t[2+(u-=3)],s="left";if("right"==n&&r==l-a)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)i=t[(u+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:a,coverEnd:l}}function Ze(t,e){var n=wa;if("left"==e)for(var i=0;i<t.length&&(n=t[i]).left==n.right;i++);else for(var r=t.length-1;r>=0&&(n=t[r]).left==n.right;r--);return n}function Qe(t,e,n,i){var r,o=Ye(e.map,n,i),s=o.node,a=o.start,l=o.end,u=o.collapse;if(3==s.nodeType){for(var c=0;c<4;c++){for(;a&&x(e.line.text.charAt(o.coverStart+a));)--a;for(;o.coverStart+l<o.coverEnd&&x(e.line.text.charAt(o.coverStart+l));)++l;if(r=ys&&bs<9&&0==a&&l==o.coverEnd-o.coverStart?s.parentNode.getBoundingClientRect():Ze(Ws(s,a,l).getClientRects(),i),r.left||r.right||0==a)break;l=a,a-=1,u="right"}ys&&bs<11&&(r=Je(t.display.measure,r))}else{a>0&&(u=i="right");var h;r=t.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==i?h.length-1:0]:s.getBoundingClientRect()}if(ys&&bs<9&&!a&&(!r||!r.left&&!r.right)){var p=s.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+wn(t.display),top:p.top,bottom:p.bottom}:wa}for(var d=r.top-e.rect.top,f=r.bottom-e.rect.top,_=(d+f)/2,g=e.view.measure.heights,m=0;m<g.length-1&&!(_<g[m]);m++);var v=m?g[m-1]:0,y=g[m],b={left:("right"==u?r.right:r.left)-e.rect.left,right:("left"==u?r.left:r.right)-e.rect.left,top:v,bottom:y};return r.left||r.right||(b.bogus=!0),t.options.singleCursorHeightPerLine||(b.rtop=d,b.rbottom=f),b}function Je(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!jt(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*i,bottom:e.bottom*i}}function tn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function en(t){t.display.externalMeasure=null,e(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)tn(t.display.view[n])}function nn(t){en(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function rn(){return xs&&Es?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function on(){return xs&&Es?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function sn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=We(t.widgets[n]));return e}function an(t,e,n,i,r){if(!r){var o=sn(e);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=yt(e);if("local"==i?s+=ze(t.display):s-=t.display.viewOffset,"page"==i||"window"==i){var a=t.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:on());var l=a.left+("window"==i?0:rn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function ln(t,e,n){if("div"==n)return e;var i=e.left,r=e.top;if("page"==n)i-=rn(),r-=on();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=t.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function un(t,e,n,i,r){return i||(i=O(t.doc,e.line)),an(t,i,Ge(t,i,e.ch,r),n)}function cn(t,e,n,i,r,o){function s(e,s){var a=qe(t,r,e,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,an(t,i,a,n)}function a(t,e,n){var i=l[e],r=1==i.level;return s(n?t-1:t,r!=n)}i=i||O(t.doc,e.line),r||(r=$e(t,i));var l=Ct(i,t.doc.direction),u=e.ch,c=e.sticky;if(u>=i.text.length?(u=i.text.length,c="before"):u<=0&&(u=0,c="after"),!l)return s("before"==c?u-1:u,"before"==c);var h=xt(l,u,c),p=Js,d=a(u,h,"before"==c);return null!=p&&(d.other=a(u,p,"before"!=c)),d}function hn(t,e){var n=0;e=H(t.doc,e),t.options.lineWrapping||(n=wn(t.display)*e.ch);var i=O(t.doc,e.line),r=yt(i)+ze(t.display);return{left:n,right:n,top:r,bottom:r+i.height}}function pn(t,e,n,i,r){var o=W(t,e,n);return o.xRel=r,i&&(o.outside=!0),o}function dn(t,e,n){var i=t.doc;if((n+=t.display.viewOffset)<0)return pn(i.first,0,null,!0,-1);var r=A(i,n),o=i.first+i.size-1;if(r>o)return pn(i.first+i.size-1,O(i,o).text.length,null,!0,1);e<0&&(e=0);for(var s=O(i,r);;){var a=mn(t,s,r,e,n),l=ct(s,a.ch+(a.xRel>0?1:0));if(!l)return a;var u=l.find(1);if(u.line==r)return u;s=O(i,r=u.line)}}function fn(t,e,n,i){i-=sn(e);var r=e.text.length,o=S(function(e){return qe(t,n,e-1).bottom<=i},r,0);return r=S(function(e){return qe(t,n,e).top>i},o,r),{begin:o,end:r}}function _n(t,e,n,i){return n||(n=$e(t,e)),fn(t,e,n,an(t,e,qe(t,n,i),"line").top)}function gn(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function mn(t,e,n,i,r){r-=yt(e);var o=$e(t,e),s=sn(e),a=0,l=e.text.length,u=!0,c=Ct(e,t.doc.direction);if(c){var h=(t.options.lineWrapping?yn:vn)(t,e,n,o,c,i,r);u=1!=h.level,a=u?h.from:h.to-1,l=u?h.to:h.from-1}var p,d,f=null,_=null,g=S(function(e){var n=qe(t,o,e);return n.top+=s,n.bottom+=s,!!gn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(f=e,_=n),!0)},a,l),m=!1;if(_){var v=i-_.left<_.right-i,y=v==u;g=f+(y?0:1),d=y?"after":"before",p=v?_.left:_.right}else{u||g!=l&&g!=a||g++,d=0==g?"after":g==e.text.length?"before":qe(t,o,g-(u?1:0)).bottom+s<=r==u?"after":"before";var b=cn(t,W(n,g,d),"line",e,o);p=b.left,m=r<b.top||r>=b.bottom}return g=C(e.text,g,1),pn(n,g,d,m,i-p)}function vn(t,e,n,i,r,o,s){var a=S(function(a){var l=r[a],u=1!=l.level;return gn(cn(t,W(n,u?l.to:l.from,u?"before":"after"),"line",e,i),o,s,!0)},0,r.length-1),l=r[a];if(a>0){var u=1!=l.level,c=cn(t,W(n,u?l.from:l.to,u?"after":"before"),"line",e,i);gn(c,o,s,!0)&&c.top>s&&(l=r[a-1])}return l}function yn(t,e,n,i,r,o,s){var a=fn(t,e,i,s),l=a.begin,u=a.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,h=null,p=0;p<r.length;p++){var d=r[p];if(!(d.from>=u||d.to<=l)){var f=1!=d.level,_=qe(t,i,f?Math.min(u,d.to)-1:Math.max(l,d.from)).right,g=_<o?o-_+1e9:_-o;(!c||h>g)&&(c=d,h=g)}}return c||(c=r[r.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function bn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==ga){ga=i("pre");for(var r=0;r<49;++r)ga.appendChild(document.createTextNode("x")),ga.appendChild(i("br"));ga.appendChild(document.createTextNode("x"))}n(t.measure,ga);var o=ga.offsetHeight/50;return o>3&&(t.cachedTextHeight=o),e(t.measure),o||1}function wn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=i("span","xxxxxxxxxx"),r=i("pre",[e]);n(t.measure,r);var o=e.getBoundingClientRect(),s=(o.right-o.left)/10;return s>2&&(t.cachedCharWidth=s),s||10}function kn(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s)n[t.options.gutters[s]]=o.offsetLeft+o.clientLeft+r,i[t.options.gutters[s]]=o.clientWidth;return{fixedPos:xn(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function xn(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function Cn(t){var e=bn(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/wn(t.display)-3);return function(r){if(mt(t.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function Sn(t){var e=t.doc,n=Cn(t);e.iter(function(t){var e=n(t);e!=t.height&&M(t,e)})}function Tn(t,e,n,i){var r=t.display;if(!n&&"true"==Pt(e).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=e.clientX-a.left,s=e.clientY-a.top}catch(e){return null}var l,u=dn(t,o,s);if(i&&1==u.xRel&&(l=O(t.doc,u.line).text).length==u.ch){var c=h(l,l.length,t.options.tabSize)-l.length;u=W(u.line,Math.max(0,Math.round((o-Be(t.display).left)/wn(t.display))-c))}return u}function On(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,i=0;i<n.length;i++)if((e-=n[i].size)<0)return i}function Ln(t){t.display.input.showSelection(t.display.input.prepareSelection())}function En(t,e){void 0===e&&(e=!0);for(var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(e||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var l=a.empty();(l||t.options.showCursorWhenSelecting)&&Mn(t,a.head,r),l||An(t,a,o)}}return i}function Mn(t,e,n){var r=cn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),o=n.appendChild(i("div","\xa0","CodeMirror-cursor"));if(o.style.left=r.left+"px",o.style.top=r.top+"px",o.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var s=n.appendChild(i("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function Nn(t,e){return t.top-e.top||t.left-e.left}function An(t,e,n){function r(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),l.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?h-t:n)+"px;\n                             height: "+(r-e)+"px"))}function o(e,n,i){function o(n,i){return un(t,W(e,n),"div",d,i)}function s(e,n,i){var r=_n(t,d,null,e),s="ltr"==n==("after"==i)?"left":"right";return o("after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1),s)[s]}var l,u,d=O(a,e),f=d.text.length,_=Ct(d,a.direction);return kt(_,n||0,null==i?f:i,function(t,e,a,d){var g="ltr"==a,m=o(t,g?"left":"right"),v=o(e-1,g?"right":"left"),y=null==n&&0==t,b=null==i&&e==f,w=0==d,k=!_||d==_.length-1;if(v.top-m.top<=3){var x=(p?y:b)&&w,C=(p?b:y)&&k,S=x?c:(g?m:v).left,T=C?h:(g?v:m).right;r(S,m.top,T-S,m.bottom)}else{var O,L,E,M;g?(O=p&&y&&w?c:m.left,L=p?h:s(t,a,"before"),E=p?c:s(e,a,"after"),M=p&&b&&k?h:v.right):(O=p?s(t,a,"before"):c,L=!p&&y&&w?h:m.right,E=!p&&b&&k?c:v.left,M=p?s(e,a,"after"):h),r(O,m.top,L-O,m.bottom),m.bottom<v.top&&r(c,m.bottom,null,v.top),r(E,v.top,M-E,v.bottom)}(!l||Nn(m,l)<0)&&(l=m),Nn(v,l)<0&&(l=v),(!u||Nn(m,u)<0)&&(u=m),Nn(v,u)<0&&(u=v)}),{start:l,end:u}}var s=t.display,a=t.doc,l=document.createDocumentFragment(),u=Be(t.display),c=u.left,h=Math.max(s.sizerWidth,Fe(t)-s.sizer.offsetLeft)-u.right,p="ltr"==a.direction,d=e.from(),f=e.to();if(d.line==f.line)o(d.line,d.ch,f.ch);else{var _=O(a,d.line),g=O(a,f.line),m=pt(_)==pt(g),v=o(d.line,d.ch,m?_.text.length+1:null).end,y=o(f.line,m?0:null,f.ch).start;m&&(v.top<y.top-2?(r(v.right,v.top,null,v.bottom),r(c,y.top,y.left,y.bottom)):r(v.right,v.top,y.left-v.right,v.bottom)),v.bottom<y.top&&r(c,v.bottom,null,y.top)}n.appendChild(l)}function Rn(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Dn(t){t.state.focused||(t.display.input.focus(),Pn(t))}function Wn(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,zn(t))},100)}function Pn(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(Ot(t,"focus",t,e),t.state.focused=!0,a(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),ws&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Rn(t))}function zn(t,e){t.state.delayingBlurEvent||(t.state.focused&&(Ot(t,"blur",t,e),t.state.focused=!1,Is(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function In(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=0;i<e.view.length;i++){var r=e.view[i],o=void 0;if(!r.hidden){if(ys&&bs<8){var s=r.node.offsetTop+r.node.offsetHeight;o=s-n,n=s}else{var a=r.node.getBoundingClientRect();o=a.bottom-a.top}var l=r.line.height-o;if(o<2&&(o=bn(e)),(l>.005||l<-.005)&&(M(r.line,o),Bn(r.line),r.rest))for(var u=0;u<r.rest.length;u++)Bn(r.rest[u])}}}function Bn(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function jn(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-ze(t));var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight,o=A(e,i),s=A(e,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=A(e,yt(O(e,a))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=s&&(o=A(e,yt(O(e,l))-t.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function Fn(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=xn(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function Hn(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=D(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var o=r.measure.appendChild(i("div",[i("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=o.firstChild.offsetWidth,a=o.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",Ri(t),!0}return!1}function Un(t,e){if(!Lt(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),o=null;if(e.top+r.top<0?o=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Os){var s=i("div","\u200b",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-ze(t.display))+"px;\n                         height: "+(e.bottom-e.top+je(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(o),t.display.lineSpace.removeChild(s)}}}function Kn(t,e,n,i){null==i&&(i=0);var r;t.options.lineWrapping||e!=n||(e=e.ch?W(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e,n="before"==e.sticky?W(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var s=!1,a=cn(t,e),l=n&&n!=e?cn(t,n):a;r={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-i,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+i};var u=Gn(t,r),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(null!=u.scrollTop&&(Jn(t,u.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(s=!0)),null!=u.scrollLeft&&(ei(t,u.scrollLeft),Math.abs(t.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return r}function Vn(t,e){var n=Gn(t,e);null!=n.scrollTop&&Jn(t,n.scrollTop),null!=n.scrollLeft&&ei(t,n.scrollLeft)}function Gn(t,e){var n=t.display,i=bn(t.display);e.top<0&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=He(t),s={};e.bottom-e.top>o&&(e.bottom=e.top+o);var a=t.doc.height+Ie(n),l=e.top<i,u=e.bottom>a-i;if(e.top<r)s.scrollTop=l?0:e.top;else if(e.bottom>r+o){var c=Math.min(e.top,(u?a:e.bottom)-o);c!=r&&(s.scrollTop=c)}var h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,p=Fe(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),d=e.right-e.left>p;return d&&(e.right=e.left+p),e.left<10?s.scrollLeft=0:e.left<h?s.scrollLeft=Math.max(0,e.left-(d?0:10)):e.right>p+h-3&&(s.scrollLeft=e.right+(d?0:10)-p),s}function Xn(t,e){null!=e&&(Zn(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function $n(t){Zn(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function qn(t,e,n){null==e&&null==n||Zn(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Yn(t,e){Zn(t),t.curOp.scrollToPos=e}function Zn(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;Qn(t,hn(t,e.from),hn(t,e.to),e.margin)}}function Qn(t,e,n,i){var r=Gn(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i});qn(t,r.scrollLeft,r.scrollTop)}function Jn(t,e){Math.abs(t.doc.scrollTop-e)<2||(_s||Ni(t,{top:e}),ti(t,e,!0),_s&&Ni(t),Ci(t,100))}function ti(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function ei(t,e,n,i){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!i||(t.doc.scrollLeft=e,Fn(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function ni(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+Ie(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+je(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function ii(t,e){e||(e=ni(t));var n=t.display.barWidth,i=t.display.barHeight;ri(t,e);for(var r=0;r<4&&n!=t.display.barWidth||i!=t.display.barHeight;r++)n!=t.display.barWidth&&t.options.lineWrapping&&In(t),ri(t,ni(t)),n=t.display.barWidth,i=t.display.barHeight}function ri(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}function oi(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Is(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Ca[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),na(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?ei(t,e):Jn(t,e)},t),t.display.scrollbars.addClass&&a(t.display.wrapper,t.display.scrollbars.addClass)}function si(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Sa},ve(t.curOp)}function ai(t){var e=t.curOp;e&&be(e,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;li(t)})}function li(t){for(var e=t.ops,n=0;n<e.length;n++)ui(e[n]);for(var i=0;i<e.length;i++)ci(e[i]);for(var r=0;r<e.length;r++)hi(e[r]);for(var o=0;o<e.length;o++)pi(e[o]);for(var s=0;s<e.length;s++)di(e[s])}function ui(t){var e=t.cm,n=e.display;Ti(e),t.updateMaxLine&&wt(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new Ta(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function ci(t){t.updatedDisplay=t.mustUpdate&&Ei(t.cm,t.update)}function hi(t){var e=t.cm,n=e.display;t.updatedDisplay&&In(e),t.barMeasure=ni(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ge(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+je(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-Fe(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function pi(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ei(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==s();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&ii(e,t.barMeasure),t.updatedDisplay&&Di(e,t.barMeasure),t.selectionChanged&&Rn(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Dn(t.cm)}function di(t){var e=t.cm,n=e.display,i=e.doc;if(t.updatedDisplay&&Mi(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&ti(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&ei(e,t.scrollLeft,!0,!0),t.scrollToPos){Un(e,Kn(e,H(i,t.scrollToPos.from),H(i,t.scrollToPos.to),t.scrollToPos.margin))}var r=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(r)for(var s=0;s<r.length;++s)r[s].lines.length||Ot(r[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&Ot(o[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&Ot(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function fi(t,e){if(t.curOp)return e();si(t);try{return e()}finally{ai(t)}}function _i(t,e){return function(){if(t.curOp)return e.apply(t,arguments);si(t);try{return e.apply(t,arguments)}finally{ai(t)}}}function gi(t){return function(){if(this.curOp)return t.apply(this,arguments);si(this);try{return t.apply(this,arguments)}finally{ai(this)}}}function mi(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);si(e);try{return t.apply(this,arguments)}finally{ai(e)}}}function vi(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||(i=0);var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)Qs&&_t(t.doc,e)<r.viewTo&&bi(t);else if(n<=r.viewFrom)Qs&&gt(t.doc,n+i)>r.viewFrom?bi(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)bi(t);else if(e<=r.viewFrom){var o=wi(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):bi(t)}else if(n>=r.viewTo){var s=wi(t,e,e,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):bi(t)}else{var a=wi(t,e,e,-1),l=wi(t,n,n+i,1);a&&l?(r.view=r.view.slice(0,a.index).concat(me(t,a.lineN,l.lineN)).concat(r.view.slice(l.index)),r.viewTo+=i):bi(t)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:e<u.lineN+u.size&&(r.externalMeasured=null))}function yi(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),!(e<i.viewFrom||e>=i.viewTo)){var o=i.view[On(t,e)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==p(s,n)&&s.push(n)}}}function bi(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function wi(t,e,n,i){var r,o=On(t,e),s=t.display.view;if(!Qs||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var a=t.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=e){if(i>0){if(o==s.length-1)return null;r=a+s[o].size-e,o++}else r=a-e;e+=r,n+=r}for(;_t(t.doc,n)!=n;){if(o==(i<0?0:s.length-1))return null;n+=i*s[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function ki(t,e,n){var i=t.display;0==i.view.length||e>=i.viewTo||n<=i.viewFrom?(i.view=me(t,e,n),i.viewFrom=e):(i.viewFrom>e?i.view=me(t,e,i.viewFrom).concat(i.view):i.viewFrom<e&&(i.view=i.view.slice(On(t,e))),i.viewFrom=e,i.viewTo<n?i.view=i.view.concat(me(t,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,On(t,n)))),i.viewTo=n}function xi(t){for(var e=t.display.view,n=0,i=0;i<e.length;i++){var r=e[i];r.hidden||r.node&&!r.changes||++n}return n}function Ci(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,u(Si,t))}function Si(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=Zt(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(i.line>=t.display.viewFrom){var s=o.styles,a=o.text.length>t.options.maxHighlightLength?Gt(e.mode,i.state):null,l=qt(t,o,i,!0);a&&(i.state=a),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),p=0;!h&&p<s.length;++p)h=s[p]!=o.styles[p];h&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=t.options.maxHighlightLength&&Qt(t,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Ci(t,t.options.workDelay),!0}),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&fi(t,function(){for(var e=0;e<r.length;e++)yi(t,r[e],"text")})}}function Ti(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=je(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=je(t)+"px",e.scrollbarsClipped=!0)}function Oi(t){if(t.hasFocus())return null;var e=s();if(!e||!o(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&o(t.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}function Li(t){if(t&&t.activeElt&&t.activeElt!=s()&&(t.activeElt.focus(),t.anchorNode&&o(document.body,t.anchorNode)&&o(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}function Ei(t,n){var i=t.display,r=t.doc;if(n.editorIsHidden)return bi(t),!1;if(!n.force&&n.visible.from>=i.viewFrom&&n.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==xi(t))return!1;Hn(t)&&(bi(t),n.dims=kn(t));var o=r.first+r.size,s=Math.max(n.visible.from-t.options.viewportMargin,r.first),a=Math.min(o,n.visible.to+t.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(r.first,i.viewFrom)),i.viewTo>a&&i.viewTo-a<20&&(a=Math.min(o,i.viewTo)),Qs&&(s=_t(t.doc,s),a=gt(t.doc,a));var l=s!=i.viewFrom||a!=i.viewTo||i.lastWrapHeight!=n.wrapperHeight||i.lastWrapWidth!=n.wrapperWidth;ki(t,s,a),i.viewOffset=yt(O(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px";var u=xi(t);if(!l&&0==u&&!n.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Oi(t);return u>4&&(i.lineDiv.style.display="none"),Ai(t,i.updateLineNumbers,n.dims),u>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,Li(c),e(i.cursorDiv),e(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,l&&(i.lastWrapHeight=n.wrapperHeight,i.lastWrapWidth=n.wrapperWidth,Ci(t,400)),i.updateLineNumbers=null,!0}function Mi(t,e){for(var n=e.viewport,i=!0;(i&&t.options.lineWrapping&&e.oldDisplayWidth!=Fe(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Ie(t.display)-He(t),n.top)}),e.visible=jn(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&Ei(t,e);i=!1){In(t);var r=ni(t);Ln(t),ii(t,r),Di(t,r),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Ni(t,e){var n=new Ta(t,e);if(Ei(t,n)){In(t),Mi(t,n);var i=ni(t);Ln(t),ii(t,i),Di(t,i),n.finish()}}function Ai(t,n,i){function r(e){var n=e.nextSibling;return ws&&Ns&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var o=t.display,s=t.options.lineNumbers,a=o.lineDiv,l=a.firstChild,u=o.view,c=o.viewFrom,h=0;h<u.length;h++){var d=u[h];if(d.hidden);else if(d.node&&d.node.parentNode==a){for(;l!=d.node;)l=r(l);var f=s&&null!=n&&n<=c&&d.lineNumber;d.changes&&(p(d.changes,"gutter")>-1&&(f=!1),xe(t,d,c,i)),f&&(e(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(D(t.options,c)))),l=d.node.nextSibling}else{var _=Ne(t,d,c,i);a.insertBefore(_,l)}c+=d.size}for(;l;)l=r(l)}function Ri(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function Di(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+je(t)+"px"}function Wi(t){var n=t.display.gutters,r=t.options.gutters;e(n);for(var o=0;o<r.length;++o){var s=r[o],a=n.appendChild(i("div",null,"CodeMirror-gutter "+s));"CodeMirror-linenumbers"==s&&(t.display.lineGutter=a,a.style.width=(t.display.lineNumWidth||1)+"px")}n.style.display=o?"":"none",Ri(t)}function Pi(t){var e=p(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function zi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function Ii(t){var e=zi(t);return e.x*=La,e.y*=La,e}function Bi(t,e){var n=zi(e),i=n.x,r=n.y,o=t.display,s=o.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&a||r&&l){if(r&&Ns&&ws)t:for(var u=e.target,c=o.view;u!=s;u=u.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==u){t.display.currentWheelTarget=u;break t}if(i&&!_s&&!Cs&&null!=La)return r&&l&&Jn(t,Math.max(0,s.scrollTop+r*La)),ei(t,Math.max(0,s.scrollLeft+i*La)),(!r||r&&l)&&At(e),void(o.wheelStartX=null);if(r&&null!=La){var p=r*La,d=t.doc.scrollTop,f=d+o.wrapper.clientHeight;p<0?d=Math.max(0,d+p-50):f=Math.min(t.doc.height,f+p+50),Ni(t,{top:d,bottom:f})}Oa<20&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=i,o.wheelDY=r,setTimeout(function(){if(null!=o.wheelStartX){var t=s.scrollLeft-o.wheelStartX,e=s.scrollTop-o.wheelStartY,n=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(La=(La*Oa+n)/(Oa+1),++Oa)}},200)):(o.wheelDX+=i,o.wheelDY+=r))}}function ji(t,e,n){var i=t&&t.options.selectionsMayTouch,r=e[n];e.sort(function(t,e){return P(t.from(),e.from())}),n=p(e,r);for(var o=1;o<e.length;o++){var s=e[o],a=e[o-1],l=P(a.to(),s.from());if(i&&!s.empty()?l>0:l>=0){var u=j(a.from(),s.from()),c=B(a.to(),s.to()),h=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,e.splice(--o,2,new Ma(h?c:u,h?u:c))}}return new Ea(e,n)}function Fi(t,e){return new Ea([new Ma(t,e||t)],0)}function Hi(t){return t.text?W(t.from.line+t.text.length-1,_(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ui(t,e){if(P(t,e.from)<0)return t;if(P(t,e.to)<=0)return Hi(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Hi(e).ch-e.to.ch),W(n,i)}function Ki(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new Ma(Ui(r.anchor,e),Ui(r.head,e)))}return ji(t.cm,n,t.sel.primIndex)}function Vi(t,e,n){return t.line==e.line?W(n.line,t.ch-e.ch+n.ch):W(n.line+(t.line-e.line),t.ch)}function Gi(t,e,n){for(var i=[],r=W(t.first,0),o=r,s=0;s<e.length;s++){var a=e[s],l=Vi(a.from,r,o),u=Vi(Hi(a),r,o);if(r=a.to,o=u,"around"==n){var c=t.sel.ranges[s],h=P(c.head,c.anchor)<0;i[s]=new Ma(h?u:l,h?l:u)}else i[s]=new Ma(l,l)}return new Ea(i,t.sel.primIndex)}function Xi(t){t.doc.mode=Kt(t.options,t.doc.modeOption),$i(t)}function $i(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Ci(t,100),t.state.modeGen++,t.curOp&&vi(t)}function qi(t,e){return 0==e.from.ch&&0==e.to.ch&&""==_(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Yi(t,e,n,i){function r(t){return n?n[t]:null}function o(t,n,r){se(t,n,r,i),we(t,"change",t,e)}function s(t,e){for(var n=[],o=t;o<e;++o)n.push(new _a(u[o],r(o),i));return n}var a=e.from,l=e.to,u=e.text,c=O(t,a.line),h=O(t,l.line),p=_(u),d=r(u.length-1),f=l.line-a.line;if(e.full)t.insert(0,s(0,u.length)),t.remove(u.length,t.size-u.length);else if(qi(t,e)){var g=s(0,u.length-1);o(h,h.text,d),f&&t.remove(a.line,f),g.length&&t.insert(a.line,g)}else if(c==h)if(1==u.length)o(c,c.text.slice(0,a.ch)+p+c.text.slice(l.ch),d);else{var m=s(1,u.length-1);m.push(new _a(p+c.text.slice(l.ch),d,i)),o(c,c.text.slice(0,a.ch)+u[0],r(0)),t.insert(a.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,a.ch)+u[0]+h.text.slice(l.ch),r(0)),t.remove(a.line+1,f);else{o(c,c.text.slice(0,a.ch)+u[0],r(0)),o(h,p+h.text.slice(l.ch),d);var v=s(1,u.length-1);f>1&&t.remove(a.line+1,f-1),t.insert(a.line+1,v)}we(t,"change",t,e)}function Zi(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;s<t.linked.length;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;n&&!l||(e(a.doc,l),i(a.doc,t,l))}}}i(t,null,!0)}function Qi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,Sn(t),Xi(t),Ji(t),t.options.lineWrapping||wt(t),t.options.mode=e.modeOption,vi(t)}function Ji(t){("rtl"==t.doc.direction?a:Is)(t.display.lineDiv,"CodeMirror-rtl")}function tr(t){fi(t,function(){Ji(t),vi(t)})}function er(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function nr(t,e){var n={from:I(e.from),to:Hi(e),text:L(t,e.from,e.to)};return ur(t,n,e.from.line,e.to.line+1),Zi(t,function(t){return ur(t,n,e.from.line,e.to.line+1)},!0),n}function ir(t){for(;t.length;){if(!_(t).ranges)break;t.pop()}}function rr(t,e){return e?(ir(t.done),_(t.done)):t.done.length&&!_(t.done).ranges?_(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),_(t.done)):void 0}function or(t,e,n,i){var r=t.history;r.undone.length=0;var o,s,a=+new Date;if((r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>a-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=rr(r,r.lastOp==i)))s=_(o.changes),0==P(e.from,e.to)&&0==P(e.from,s.to)?s.to=Hi(e):o.changes.push(nr(t,e));else{var l=_(r.done);for(l&&l.ranges||lr(t.sel,r.done),o={changes:[nr(t,e)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=a,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,s||Ot(t,"historyAdded")}function sr(t,e,n,i){var r=e.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function ar(t,e,n,i){var r=t.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||sr(t,o,_(r.done),e))?r.done[r.done.length-1]=e:lr(e,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&ir(r.undone)}function lr(t,e){var n=_(e);n&&n.ranges&&n.equals(t)||e.push(t)}function ur(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),function(n){n.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function cr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function hr(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var i=[],r=0;r<e.text.length;++r)i.push(cr(n[r]));return i}function pr(t,e){var n=hr(t,e),i=J(t,e);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)t:for(var a=0;a<s.length;++a){for(var l=s[a],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else s&&(n[r]=s)}return n}function dr(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?Ea.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];i.push({changes:a});for(var l=0;l<s.length;++l){var u=s[l],c=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&p(e,Number(c[1]))>-1&&(_(a)[h]=u[h],delete u[h])}}}return i}function fr(t,e,n,i){if(i){var r=t.anchor;if(n){var o=P(e,r)<0;o!=P(n,r)<0?(r=e,e=n):o!=P(e,n)<0&&(e=n)}return new Ma(r,e)}return new Ma(n||e,e)}function _r(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),wr(t,new Ea([fr(t.sel.primary(),e,n,r)],0),i)}function gr(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=fr(t.sel.ranges[o],e[o],null,r);wr(t,ji(t.cm,i,t.sel.primIndex),n)}function mr(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,wr(t,ji(t.cm,r,t.sel.primIndex),i)}function vr(t,e,n,i){wr(t,Fi(e,n),i)}function yr(t,e,n){var i={ranges:e.ranges,update:function(e){var n=this;this.ranges=[];for(var i=0;i<e.length;i++)n.ranges[i]=new Ma(H(t,e[i].anchor),H(t,e[i].head))},origin:n&&n.origin};return Ot(t,"beforeSelectionChange",t,i),t.cm&&Ot(t.cm,"beforeSelectionChange",t.cm,i),i.ranges!=e.ranges?ji(t.cm,i.ranges,i.ranges.length-1):e}function br(t,e,n){var i=t.history.done,r=_(i);r&&r.ranges?(i[i.length-1]=e,kr(t,e,n)):wr(t,e,n)}function wr(t,e,n){kr(t,e,n),ar(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function kr(t,e,n){(Mt(t,"beforeSelectionChange")||t.cm&&Mt(t.cm,"beforeSelectionChange"))&&(e=yr(t,e,n)),xr(t,Sr(t,e,n&&n.bias||(P(e.primary().head,t.sel.primary().head)<0?-1:1),!0)),n&&!1===n.scroll||!t.cm||$n(t.cm)}function xr(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,Et(t.cm)),we(t,"cursorActivity",t))}function Cr(t){xr(t,Sr(t,t.sel,null,!1))}function Sr(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var s=e.ranges[o],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],l=Or(t,s.anchor,a&&a.anchor,n,i),u=Or(t,s.head,a&&a.head,n,i);(r||l!=s.anchor||u!=s.head)&&(r||(r=e.ranges.slice(0,o)),r[o]=new Ma(l,u))}return r?ji(t.cm,r,e.primIndex):e}function Tr(t,e,n,i,r){var o=O(t,e.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(l.inclusiveRight?a.to>=e.ch:a.to>e.ch))){if(r&&(Ot(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var u=l.find(i<0?1:-1),c=void 0;if((i<0?l.inclusiveRight:l.inclusiveLeft)&&(u=Lr(t,u,-i,u&&u.line==e.line?o:null)),u&&u.line==e.line&&(c=P(u,n))&&(i<0?c<0:c>0))return Tr(t,u,e,i,r)}var h=l.find(i<0?-1:1);return(i<0?l.inclusiveLeft:l.inclusiveRight)&&(h=Lr(t,h,i,h.line==e.line?o:null)),h?Tr(t,h,e,i,r):null}}return e}function Or(t,e,n,i,r){var o=i||1,s=Tr(t,e,n,o,r)||!r&&Tr(t,e,n,o,!0)||Tr(t,e,n,-o,r)||!r&&Tr(t,e,n,-o,!0);return s||(t.cantEdit=!0,W(t.first,0))}function Lr(t,e,n,i){return n<0&&0==e.ch?e.line>t.first?H(t,W(e.line-1)):null:n>0&&e.ch==(i||O(t,e.line)).text.length?e.line<t.first+t.size-1?W(e.line+1,0):null:new W(e.line,e.ch+n)}function Er(t){t.setSelection(W(t.firstLine(),0),W(t.lastLine()),Vs)}function Mr(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,r,o){e&&(i.from=H(t,e)),n&&(i.to=H(t,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),Ot(t,"beforeChange",t,i),t.cm&&Ot(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Nr(t,e,n){if(t.cm){if(!t.cm.curOp)return _i(t.cm,Nr)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(Mt(t,"beforeChange")||t.cm&&Mt(t.cm,"beforeChange"))||(e=Mr(t,e,!0))){var i=Zs&&!n&&et(t,e.from,e.to);if(i)for(var r=i.length-1;r>=0;--r)Ar(t,{from:i[r].from,to:i[r].to,text:r?[""]:e.text,origin:e.origin});else Ar(t,e)}}function Ar(t,e){if(1!=e.text.length||""!=e.text[0]||0!=P(e.from,e.to)){var n=Ki(t,e);or(t,e,n,t.cm?t.cm.curOp.id:NaN),Wr(t,e,n,J(t,e));var i=[];Zi(t,function(t,n){n||-1!=p(i,t.history)||(jr(t.history,e),i.push(t.history)),Wr(t,e,null,J(t,e))})}}function Rr(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var r,o=t.history,s=t.sel,a="undo"==e?o.done:o.undone,l="undo"==e?o.undone:o.done,u=0;u<a.length&&(r=a[u],n?!r.ranges||r.equals(t.sel):r.ranges);u++);if(u!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(r=a.pop(),!r.ranges){if(i)return void a.push(r);break}if(lr(r,l),n&&!r.equals(t.sel))return void wr(t,r,{clearRedo:!1});s=r}var c=[];lr(s,l),l.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var h=Mt(t,"beforeChange")||t.cm&&Mt(t.cm,"beforeChange"),d=r.changes.length-1;d>=0;--d){var f=function(n){var i=r.changes[n];if(i.origin=e,h&&!Mr(t,i,!1))return a.length=0,{};c.push(nr(t,i));var o=n?Ki(t,i):_(a);Wr(t,i,o,pr(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Hi(i)});var s=[];Zi(t,function(t,e){e||-1!=p(s,t.history)||(jr(t.history,i),s.push(t.history)),Wr(t,i,null,pr(t,i))})}(d);if(f)return f.v}}}}function Dr(t,e){if(0!=e&&(t.first+=e,t.sel=new Ea(g(t.sel.ranges,function(t){return new Ma(W(t.anchor.line+e,t.anchor.ch),W(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){vi(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)yi(t.cm,i,"gutter")}}function Wr(t,e,n,i){if(t.cm&&!t.cm.curOp)return _i(t.cm,Wr)(t,e,n,i);if(e.to.line<t.first)return void Dr(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);Dr(t,r),e={from:W(t.first,0),to:W(e.to.line+r,e.to.ch),text:[_(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:W(o,O(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=L(t,e.from,e.to),n||(n=Ki(t,e)),t.cm?Pr(t.cm,e,i):Yi(t,e,i),kr(t,n,Vs)}}function Pr(t,e,n){var i=t.doc,r=t.display,o=e.from,s=e.to,a=!1,l=o.line;t.options.lineWrapping||(l=N(pt(O(i,o.line))),i.iter(l,s.line+1,function(t){if(t==r.maxLine)return a=!0,!0})),i.sel.contains(e.from,e.to)>-1&&Et(t),Yi(i,e,n,Cn(t)),t.options.lineWrapping||(i.iter(l,o.line+e.text.length,function(t){var e=bt(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0)),oe(i,o.line),Ci(t,400);var u=e.text.length-(s.line-o.line)-1;e.full?vi(t):o.line!=s.line||1!=e.text.length||qi(t.doc,e)?vi(t,o.line,s.line+1,u):yi(t,o.line,"text");var c=Mt(t,"changes"),h=Mt(t,"change");if(h||c){var p={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin};h&&we(t,"change",t,p),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(p)}t.display.selForContextMenu=null}function zr(t,e,n,i,r){var o;i||(i=n),P(i,n)<0&&(o=[i,n],n=o[0],i=o[1]),"string"==typeof e&&(e=t.splitLines(e)),Nr(t,{from:n,to:i,text:e,origin:r})}function Ir(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function Br(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],s=!0;if(o.ranges){o.copied||(o=t[r]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)Ir(o.ranges[a].anchor,e,n,i),Ir(o.ranges[a].head,e,n,i)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=W(u.from.line+i,u.from.ch),u.to=W(u.to.line+i,u.to.ch);else if(e<=u.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function jr(t,e){var n=e.from.line,i=e.to.line,r=e.text.length-(i-n)-1;Br(t.done,n,i,r),Br(t.undone,n,i,r)}function Fr(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=O(t,F(t,e)):r=N(e),null==r?null:(i(o,r)&&t.cm&&yi(t.cm,r,n),o)}function Hr(t){var e=this;this.lines=t,this.parent=null;for(var n=0,i=0;i<t.length;++i)t[i].parent=e,n+=t[i].height;this.height=n}function Ur(t){var e=this;this.children=t;for(var n=0,i=0,r=0;r<t.length;++r){var o=t[r];n+=o.chunkSize(),i+=o.height,o.parent=e}this.size=n,this.height=i,this.parent=null}function Kr(t,e,n){yt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Xn(t,n)}function Vr(t,e,n,i){var r=new Na(t,n,i),o=t.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),Fr(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!mt(t,e)){var i=yt(e)<t.scrollTop;M(e,e.height+We(r)),i&&Xn(o,r.height),o.curOp.forceUpdate=!0}return!0}),o&&we(o,"lineWidgetAdded",o,r,"number"==typeof e?e:N(e)),r}function Gr(t,e,n,i,o){if(i&&i.shared)return Xr(t,e,n,i,o);if(t.cm&&!t.cm.curOp)return _i(t.cm,Gr)(t,e,n,i,o);var s=new Ra(t,o),a=P(e,n);if(i&&c(i,s,!1),a>0||0==a&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=r("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(ht(t,e.line,e,n,s)||e.line!=n.line&&ht(t,n.line,e,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");G()}s.addToHistory&&or(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var l,u=e.line,h=t.cm;if(t.iter(u,n.line+1,function(t){h&&s.collapsed&&!h.options.lineWrapping&&pt(t)==h.display.maxLine&&(l=!0),s.collapsed&&u!=e.line&&M(t,0),Y(t,new X(s,u==e.line?e.ch:null,u==n.line?n.ch:null)),++u}),s.collapsed&&t.iter(e.line,n.line+1,function(e){mt(t,e)&&M(e,0)}),s.clearOnEnter&&na(s,"beforeCursorEnter",function(){return s.clear()}),s.readOnly&&(V(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++Aa,s.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),s.collapsed)vi(h,e.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var p=e.line;p<=n.line;p++)yi(h,p,"text");s.atomic&&Cr(h.doc),we(h,"markerAdded",h,s)}return s}function Xr(t,e,n,i,r){i=c(i),i.shared=!1;var o=[Gr(t,e,n,i,r)],s=o[0],a=i.widgetNode;return Zi(t,function(t){a&&(i.widgetNode=a.cloneNode(!0)),o.push(Gr(t,H(t,e),H(t,n),i,r));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;s=_(o)}),new Da(o,s)}function $r(t){return t.findMarks(W(t.first,0),t.clipPos(W(t.lastLine())),function(t){return t.parent})}function qr(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=i.find(),o=t.clipPos(r.from),s=t.clipPos(r.to);if(P(o,s)){var a=Gr(t,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function Yr(t){for(var e=0;e<t.length;e++)!function(e){var n=t[e],i=[n.primary.doc];Zi(n.primary.doc,function(t){return i.push(t)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==p(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}}(e)}function Zr(t){var e=this;if(to(e),!Lt(e,t)&&!Pe(e.display,t)){At(t),ys&&(za=+new Date);var n=Tn(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=0;a<r;++a)!function(t,i){if(!e.options.allowDropFileTypes||-1!=p(e.options.allowDropFileTypes,t.type)){var a=new FileReader;a.onload=_i(e,function(){var t=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),o[i]=t,++s==r){n=H(e.doc,n);var l={from:n,to:n,text:e.doc.splitLines(o.join(e.doc.lineSeparator())),origin:"paste"};Nr(e.doc,l),br(e.doc,Fi(n,Hi(l)))}}),a.readAsText(t)}}(i[a],a);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var l=t.dataTransfer.getData("Text");if(l){var u;if(e.state.draggingText&&!e.state.draggingText.copy&&(u=e.listSelections()),kr(e.doc,Fi(n,n)),u)for(var c=0;c<u.length;++c)zr(e.doc,"",u[c].anchor,u[c].head,"drag");e.replaceSelection(l,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Qr(t,e){if(ys&&(!t.state.draggingText||+new Date-za<100))return void Wt(e);if(!Lt(t,e)&&!Pe(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!Ss)){var n=i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Cs&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),Cs&&n.parentNode.removeChild(n)}}function Jr(t,e){var r=Tn(t,e);if(r){var o=document.createDocumentFragment();Mn(t,r,o),t.display.dragCursor||(t.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),n(t.display.dragCursor,o)}}function to(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function eo(t){if(document.getElementsByClassName)for(var e=document.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&t(i)}}function no(){Ia||(io(),Ia=!0)}function io(){var t;na(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,eo(ro)},100))}),na(window,"blur",function(){return eo(zn)})}function ro(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}function oo(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var n,i,r,o,s=0;s<e.length-1;s++){var a=e[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function so(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete t[n];continue}for(var r=g(n.split(" "),oo),o=0;o<r.length;o++){var s=void 0,a=void 0;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var l=e[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else e[a]=s}delete t[n]}for(var u in e)t[u]=e[u];return t}function ao(t,e,n,i){e=ho(e);var r=e.call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return ao(t,e.fallthrough,n,i);for(var o=0;o<e.fallthrough.length;o++){var s=ao(t,e.fallthrough[o],n,i);if(s)return s}}}function lo(t){var e="string"==typeof t?t:Ba[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function uo(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(Ps?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(Ps?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function co(t,e){if(Cs&&34==t.keyCode&&t.char)return!1;var n=Ba[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),uo(n,t,e))}function ho(t){return"string"==typeof t?Ua[t]:t}function po(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&P(o.from,_(i).to)<=0;){var s=i.pop();if(P(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}fi(t,function(){for(var e=i.length-1;e>=0;e--)zr(t.doc,"",i[e].from,i[e].to,"+delete");$n(t)})}function fo(t,e,n){var i=C(t.text,e+n,n);return i<0||i>t.text.length?null:i}function _o(t,e,n){var i=fo(t,e.ch,n);return null==i?null:new W(e.line,i,n<0?"after":"before")}function go(t,e,n,i,r){if(t){var o=Ct(n,e.doc.direction);if(o){var s,a=r<0?_(o):o[0],l=r<0==(1==a.level),u=l?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var c=$e(e,n);s=r<0?n.text.length-1:0;var h=qe(e,c,s).top;s=S(function(t){return qe(e,c,t).top==h},r<0==(1==a.level)?a.from:a.to-1,s),"before"==u&&(s=fo(n,s,1))}else s=r<0?a.to:a.from;return new W(i,s,u)}}return new W(i,r<0?n.text.length:0,r<0?"before":"after")}function mo(t,e,n,i){var r=Ct(e,t.doc.direction);if(!r)return _o(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=xt(r,n.ch,n.sticky),s=r[o];if("ltr"==t.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return _o(e,n,i);var a,l=function(t,n){return fo(e,t instanceof W?t.ch:t,n)},u=function(n){return t.options.lineWrapping?(a=a||$e(t,e),_n(t,e,a,n)):{begin:0,end:e.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var h=1==s.level==i<0,p=l(n,h?1:-1);if(null!=p&&(h?p<=s.to&&p<=c.end:p>=s.from&&p>=c.begin)){var d=h?"before":"after";return new W(n.line,p,d)}}var f=function(t,e,i){for(var o=function(t,e){return e?new W(n.line,l(t,1),"before"):new W(n.line,t,"after")};t>=0&&t<r.length;t+=e){var s=r[t],a=e>0==(1!=s.level),u=a?i.begin:l(i.end,-1);if(s.from<=u&&u<s.to)return o(u,a);if(u=a?s.from:l(s.to,-1),i.begin<=u&&u<i.end)return o(u,a)}},_=f(o+i,i,c);if(_)return _;var g=i>0?c.end:l(c.begin,-1);return null==g||i>0&&g==e.text.length||!(_=f(i>0?0:r.length-1,i,u(g)))?null:_}function vo(t,e){var n=O(t.doc,e),i=pt(n);return i!=n&&(e=N(i)),go(!0,t,i,e,1)}function yo(t,e){var n=O(t.doc,e),i=dt(n);return i!=n&&(e=N(i)),go(!0,t,n,e,-1)}function bo(t,e){var n=vo(t,e.line),i=O(t.doc,n.line),r=Ct(i,t.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),s=e.line==n.line&&e.ch<=o&&e.ch;return W(n.line,s?0:o,n.sticky)}return n}function wo(t,e,n){if("string"==typeof e&&!(e=Ka[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=Ks}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}function ko(t,e,n){for(var i=0;i<t.state.keyMaps.length;i++){var r=ao(e,t.state.keyMaps[i],n,t);if(r)return r}return t.options.extraKeys&&ao(e,t.options.extraKeys,n,t)||ao(e,t.options.keyMap,n,t)}function xo(t,e,n,i){var r=t.state.keySeq;if(r){if(lo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:Va.set(50,function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())}),Co(t,r+" "+e,n,i))return!0}return Co(t,e,n,i)}function Co(t,e,n,i){var r=ko(t,e,i);return"multi"==r&&(t.state.keySeq=e),"handled"==r&&we(t,"keyHandled",t,e,n),"handled"!=r&&"multi"!=r||(At(n),Rn(t)),!!r}function So(t,e){var n=co(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?xo(t,"Shift-"+n,e,function(e){return wo(t,e,!0)})||xo(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return wo(t,e)}):xo(t,n,e,function(e){return wo(t,e)}))}function To(t,e,n){return xo(t,"'"+n+"'",e,function(e){return wo(t,e,!0)})}function Oo(t){var e=this;if(e.curOp.focus=s(),!Lt(e,t)){ys&&bs<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=So(e,t);Cs&&(Ga=i?n:null,!i&&88==n&&!sa&&(Ns?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Lo(e)}}function Lo(t){function e(t){18!=t.keyCode&&t.altKey||(Is(n,"CodeMirror-crosshair"),Tt(document,"keyup",e),Tt(document,"mouseover",e))}var n=t.display.lineDiv;a(n,"CodeMirror-crosshair"),na(document,"keyup",e),na(document,"mouseover",e)}function Eo(t){16==t.keyCode&&(this.doc.sel.shift=!1),Lt(this,t)}function Mo(t){var e=this;if(!(Pe(e.display,t)||Lt(e,t)||t.ctrlKey&&!t.altKey||Ns&&t.metaKey)){var n=t.keyCode,i=t.charCode;if(Cs&&n==Ga)return Ga=null,void At(t);if(!Cs||t.which&&!(t.which<10)||!So(e,t)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(To(e,t,r)||e.display.input.onKeyPress(t))}}}function No(t,e){var n=+new Date;return qa&&qa.compare(n,t,e)?($a=qa=null,"triple"):$a&&$a.compare(n,t,e)?(qa=new Xa(n,t,e),$a=null,"double"):($a=new Xa(n,t,e),qa=null,"single")}function Ao(t){var e=this,n=e.display;if(!(Lt(e,t)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=t.shiftKey,Pe(n,t))return void(ws||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!Fo(e,t)){var i=Tn(e,t),r=zt(t),o=i?No(i,r):"single";window.focus(),1==r&&e.state.selectingText&&e.state.selectingText(t),i&&Ro(e,r,i,o,t)||(1==r?i?Wo(e,i,o,t):Pt(t)==n.scroller&&At(t):2==r?(i&&_r(e.doc,i),setTimeout(function(){return n.input.focus()},20)):3==r&&(zs?e.display.input.onContextMenu(t):Wn(e)))}}}function Ro(t,e,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),o=(1==e?"Left":2==e?"Middle":"Right")+o,xo(t,uo(o,r),r,function(e){if("string"==typeof e&&(e=Ka[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=Ks}finally{t.state.suppressEdits=!1}return i})}function Do(t,e,n){var i=t.getOption("configureMouse"),r=i?i(t,e,n):{};if(null==r.unit){var o=As?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=Ns?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(Ns?n.altKey:n.ctrlKey)),r}function Wo(t,e,n,i){ys?setTimeout(u(Dn,t),0):t.curOp.focus=s();var r,o=Do(t,n,i),a=t.doc.sel;t.options.dragDrop&&ia&&!t.isReadOnly()&&"single"==n&&(r=a.contains(e))>-1&&(P((r=a.ranges[r]).from(),e)<0||e.xRel>0)&&(P(r.to(),e)>0||e.xRel<0)?Po(t,i,e,o):Io(t,i,e,o)}function Po(t,e,n,i){var r=t.display,o=!1,s=_i(t,function(e){ws&&(r.scroller.draggable=!1),t.state.draggingText=!1,Tt(r.wrapper.ownerDocument,"mouseup",s),Tt(r.wrapper.ownerDocument,"mousemove",a),Tt(r.scroller,"dragstart",l),Tt(r.scroller,"drop",s),o||(At(e),i.addNew||_r(t.doc,n,null,null,i.extend),ws||ys&&9==bs?setTimeout(function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()},20):r.input.focus())}),a=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},l=function(){return o=!0};ws&&(r.scroller.draggable=!0),t.state.draggingText=s,s.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop(),na(r.wrapper.ownerDocument,"mouseup",s),na(r.wrapper.ownerDocument,"mousemove",a),na(r.scroller,"dragstart",l),na(r.scroller,"drop",s),Wn(t),setTimeout(function(){return r.input.focus()},20)}function zo(t,e,n){if("char"==n)return new Ma(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new Ma(W(e.line,0),H(t.doc,W(e.line+1,0)));var i=n(t,e);return new Ma(i.from,i.to)}function Io(t,e,n,i){function r(e){if(0!=P(m,e))if(m=e,"rectangle"==i.unit){for(var r=[],o=t.options.tabSize,s=h(O(u,n.line).text,n.ch,o),a=h(O(u,e.line).text,e.ch,o),l=Math.min(s,a),_=Math.max(s,a),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var y=O(u,g).text,b=d(y,l,o);l==_?r.push(new Ma(W(g,b),W(g,b))):y.length>b&&r.push(new Ma(W(g,b),W(g,d(y,_,o))))}r.length||r.push(new Ma(n,n)),wr(u,ji(t,f.ranges.slice(0,p).concat(r),p),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var w,k=c,x=zo(t,e,i.unit),C=k.anchor;P(x.anchor,C)>0?(w=x.head,C=j(k.from(),x.anchor)):(w=x.anchor,C=B(k.to(),x.head));var S=f.ranges.slice(0);S[p]=Bo(t,new Ma(H(u,C),w)),wr(u,ji(t,S,p),Gs)}}function o(e){var n=++y,a=Tn(t,e,!0,"rectangle"==i.unit);if(a)if(0!=P(a,m)){t.curOp.focus=s(),r(a);var c=jn(l,u);(a.line>=c.to||a.line<c.from)&&setTimeout(_i(t,function(){y==n&&o(e)}),150)}else{var h=e.clientY<v.top?-20:e.clientY>v.bottom?20:0;h&&setTimeout(_i(t,function(){y==n&&(l.scroller.scrollTop+=h,o(e))}),50)}}function a(e){t.state.selectingText=!1,y=1/0,At(e),l.input.focus(),Tt(l.wrapper.ownerDocument,"mousemove",b),Tt(l.wrapper.ownerDocument,"mouseup",w),u.history.lastSelOrigin=null}var l=t.display,u=t.doc;At(e);var c,p,f=u.sel,_=f.ranges;if(i.addNew&&!i.extend?(p=u.sel.contains(n),c=p>-1?_[p]:new Ma(n,n)):(c=u.sel.primary(),p=u.sel.primIndex),"rectangle"==i.unit)i.addNew||(c=new Ma(n,n)),n=Tn(t,e,!0,!0),p=-1;else{var g=zo(t,n,i.unit);c=i.extend?fr(c,g.anchor,g.head,i.extend):g}i.addNew?-1==p?(p=_.length,wr(u,ji(t,_.concat([c]),p),{scroll:!1,origin:"*mouse"})):_.length>1&&_[p].empty()&&"char"==i.unit&&!i.extend?(wr(u,ji(t,_.slice(0,p).concat(_.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),f=u.sel):mr(u,p,c,Gs):(p=0,wr(u,new Ea([c],0),Gs),f=u.sel);var m=n,v=l.wrapper.getBoundingClientRect(),y=0,b=_i(t,function(t){0!==t.buttons&&zt(t)?o(t):a(t)}),w=_i(t,a);t.state.selectingText=w,na(l.wrapper.ownerDocument,"mousemove",b),na(l.wrapper.ownerDocument,"mouseup",w)}function Bo(t,e){var n=e.anchor,i=e.head,r=O(t.doc,n.line);if(0==P(n,i)&&n.sticky==i.sticky)return e;var o=Ct(r);if(!o)return e;var s=xt(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return e;var l=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==l||l==o.length)return e;var u;if(i.line!=n.line)u=(i.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=xt(o,i.ch,i.sticky),h=c-s||(i.ch-n.ch)*(1==a.level?-1:1);u=c==l-1||c==l?h<0:h>0}var p=o[l+(u?-1:0)],d=u==(1==p.level),f=d?p.from:p.to,_=d?"after":"before";return n.ch==f&&n.sticky==_?e:new Ma(new W(n.line,f,_),i)}function jo(t,e,n,i){var r,o;if(e.touches)r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(e){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&At(e);var s=t.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!Mt(t,n))return Dt(e);o-=a.top-s.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var u=s.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=r){return Ot(t,n,t,A(t.doc,o),t.options.gutters[l],e),Dt(e)}}}function Fo(t,e){return jo(t,e,"gutterClick",!0)}function Ho(t,e){Pe(t.display,e)||Uo(t,e)||Lt(t,e,"contextmenu")||zs||t.display.input.onContextMenu(e)}function Uo(t,e){return!!Mt(t,"gutterContextMenu")&&jo(t,e,"gutterContextMenu",!1)}function Ko(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),nn(t)}function Vo(t){Wi(t),vi(t),Fn(t)}function Go(t,e,n){if(!e!=!(n&&n!=Ya)){var i=t.display.dragFunctions,r=e?na:Tt;r(t.display.scroller,"dragstart",i.start),r(t.display.scroller,"dragenter",i.enter),r(t.display.scroller,"dragover",i.over),r(t.display.scroller,"dragleave",i.leave),r(t.display.scroller,"drop",i.drop)}}function Xo(t){t.options.lineWrapping?(a(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(Is(t.display.wrapper,"CodeMirror-wrap"),wt(t)),Sn(t),vi(t),nn(t),setTimeout(function(){return ii(t)},100)}function $o(t,e){var n=this;if(!(this instanceof $o))return new $o(t,e);this.options=e=e?c(e):{},c(Za,e,!1),Pi(e);var i=e.value;"string"==typeof i?i=new Pa(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new $o.inputStyles[e.inputStyle](this),o=this.display=new T(t,i,r);o.wrapper.CodeMirror=this,Wi(this),Ko(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),oi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new js,keySeq:null,specialChars:null},e.autofocus&&!Ms&&o.input.focus(),ys&&bs<11&&setTimeout(function(){return n.display.input.reset(!0)},20),qo(this),no(),si(this),this.curOp.forceUpdate=!0,Qi(this,i),e.autofocus&&!Ms||this.hasFocus()?setTimeout(u(Pn,this),20):zn(this);for(var s in Qa)Qa.hasOwnProperty(s)&&Qa[s](n,e[s],Ya);Hn(this),e.finishInit&&e.finishInit(this);for(var a=0;a<Ja.length;++a)Ja[a](n);ai(this),ws&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function qo(t){function e(){r.activeTouch&&(o=setTimeout(function(){return r.activeTouch=null},1e3),s=r.activeTouch,s.end=+new Date)}function n(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function i(t,e){if(null==e.left)return!0;var n=e.left-t.left,i=e.top-t.top;return n*n+i*i>400}var r=t.display;na(r.scroller,"mousedown",_i(t,Ao)),ys&&bs<11?na(r.scroller,"dblclick",_i(t,function(e){if(!Lt(t,e)){var n=Tn(t,e);if(n&&!Fo(t,e)&&!Pe(t.display,e)){At(e);var i=t.findWordAt(n);_r(t.doc,i.anchor,i.head)}}})):na(r.scroller,"dblclick",function(e){return Lt(t,e)||At(e)}),na(r.scroller,"contextmenu",function(e){return Ho(t,e)});var o,s={end:0};na(r.scroller,"touchstart",function(e){if(!Lt(t,e)&&!n(e)&&!Fo(t,e)){r.input.ensurePolled(),clearTimeout(o);var i=+new Date;r.activeTouch={start:i,moved:!1,prev:i-s.end<=300?s:null},1==e.touches.length&&(r.activeTouch.left=e.touches[0].pageX,r.activeTouch.top=e.touches[0].pageY)}}),na(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),na(r.scroller,"touchend",function(n){var o=r.activeTouch;if(o&&!Pe(r,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var s,a=t.coordsChar(r.activeTouch,"page");s=!o.prev||i(o,o.prev)?new Ma(a,a):!o.prev.prev||i(o,o.prev.prev)?t.findWordAt(a):new Ma(W(a.line,0),H(t.doc,W(a.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),At(n)}e()}),na(r.scroller,"touchcancel",e),na(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Jn(t,r.scroller.scrollTop),ei(t,r.scroller.scrollLeft,!0),Ot(t,"scroll",t))}),na(r.scroller,"mousewheel",function(e){return Bi(t,e)}),na(r.scroller,"DOMMouseScroll",function(e){return Bi(t,e)}),na(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(e){Lt(t,e)||Wt(e)},over:function(e){Lt(t,e)||(Jr(t,e),Wt(e))},start:function(e){return Qr(t,e)},drop:_i(t,Zr),leave:function(e){Lt(t,e)||to(t)}};var a=r.input.getField();na(a,"keyup",function(e){return Eo.call(t,e)}),na(a,"keydown",_i(t,Oo)),na(a,"keypress",_i(t,Mo)),na(a,"focus",function(e){return Pn(t,e)}),na(a,"blur",function(e){return zn(t,e)})}function Yo(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=Zt(t,e).state:n="prev");var s=t.options.tabSize,a=O(o,e),l=h(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var u,c=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&((u=o.mode.indent(r,a.text.slice(c.length),a.text))==Ks||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?h(O(o,e-1).text,null,s):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var p="",d=0;if(t.options.indentWithTabs)for(var _=Math.floor(u/s);_;--_)d+=s,p+="\t";if(d<u&&(p+=f(u-d)),p!=c)return zr(o,p,W(e,0),W(e,c.length),"+input"),a.stateAfter=null,!0;for(var g=0;g<o.sel.ranges.length;g++){var m=o.sel.ranges[g];if(m.head.line==e&&m.head.ch<c.length){var v=W(e,c.length);mr(o,g,new Ma(v,v));break}}}function Zo(t){tl=t}function Qo(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i||(i=o.sel);var s=t.state.pasteIncoming||"paste"==r,a=ra(e),l=null;if(s&&i.ranges.length>1)if(tl&&tl.text.join("\n")==e){if(i.ranges.length%tl.text.length==0){l=[];for(var u=0;u<tl.text.length;u++)l.push(o.splitLines(tl.text[u]))}}else a.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(l=g(a,function(t){return[t]}));for(var c,h=i.ranges.length-1;h>=0;h--){var p=i.ranges[h],d=p.from(),f=p.to();p.empty()&&(n&&n>0?d=W(d.line,d.ch-n):t.state.overwrite&&!s?f=W(f.line,Math.min(O(o,f.line).text.length,f.ch+_(a).length)):s&&tl&&tl.lineWise&&tl.text.join("\n")==e&&(d=f=W(d.line,0))),c=t.curOp.updateInput;var m={from:d,to:f,text:l?l[h%l.length]:a,origin:r||(s?"paste":t.state.cutIncoming?"cut":"+input")};Nr(t.doc,m),we(t,"inputRead",t,m)}e&&!s&&ts(t,e),$n(t),t.curOp.updateInput=c,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function Jo(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||fi(e,function(){return Qo(e,n,0,null,"paste")}),!0}function ts(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(e.indexOf(o.electricChars.charAt(a))>-1){s=Yo(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(O(t.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Yo(t,r.head.line,"smart"));s&&we(t,"electricInput",t,r.head.line)}}}function es(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line,o={anchor:W(r,0),head:W(r+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function ns(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function is(){var t=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=i("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ws?t.style.width="1000px":t.setAttribute("wrap","off"),Ls&&(t.style.border="1px solid black"),ns(t),e}function rs(t,e,n,i,r){function o(){var i=e.line+n;return!(i<t.first||i>=t.first+t.size)&&(e=new W(i,e.ch,e.sticky),u=O(t,i))}function s(i){var s;if(null==(s=r?mo(t.cm,u,e,n):_o(u,e,n))){if(i||!o())return!1;e=go(r,t.cm,u,e.line,n)}else e=s;return!0}var a=e,l=n,u=O(t,e.line);if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var c=null,h="group"==i,p=t.cm&&t.cm.getHelper(e,"wordChars"),d=!0;!(n<0)||s(!d);d=!1){var f=u.text.charAt(e.ch)||"\n",_=w(f,p)?"w":h&&"\n"==f?"n":!h||/\s/.test(f)?null:"p";if(!h||d||_||(_="s"),c&&c!=_){n<0&&(n=1,s(),e.sticky="after");break}if(_&&(c=_),n>0&&!s(!d))break}var g=Or(t,e,a,l,!0);return z(a,g)&&(g.hitSide=!0),g}function os(t,e,n,i){var r,o=t.doc,s=e.left;if("page"==i){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(a-.5*bn(t.display),3);r=(n>0?e.bottom:e.top)+n*l}else"line"==i&&(r=n>0?e.bottom+3:e.top-3);for(var u;u=dn(t,s,r),u.outside;){if(n<0?r<=0:r>=o.height){u.hitSide=!0;break}r+=5*n}return u}function ss(t,e){var n=Xe(t,e.line);if(!n||n.hidden)return null;var i=O(t.doc,e.line),r=Ke(n,i,e.line),o=Ct(i,t.doc.direction),s="left";if(o){s=xt(o,e.ch)%2?"right":"left"}var a=Ye(r.map,e.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function as(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function ls(t,e){return e&&(t.bad=!0),t}function us(t,e,n,i,r){function o(t){return function(e){return e.id==t}}function s(){c&&(u+=h,p&&(u+=h),c=p=!1)}function a(t){t&&(s(),u+=t)}function l(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void a(n);var u,d=e.getAttribute("cm-marker");if(d){var f=t.findMarks(W(i,0),W(r+1,0),o(+d));return void(f.length&&(u=f[0].find(0))&&a(L(t.doc,u.from,u.to).join(h)))}if("false"==e.getAttribute("contenteditable"))return;var _=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;_&&s();for(var g=0;g<e.childNodes.length;g++)l(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(p=!0),_&&(c=!0)}else 3==e.nodeType&&a(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var u="",c=!1,h=t.doc.lineSeparator(),p=!1;l(e),e!=n;)e=e.nextSibling,p=!1;return u}function cs(t,e,n){var i;if(e==t.display.lineDiv){if(!(i=t.display.lineDiv.childNodes[n]))return ls(t.clipPos(W(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return hs(o,e,n)}}function hs(t,e,n){function i(e,n,i){for(var r=-1;r<(h?h.length:0);r++)for(var o=r<0?c.map:h[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==e||a==n){var l=N(r<0?t.line:t.rest[r]),u=o[s]+i;return(i<0||a!=e)&&(u=o[s+(i?1:0)]),W(l,u)}}}var r=t.text.firstChild,s=!1;if(!e||!o(r,e))return ls(W(N(t.line),0),!0);if(e==r&&(s=!0,e=r.childNodes[n],n=0,!e)){var a=t.rest?_(t.rest):t.line;return ls(W(N(a),a.text.length),s)}var l=3==e.nodeType?e:null,u=e;for(l||1!=e.childNodes.length||3!=e.firstChild.nodeType||(l=e.firstChild,n&&(n=l.nodeValue.length));u.parentNode!=r;)u=u.parentNode;var c=t.measure,h=c.maps,p=i(l,u,n);if(p)return ls(p,s);for(var d=u.nextSibling,f=l?l.nodeValue.length-n:0;d;d=d.nextSibling){if(p=i(d,d.firstChild,0))return ls(W(p.line,p.ch-f),s);f+=d.textContent.length}for(var g=u.previousSibling,m=n;g;g=g.previousSibling){if(p=i(g,g.firstChild,-1))return ls(W(p.line,p.ch+m),s);m+=g.textContent.length}}function ps(t,e){function n(){t.value=l.getValue()}if(e=e?c(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=s();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}var r;if(t.form&&(na(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var o=t.form;r=o.submit;try{var a=o.submit=function(){n(),o.submit=r,o.submit(),o.submit=a}}catch(t){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Tt(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=r))}},t.style.display="none";var l=$o(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l}var ds=navigator.userAgent,fs=navigator.platform,_s=/gecko\/\d/i.test(ds),gs=/MSIE \d/.test(ds),ms=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds),vs=/Edge\/(\d+)/.exec(ds),ys=gs||ms||vs,bs=ys&&(gs?document.documentMode||6:+(vs||ms)[1]),ws=!vs&&/WebKit\//.test(ds),ks=ws&&/Qt\/\d+\.\d+/.test(ds),xs=!vs&&/Chrome\//.test(ds),Cs=/Opera\//.test(ds),Ss=/Apple Computer/.test(navigator.vendor),Ts=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ds),Os=/PhantomJS/.test(ds),Ls=!vs&&/AppleWebKit/.test(ds)&&/Mobile\/\w+/.test(ds),Es=/Android/.test(ds),Ms=Ls||Es||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ds),Ns=Ls||/Mac/.test(fs),As=/\bCrOS\b/.test(ds),Rs=/win/i.test(fs),Ds=Cs&&ds.match(/Version\/(\d*\.\d*)/);Ds&&(Ds=Number(Ds[1])),Ds&&Ds>=15&&(Cs=!1,ws=!0);var Ws,Ps=Ns&&(ks||Cs&&(null==Ds||Ds<12.11)),zs=_s||ys&&bs>=9,Is=function(e,n){var i=e.className,r=t(n).exec(i);if(r){var o=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(o?r[1]+o:"")}};Ws=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i};var Bs=function(t){t.select()};Ls?Bs=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:ys&&(Bs=function(t){try{t.select()}catch(t){}});var js=function(){this.id=null};js.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var Fs,Hs,Us=30,Ks={toString:function(){return"CodeMirror.Pass"}},Vs={scroll:!1},Gs={origin:"*mouse"},Xs={origin:"+move"},$s=[""],qs=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ys=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Zs=!1,Qs=!1,Js=null,ta=function(){function t(t){return t<=247?n.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1785?i.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/;return function(n,i){var u="ltr"==i?"L":"R";if(0==n.length||"ltr"==i&&!r.test(n))return!1;for(var c=n.length,h=[],p=0;p<c;++p)h.push(t(n.charCodeAt(p)));for(var d=0,f=u;d<c;++d){var g=h[d];"m"==g?h[d]=f:f=g}for(var m=0,v=u;m<c;++m){var y=h[m];"1"==y&&"r"==v?h[m]="n":s.test(y)&&(v=y,"r"==y&&(h[m]="R"))}for(var b=1,w=h[0];b<c-1;++b){var k=h[b];"+"==k&&"1"==w&&"1"==h[b+1]?h[b]="1":","!=k||w!=h[b+1]||"1"!=w&&"n"!=w||(h[b]=w),w=k}for(var x=0;x<c;++x){var C=h[x];if(","==C)h[x]="N";else if("%"==C){var S=void 0;for(S=x+1;S<c&&"%"==h[S];++S);for(var T=x&&"!"==h[x-1]||S<c&&"1"==h[S]?"1":"N",O=x;O<S;++O)h[O]=T;x=S-1}}for(var L=0,E=u;L<c;++L){var M=h[L];"L"==E&&"1"==M?h[L]="L":s.test(M)&&(E=M)}for(var N=0;N<c;++N)if(o.test(h[N])){var A=void 0;for(A=N+1;A<c&&o.test(h[A]);++A);for(var R="L"==(N?h[N-1]:u),D="L"==(A<c?h[A]:u),W=R==D?R?"L":"R":u,P=N;P<A;++P)h[P]=W;N=A-1}for(var z,I=[],B=0;B<c;)if(a.test(h[B])){var j=B;for(++B;B<c&&a.test(h[B]);++B);I.push(new e(0,j,B))}else{var F=B,H=I.length;for(++B;B<c&&"L"!=h[B];++B);for(var U=F;U<B;)if(l.test(h[U])){F<U&&I.splice(H,0,new e(1,F,U));var K=U;for(++U;U<B&&l.test(h[U]);++U);I.splice(H,0,new e(2,K,U)),F=U}else++U;F<B&&I.splice(H,0,new e(1,F,B))}return"ltr"==i&&(1==I[0].level&&(z=n.match(/^\s+/))&&(I[0].from=z[0].length,I.unshift(new e(0,0,z[0].length))),1==_(I).level&&(z=n.match(/\s+$/))&&(_(I).to-=z[0].length,I.push(new e(0,c-z[0].length,c)))),"rtl"==i?I.reverse():I}}(),ea=[],na=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var i=t._handlers||(t._handlers={});i[e]=(i[e]||ea).concat(n)}},ia=function(){if(ys&&bs<9)return!1;var t=i("div");return"draggable"in t||"dragDrop"in t}(),ra=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},oa=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},sa=function(){var t=i("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),aa=null,la={},ua={},ca={},ha=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};ha.prototype.eol=function(){return this.pos>=this.string.length},ha.prototype.sol=function(){return this.pos==this.lineStart},ha.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ha.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ha.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},ha.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},ha.prototype.eatSpace=function(){for(var t=this,e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++t.pos;return this.pos>e},ha.prototype.skipToEnd=function(){this.pos=this.string.length},ha.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},ha.prototype.backUp=function(t){this.pos-=t},ha.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=h(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},ha.prototype.indentation=function(){return h(this.string,null,this.tabSize)-(this.lineStart?h(this.string,this.lineStart,this.tabSize):0)},ha.prototype.match=function(t,e,n){if("string"!=typeof t){var i=this.string.slice(this.pos).match(t);return i&&i.index>0?null:(i&&!1!==e&&(this.pos+=i[0].length),i)}var r=function(t){return n?t.toLowerCase():t};if(r(this.string.substr(this.pos,t.length))==r(t))return!1!==e&&(this.pos+=t.length),!0},ha.prototype.current=function(){return this.string.slice(this.start,this.pos)},ha.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},ha.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},ha.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var pa=function(t,e){this.state=t,this.lookAhead=e},da=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};da.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},da.prototype.baseToken=function(t){var e=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)e.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},da.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},da.fromSaved=function(t,e,n){return e instanceof pa?new da(t,Gt(t.mode,e.state),n,e.lookAhead):new da(t,Gt(t.mode,e),n)},da.prototype.save=function(t){var e=!1!==t?Gt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new pa(e,this.maxLookAhead):e};var fa=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n},_a=function(t,e,n){this.text=t,it(this,e),this.height=n?n(this):1};_a.prototype.lineNo=function(){return N(this)},Nt(_a);var ga,ma={},va={},ya=null,ba=null,wa={left:0,right:0,top:0,bottom:0},ka=function(t,e,n){this.cm=n;var r=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=o.tabIndex=-1,t(r),t(o),na(r,"scroll",function(){r.clientHeight&&e(r.scrollTop,"vertical")}),na(o,"scroll",function(){o.clientWidth&&e(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ys&&bs<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ka.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0";var r=t.viewHeight-(e?i:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},ka.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ka.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ka.prototype.zeroWidthHack=function(){var t=Ns&&!Ts?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new js,this.disableVert=new js},ka.prototype.enableZeroWidthBar=function(t,e,n){function i(){var r=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,i)}t.style.pointerEvents="auto",e.set(1e3,i)},ka.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var xa=function(){};xa.prototype.update=function(){return{bottom:0,right:0}},xa.prototype.setScrollLeft=function(){},xa.prototype.setScrollTop=function(){},xa.prototype.clear=function(){};var Ca={native:ka,null:xa},Sa=0,Ta=function(t,e,n){var i=t.display;this.viewport=e,this.visible=jn(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Fe(t),this.force=n,this.dims=kn(t),this.events=[]};Ta.prototype.signal=function(t,e){Mt(t,e)&&this.events.push(arguments)},Ta.prototype.finish=function(){for(var t=this,e=0;e<this.events.length;e++)Ot.apply(null,t.events[e])};var Oa=0,La=null;ys?La=-.53:_s?La=15:xs?La=-.7:Ss&&(La=-1/3);var Ea=function(t,e){this.ranges=t,this.primIndex=e};Ea.prototype.primary=function(){return this.ranges[this.primIndex]},Ea.prototype.equals=function(t){var e=this;if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var i=e.ranges[n],r=t.ranges[n];if(!z(i.anchor,r.anchor)||!z(i.head,r.head))return!1}return!0},Ea.prototype.deepCopy=function(){for(var t=this,e=[],n=0;n<this.ranges.length;n++)e[n]=new Ma(I(t.ranges[n].anchor),I(t.ranges[n].head));return new Ea(e,this.primIndex)},Ea.prototype.somethingSelected=function(){for(var t=this,e=0;e<this.ranges.length;e++)if(!t.ranges[e].empty())return!0;return!1},Ea.prototype.contains=function(t,e){var n=this;e||(e=t);for(var i=0;i<this.ranges.length;i++){var r=n.ranges[i];if(P(e,r.from())>=0&&P(t,r.to())<=0)return i}return-1};var Ma=function(t,e){this.anchor=t,this.head=e};Ma.prototype.from=function(){return j(this.anchor,this.head)},Ma.prototype.to=function(){return B(this.anchor,this.head)},Ma.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Hr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=this,i=t,r=t+e;i<r;++i){var o=n.lines[i];n.height-=o.height,ae(o),we(o,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){var i=this;this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=i},iterN:function(t,e,n){for(var i=this,r=t+e;t<r;++t)if(n(i.lines[t]))return!0}},Ur.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){var n=this;this.size-=e;for(var i=0;i<this.children.length;++i){var r=n.children[i],o=r.chunkSize();if(t<o){var s=Math.min(e,o-t),a=r.height;if(r.removeInner(t,s),n.height-=a-r.height,o==s&&(n.children.splice(i--,1),r.parent=null),0==(e-=s))break;t=0}else t-=o}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Hr))){var l=[];this.collapse(l),this.children=[new Hr(l)],this.children[0].parent=this}},collapse:function(t){for(var e=this,n=0;n<this.children.length;++n)e.children[n].collapse(t)},insertInner:function(t,e,n){var i=this;this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var o=i.children[r],s=o.chunkSize();if(t<=s){if(o.insertInner(t,e,n),o.lines&&o.lines.length>50){for(var a=o.lines.length%25+25,l=a;l<o.lines.length;){var u=new Hr(o.lines.slice(l,l+=25));o.height-=u.height,i.children.splice(++r,0,u),u.parent=i}o.lines=o.lines.slice(0,a),i.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new Ur(e);if(t.parent){t.size-=n.size,t.height-=n.height;var i=p(t.parent.children,t);t.parent.children.splice(i+1,0,n)}else{var r=new Ur(t.children);r.parent=t,t.children=[r,n],t=r}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=this,r=0;r<this.children.length;++r){var o=i.children[r],s=o.chunkSize();if(t<s){var a=Math.min(e,s-t);if(o.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var Na=function(t,e,n){var i=this;if(n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);this.doc=t,this.node=e};Na.prototype.clear=function(){var t=this,e=this.doc.cm,n=this.line.widgets,i=this.line,r=N(i);if(null!=r&&n){for(var o=0;o<n.length;++o)n[o]==t&&n.splice(o--,1);n.length||(i.widgets=null);var s=We(this);M(i,Math.max(0,i.height-s)),e&&(fi(e,function(){Kr(e,i,-s),yi(e,r,"widget")}),we(e,"lineWidgetCleared",e,this,r))}},Na.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=We(this)-e;r&&(mt(this.doc,i)||M(i,i.height+r),n&&fi(n,function(){n.curOp.forceUpdate=!0,Kr(n,i,r),we(n,"lineWidgetChanged",n,t,N(i))}))},Nt(Na);var Aa=0,Ra=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Aa};Ra.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){var e=this.doc.cm,n=e&&!e.curOp;if(n&&si(e),Mt(this,"clear")){var i=this.find();i&&we(this,"clear",i.from,i.to)}for(var r=null,o=null,s=0;s<this.lines.length;++s){var a=t.lines[s],l=$(a.markedSpans,t);e&&!t.collapsed?yi(e,N(a),"text"):e&&(null!=l.to&&(o=N(a)),null!=l.from&&(r=N(a))),a.markedSpans=q(a.markedSpans,l),null==l.from&&t.collapsed&&!mt(t.doc,a)&&e&&M(a,bn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=pt(t.lines[u]),h=bt(c);h>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=h,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&vi(e,r,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Cr(e.doc)),e&&we(e,"markerCleared",e,this,r,o),n&&ai(e),this.parent&&this.parent.clear()}},Ra.prototype.find=function(t,e){var n=this;null==t&&"bookmark"==this.type&&(t=1);for(var i,r,o=0;o<this.lines.length;++o){var s=n.lines[o],a=$(s.markedSpans,n);if(null!=a.from&&(i=W(e?s:N(s),a.from),-1==t))return i;if(null!=a.to&&(r=W(e?s:N(s),a.to),1==t))return r}return i&&{from:i,to:r}},Ra.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&fi(i,function(){var r=e.line,o=N(e.line),s=Xe(i,o);if(s&&(tn(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!mt(n.doc,r)&&null!=n.height){var a=n.height;n.height=null;var l=We(n)-a;l&&M(r,r.height+l)}we(i,"markerChanged",i,t)})},Ra.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=p(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Ra.prototype.detachLine=function(t){if(this.lines.splice(p(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},Nt(Ra);var Da=function(t,e){var n=this;this.markers=t,this.primary=e;for(var i=0;i<t.length;++i)t[i].parent=n};Da.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)t.markers[e].clear();we(this,"clear")}},Da.prototype.find=function(t,e){return this.primary.find(t,e)},Nt(Da);var Wa=0,Pa=function(t,e,n,i,r){if(!(this instanceof Pa))return new Pa(t,e,n,i,r);null==n&&(n=0),Ur.call(this,[new Hr([new _a("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=W(n,0);this.sel=Fi(o),this.history=new er(null),this.id=++Wa,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Yi(this,{from:o,to:o,text:t}),wr(this,Fi(o),Vs)};Pa.prototype=y(Ur.prototype,{constructor:Pa,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=E(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:mi(function(t){var e=W(this.first,0),n=this.first+this.size-1;Nr(this,{from:e,to:W(n,O(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&qn(this.cm,0,0),wr(this,Fi(e),Vs)}),replaceRange:function(t,e,n,i){e=H(this,e),n=n?H(this,n):e,zr(this,t,e,n,i)},getRange:function(t,e,n){var i=L(this,H(this,t),H(this,e));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(R(this,t))return O(this,t)},getLineNumber:function(t){return N(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=O(this,t)),pt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return H(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:mi(function(t,e,n){vr(this,H(this,"number"==typeof t?W(t,e||0):t),null,n)}),setSelection:mi(function(t,e,n){vr(this,H(this,t),H(this,e||t),n)}),extendSelection:mi(function(t,e,n){_r(this,H(this,t),e&&H(this,e),n)}),extendSelections:mi(function(t,e){gr(this,K(this,t),e)}),extendSelectionsBy:mi(function(t,e){gr(this,K(this,g(this.sel.ranges,t)),e)}),setSelections:mi(function(t,e,n){var i=this;if(t.length){for(var r=[],o=0;o<t.length;o++)r[o]=new Ma(H(i,t[o].anchor),H(i,t[o].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),wr(this,ji(this.cm,r,e),n)}}),addSelection:mi(function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new Ma(H(this,t),H(this,e||t))),wr(this,ji(this.cm,i,i.length-1),n)}),getSelection:function(t){for(var e,n=this,i=this.sel.ranges,r=0;r<i.length;r++){var o=L(n,i[r].from(),i[r].to());e=e?e.concat(o):o}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=this,n=[],i=this.sel.ranges,r=0;r<i.length;r++){var o=L(e,i[r].from(),i[r].to());!1!==t&&(o=o.join(t||e.lineSeparator())),n[r]=o}return n},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:mi(function(t,e,n){for(var i=this,r=[],o=this.sel,s=0;s<o.ranges.length;s++){var a=o.ranges[s];r[s]={from:a.from(),to:a.to(),text:i.splitLines(t[s]),origin:n}}for(var l=e&&"end"!=e&&Gi(this,r,e),u=r.length-1;u>=0;u--)Nr(i,r[u]);l?br(this,l):this.cm&&$n(this.cm)}),undo:mi(function(){Rr(this,"undo")}),redo:mi(function(){Rr(this,"redo")}),undoSelection:mi(function(){Rr(this,"undo",!0)}),redoSelection:mi(function(){Rr(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new er(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:dr(this.history.done),undone:dr(this.history.undone)}},setHistory:function(t){var e=this.history=new er(this.history.maxGeneration);e.done=dr(t.done.slice(0),null,!0),e.undone=dr(t.undone.slice(0),null,!0)},setGutterMarker:mi(function(t,e,n){return Fr(this,t,"gutter",function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&k(i)&&(t.gutterMarkers=null),!0})}),clearGutter:mi(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&Fr(e,n,"gutter",function(){return n.gutterMarkers[t]=null,k(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!R(this,t))return null;if(e=t,!(t=O(this,t)))return null}else if(null==(e=N(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:mi(function(e,n,i){return Fr(this,e,"gutter"==n?"gutter":"class",function(e){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[r]){if(t(i).test(e[r]))return!1;e[r]+=" "+i}else e[r]=i;return!0})}),removeLineClass:mi(function(e,n,i){return Fr(this,e,"gutter"==n?"gutter":"class",function(e){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",o=e[r];if(!o)return!1;if(null==i)e[r]=null;else{var s=o.match(t(i));if(!s)return!1;var a=s.index+s[0].length;e[r]=o.slice(0,s.index)+(s.index&&a!=o.length?" ":"")+o.slice(a)||null}return!0})}),addLineWidget:mi(function(t,e,n){return Vr(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Gr(this,H(this,t),H(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=H(this,t),Gr(this,t,t,n,"bookmark")},findMarksAt:function(t){t=H(this,t);var e=[],n=O(this,t.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=H(this,t),e=H(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&r==t.line&&t.ch>=l.to||null==l.from&&r!=t.line||null!=l.from&&r==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&t.push(n[i].marker)}),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter(function(r){var o=r.text.length+i;if(o>t)return e=t,!0;t-=o,++n}),H(this,W(n,e))},indexFromPos:function(t){t=H(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new Pa(E(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var i=new Pa(E(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:t.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],qr(i,$r(this)),i},unlinkDoc:function(t){var e=this;if(t instanceof $o&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=e.linked[n];if(i.doc==t){e.linked.splice(n,1),t.unlinkDoc(e),Yr($r(e));break}}if(t.history==this.history){var r=[t.id];Zi(t,function(t){return r.push(t.id)},!0),t.history=new er(null),t.history.done=dr(this.history.done,r),t.history.undone=dr(this.history.undone,r)}},iterLinkedDocs:function(t){Zi(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):ra(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:mi(function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(t){return t.order=null}),this.cm&&tr(this.cm))})}),Pa.prototype.eachLine=Pa.prototype.iter;for(var za=0,Ia=!1,Ba={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ja=0;ja<10;ja++)Ba[ja+48]=Ba[ja+96]=String(ja);for(var Fa=65;Fa<=90;Fa++)Ba[Fa]=String.fromCharCode(Fa);for(var Ha=1;Ha<=12;Ha++)Ba[Ha+111]=Ba[Ha+63235]="F"+Ha;var Ua={};Ua.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ua.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ua.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ua.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ua.default=Ns?Ua.macDefault:Ua.pcDefault;var Ka={selectAll:Er,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Vs)},killLine:function(t){return po(t,function(e){if(e.empty()){var n=O(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:W(e.head.line+1,0)}:{from:e.head,to:W(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return po(t,function(e){return{from:W(e.from().line,0),to:H(t.doc,W(e.to().line+1,0))}})},delLineLeft:function(t){return po(t,function(t){return{from:W(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return po(t,function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}})},delWrappedLineRight:function(t){return po(t,function(e){var n=t.charCoords(e.head,"div").top+5,i=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:i}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(W(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(W(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return vo(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return bo(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return yo(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},Xs)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},Xs)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.cursorCoords(e.head,"div").top+5,i=t.coordsChar({left:0,top:n},"div");return i.ch<t.getLine(i.line).search(/\S/)?bo(t,e.head):i},Xs)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=h(t.getLine(o.line),o.ch,i);e.push(f(i-s%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return fi(t,function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,o=O(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new W(r.line,r.ch-1)),r.ch>0)r=new W(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),W(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=O(t.doc,r.line-1).text;s&&(r=new W(r.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),W(r.line-1,s.length-1),r,"+transpose"))}n.push(new Ma(r,r))}t.setSelections(n)})},newlineAndIndent:function(t){return fi(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var i=0;i<e.length;i++)t.indentLine(e[i].from().line,null,!0);$n(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}},Va=new js,Ga=null,Xa=function(t,e,n){this.time=t,this.pos=e,this.button=n};Xa.prototype.compare=function(t,e,n){return this.time+400>t&&0==P(e,this.pos)&&n==this.button};var $a,qa,Ya={toString:function(){return"CodeMirror.Init"}},Za={},Qa={};$o.defaults=Za,$o.optionHandlers=Qa;var Ja=[];$o.defineInitHook=function(t){return Ja.push(t)};var tl=null,el=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new js,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};el.prototype.init=function(t){function e(t){if(!Lt(r,t)){if(r.somethingSelected())Zo({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=es(r);Zo({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation(function(){r.setSelections(e.ranges,0,Vs),r.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var n=tl.text.join("\n");if(t.clipboardData.setData("Text",n),t.clipboardData.getData("Text")==n)return void t.preventDefault()}var s=is(),a=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),a.value=tl.text.join("\n");var l=document.activeElement;Bs(a),setTimeout(function(){r.display.lineSpace.removeChild(s),l.focus(),l==o&&i.showPrimarySelection()},50)}}var n=this,i=this,r=i.cm,o=i.div=t.lineDiv;ns(o,r.options.spellcheck),na(o,"paste",function(t){Lt(r,t)||Jo(t,r)||bs<=11&&setTimeout(_i(r,function(){return n.updateFromDOM()}),20)}),na(o,"compositionstart",function(t){n.composing={data:t.data,done:!1}}),na(o,"compositionupdate",function(t){n.composing||(n.composing={data:t.data,done:!1})}),na(o,"compositionend",function(t){n.composing&&(t.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),na(o,"touchstart",function(){return i.forceCompositionEnd()}),na(o,"input",function(){n.composing||n.readFromDOMSoon()}),na(o,"copy",e),na(o,"cut",e)},el.prototype.prepareSelection=function(){var t=En(this.cm,!1);return t.focus=this.cm.state.focused,t},el.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},el.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},el.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,n=e.doc.sel.primary(),i=n.from(),r=n.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||r.line<e.display.viewFrom)return void t.removeAllRanges();var o=cs(e,t.anchorNode,t.anchorOffset),s=cs(e,t.focusNode,t.focusOffset);if(!o||o.bad||!s||s.bad||0!=P(j(o,s),i)||0!=P(B(o,s),r)){var a=e.display.view,l=i.line>=e.display.viewFrom&&ss(e,i)||{node:a[0].measure.map[2],offset:0},u=r.line<e.display.viewTo&&ss(e,r);if(!u){var c=a[a.length-1].measure,h=c.maps?c.maps[c.maps.length-1]:c.map;u={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(!l||!u)return void t.removeAllRanges();var p,d=t.rangeCount&&t.getRangeAt(0);try{p=Ws(l.node,l.offset,u.offset,u.node)}catch(t){}p&&(!_s&&e.state.focused?(t.collapse(l.node,l.offset),p.collapsed||(t.removeAllRanges(),t.addRange(p))):(t.removeAllRanges(),t.addRange(p)),d&&null==t.anchorNode?t.addRange(d):_s&&this.startGracePeriod()),this.rememberSelection()}},el.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},el.prototype.showMultipleSelections=function(t){n(this.cm.display.cursorDiv,t.cursors),n(this.cm.display.selectionDiv,t.selection)},el.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},el.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return o(this.div,e)},el.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},el.prototype.blur=function(){this.div.blur()},el.prototype.getField=function(){return this.div},el.prototype.supportsTouch=function(){return!0},el.prototype.receivedFocus=function(){function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}var e=this;this.selectionInEditor()?this.pollSelection():fi(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,t)},el.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},el.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(Es&&xs&&this.cm.options.gutters.length&&as(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=cs(e,t.anchorNode,t.anchorOffset),i=cs(e,t.focusNode,t.focusOffset);n&&i&&fi(e,function(){wr(e.doc,Fi(n,i),Vs),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)})}}},el.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,e=t.display,n=t.doc.sel.primary(),i=n.from(),r=n.to();if(0==i.ch&&i.line>t.firstLine()&&(i=W(i.line-1,O(t.doc,i.line-1).length)),r.ch==O(t.doc,r.line).text.length&&r.line<t.lastLine()&&(r=W(r.line+1,0)),i.line<e.viewFrom||r.line>e.viewTo-1)return!1;var o,s,a;i.line==e.viewFrom||0==(o=On(t,i.line))?(s=N(e.view[0].line),a=e.view[0].node):(s=N(e.view[o].line),a=e.view[o-1].node.nextSibling);var l,u,c=On(t,r.line);if(c==e.view.length-1?(l=e.viewTo-1,u=e.lineDiv.lastChild):(l=N(e.view[c+1].line)-1,u=e.view[c+1].node.previousSibling),!a)return!1;for(var h=t.doc.splitLines(us(t,a,u,s,l)),p=L(t.doc,W(s,0),W(l,O(t.doc,l).text.length));h.length>1&&p.length>1;)if(_(h)==_(p))h.pop(),p.pop(),l--;else{if(h[0]!=p[0])break;h.shift(),p.shift(),s++}for(var d=0,f=0,g=h[0],m=p[0],v=Math.min(g.length,m.length);d<v&&g.charCodeAt(d)==m.charCodeAt(d);)++d;for(var y=_(h),b=_(p),w=Math.min(y.length-(1==h.length?d:0),b.length-(1==p.length?d:0));f<w&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==h.length&&1==p.length&&s==i.line)for(;d&&d>i.ch&&y.charCodeAt(y.length-f-1)==b.charCodeAt(b.length-f-1);)d--,f++;h[h.length-1]=y.slice(0,y.length-f).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var k=W(s,d),x=W(l,p.length?_(p).length-f:0);return h.length>1||h[0]||P(k,x)?(zr(t.doc,h,k,x,"+input"),!0):void 0},el.prototype.ensurePolled=function(){this.forceCompositionEnd()},el.prototype.reset=function(){this.forceCompositionEnd()},el.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},el.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()},80))},el.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||fi(this.cm,function(){return vi(t.cm)})},el.prototype.setUneditable=function(t){t.contentEditable="false"},el.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||_i(this.cm,Qo)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},el.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},el.prototype.onContextMenu=function(){},el.prototype.resetPosition=function(){},el.prototype.needsContentAttribute=!0;var nl=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new js,this.hasSelection=!1,this.composing=null};nl.prototype.init=function(t){function e(t){if(!Lt(r,t)){if(r.somethingSelected())Zo({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=es(r);Zo({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,Vs):(i.prevInput="",o.value=e.text.join("\n"),Bs(o))}"cut"==t.type&&(r.state.cutIncoming=!0)}}var n=this,i=this,r=this.cm;this.createField(t);var o=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),Ls&&(o.style.width="0px"),na(o,"input",function(){ys&&bs>=9&&n.hasSelection&&(n.hasSelection=null),i.poll()}),na(o,"paste",function(t){Lt(r,t)||Jo(t,r)||(r.state.pasteIncoming=!0,i.fastPoll())}),na(o,"cut",e),na(o,"copy",e),na(t.scroller,"paste",function(e){Pe(t,e)||Lt(r,e)||(r.state.pasteIncoming=!0,i.focus())}),na(t.lineSpace,"selectstart",function(e){Pe(t,e)||At(e)}),na(o,"compositionstart",function(){var t=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}}),na(o,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},nl.prototype.createField=function(t){this.wrapper=is(),this.textarea=this.wrapper.firstChild},nl.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=En(t);if(t.options.moveInputWithCursor){var r=cn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),s=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},nl.prototype.showSelection=function(t){var e=this.cm,i=e.display;n(i.cursorDiv,t.cursors),n(i.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},nl.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&Bs(this.textarea),ys&&bs>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",ys&&bs>=9&&(this.hasSelection=null))}},nl.prototype.getField=function(){return this.textarea},nl.prototype.supportsTouch=function(){return!1},nl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Ms||s()!=this.textarea))try{this.textarea.focus()}catch(t){}},nl.prototype.blur=function(){this.textarea.blur()},nl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},nl.prototype.receivedFocus=function(){this.slowPoll()},nl.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},nl.prototype.fastPoll=function(){function t(){n.poll()||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))}var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,t)},nl.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||oa(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(ys&&bs>=9&&this.hasSelection===r||Ns&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var s=0,a=Math.min(i.length,r.length);s<a&&i.charCodeAt(s)==r.charCodeAt(s);)++s;return fi(e,function(){Qo(e,r.slice(s),i.length-s,null,t.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},nl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},nl.prototype.onKeyPress=function(){ys&&bs>=9&&(this.hasSelection=null),this.fastPoll()},nl.prototype.onContextMenu=function(t){function e(){if(null!=s.selectionStart){var t=r.somethingSelected(),e="\u200b"+(t?s.value:"");s.value="\u21da",s.value=e,i.prevInput=t?"":"\u200b",s.selectionStart=1,s.selectionEnd=e.length,o.selForContextMenu=r.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.cssText=c,s.style.cssText=u,ys&&bs<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=s.selectionStart){(!ys||ys&&bs<9)&&e();var t=0,n=function(){o.selForContextMenu==r.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&"\u200b"==i.prevInput?_i(r,Er)(r):t++<10?o.detectingSelectAll=setTimeout(n,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(n,200)}}var i=this,r=i.cm,o=r.display,s=i.textarea,a=Tn(r,t),l=o.scroller.scrollTop;if(a&&!Cs){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(a)&&_i(r,wr)(r.doc,Fi(a),Vs);var u=s.style.cssText,c=i.wrapper.style.cssText;i.wrapper.style.cssText="position: absolute";var h=i.wrapper.getBoundingClientRect();s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-h.top-5)+"px; left: "+(t.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(ys?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var p;if(ws&&(p=window.scrollY),o.input.focus(),ws&&window.scrollTo(null,p),o.input.reset(),r.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=!0,o.selForContextMenu=r.doc.sel,clearTimeout(o.detectingSelectAll),ys&&bs>=9&&e(),zs){Wt(t);var d=function(){Tt(window,"mouseup",d),setTimeout(n,20)};na(window,"mouseup",d)}else setTimeout(n,50)}},nl.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},nl.prototype.setUneditable=function(){},nl.prototype.needsContentAttribute=!1,function(t){function e(e,i,r,o){t.defaults[e]=i,r&&(n[e]=o?function(t,e,n){n!=Ya&&r(t,e,n)}:r)}var n=t.optionHandlers;t.defineOption=e,t.Init=Ya,e("value","",function(t,e){return t.setValue(e)},!0),e("mode",null,function(t,e){t.doc.modeOption=e,Xi(t)},!0),e("indentUnit",2,Xi,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){$i(t),nn(t),vi(t)},!0),e("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],i=t.doc.first;t.doc.iter(function(t){for(var r=0;;){var o=t.text.indexOf(e,r);if(-1==o)break;r=o+e.length,n.push(W(i,o))}i++});for(var r=n.length-1;r>=0;r--)zr(t.doc,e,n[r],W(n[r].line,n[r].ch+e.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Ya&&t.refresh()}),e("specialCharPlaceholder",ce,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",Ms?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),e("rtlMoveVisually",!Rs),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){Ko(t),Vo(t)},!0),e("keyMap","default",function(t,e,n){var i=ho(e),r=n!=Ya&&ho(n);r&&r.detach&&r.detach(t,i),i.attach&&i.attach(t,r||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,Xo,!0),e("gutters",[],function(t){Pi(t.options),Vo(t)},!0),e("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?xn(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return ii(t)},!0),e("scrollbarStyle","native",function(t){oi(t),ii(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t){Pi(t.options),Vo(t)},!0),e("firstLineNumber",1,Vo,!0),e("lineNumberFormatter",function(t){return t},Vo,!0),e("showCursorWhenSelecting",!1,Ln,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,function(t,e){"nocursor"==e&&(zn(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)}),e("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),e("dragDrop",!0,Go),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,Ln,!0),e("singleCursorHeightPerLine",!0,Ln,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,$i,!0),e("addModeClass",!1,$i,!0),e("pollInterval",100),e("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,$i,!0),e("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),e("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),e("autofocus",null),e("direction","ltr",function(t,e){return t.doc.setDirection(e)},!0),e("phrases",null)}($o),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,r=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&_i(this,e[t])(this,n,r),Ot(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](ho(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:gi(function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");m(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,vi(this)}),removeOverlay:gi(function(t){for(var e=this,n=this.state.overlays,i=0;i<n.length;++i){var r=n[i].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return n.splice(i,1),e.state.modeGen++,void vi(e)}}),indentLine:gi(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),R(this.doc,t)&&Yo(this,t,e,n)}),indentSelection:gi(function(t){for(var e=this,n=this.doc.sel.ranges,i=-1,r=0;r<n.length;r++){var o=n[r];if(o.empty())o.head.line>i&&(Yo(e,o.head.line,t,!0),i=o.head.line,r==e.doc.sel.primIndex&&$n(e));else{var s=o.from(),a=o.to(),l=Math.max(i,s.line);i=Math.min(e.lastLine(),a.line-(a.ch?0:1))+1;for(var u=l;u<i;++u)Yo(e,u,t);var c=e.doc.sel.ranges;0==s.ch&&n.length==c.length&&c[r].from().ch>0&&mr(e.doc,r,new Ma(s,c[r].to()),Vs)}}}),getTokenAt:function(t,e){return ee(this,t,e)},getLineTokens:function(t,e){return ee(this,W(t),e,!0)},getTokenTypeAt:function(t){t=H(this.doc,t);var e,n=Yt(this,O(this.doc,t.line)),i=0,r=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){e=n[2*s+2];break}i=s+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=this,r=[];if(!n.hasOwnProperty(e))return r;var o=n[e],s=this.getModeAt(t);if("string"==typeof s[e])o[s[e]]&&r.push(o[s[e]]);else if(s[e])for(var a=0;a<s[e].length;a++){var l=o[s[e][a]];l&&r.push(l)}else s.helperType&&o[s.helperType]?r.push(o[s.helperType]):o[s.name]&&r.push(o[s.name]);for(var u=0;u<o._global.length;u++){var c=o._global[u];c.pred(s,i)&&-1==p(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(t,e){var n=this.doc;return t=F(n,null==t?n.first+n.size-1:t),Zt(this,t+1,e).state},cursorCoords:function(t,e){var n,i=this.doc.sel.primary();return n=null==t?i.head:"object"==typeof t?H(this.doc,t):t?i.from():i.to(),cn(this,n,e||"page")},charCoords:function(t,e){return un(this,H(this.doc,t),e||"page")},coordsChar:function(t,e){return t=ln(this,t,e||"page"),dn(this,t.left,t.top)},lineAtHeight:function(t,e){return t=ln(this,{top:t,left:0},e||"page").top,A(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i,r=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,r=!0),i=O(this.doc,t)}else i=t;return an(this,i,{top:0,left:0},e||"page",n||r).top+(r?this.doc.height-yt(i):0)},defaultTextHeight:function(){return bn(this.display)},defaultCharWidth:function(){return wn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o=this.display;t=cn(this,H(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(s=t.bottom),a+e.offsetWidth>u&&(a=u-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),n&&Vn(this,{left:a,top:s,right:a+e.offsetWidth,bottom:s+e.offsetHeight})},triggerOnKeyDown:gi(Oo),triggerOnKeyPress:gi(Mo),triggerOnKeyUp:Eo,triggerOnMouseDown:gi(Ao),execCommand:function(t){if(Ka.hasOwnProperty(t))return Ka[t].call(null,this)},triggerElectric:gi(function(t){ts(this,t)}),findPosH:function(t,e,n,i){var r=this,o=1;e<0&&(o=-1,e=-e);for(var s=H(this.doc,t),a=0;a<e&&(s=rs(r.doc,s,o,n,i),!s.hitSide);++a);return s},moveH:gi(function(t,e){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?rs(n.doc,i.head,t,e,n.options.rtlMoveVisually):t<0?i.from():i.to()},Xs)}),deleteH:gi(function(t,e){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):po(this,function(n){var r=rs(i,n.head,t,e,!1);return t<0?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(t,e,n,i){var r=this,o=1,s=i;e<0&&(o=-1,e=-e);for(var a=H(this.doc,t),l=0;l<e;++l){var u=cn(r,a,"div");if(null==s?s=u.left:u.left=s,a=os(r,u,o,n),a.hitSide)break}return a},moveV:gi(function(t,e){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(o)return t<0?s.from():s.to();var a=cn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=os(n,a,t,e);return"page"==e&&s==i.sel.primary()&&Xn(n,un(n,l,"div").top-a.top),l},Xs),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(t){var e=this.doc,n=O(e,t.line).text,i=t.ch,r=t.ch;if(n){var o=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=n.length||!i?++r:--i;for(var s=n.charAt(i),a=w(s,o)?function(t){return w(t,o)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!w(t)};i>0&&a(n.charAt(i-1));)--i;for(;r<n.length&&a(n.charAt(r));)++r}return new Ma(W(t.line,i),W(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?a(this.display.cursorDiv,"CodeMirror-overwrite"):Is(this.display.cursorDiv,"CodeMirror-overwrite"),Ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==s()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:gi(function(t,e){qn(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-je(this)-this.display.barHeight,width:t.scrollWidth-je(this)-this.display.barWidth,clientHeight:He(this),clientWidth:Fe(this)}},scrollIntoView:gi(function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:W(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?Yn(this,t):Qn(this,t.from,t.to,t.margin)}),setSize:gi(function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&en(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){yi(n,r,"widget");break}++r}),this.curOp.forceUpdate=!0,Ot(this,"refresh",this)}),operation:function(t){return fi(this,t)},startOperation:function(){return si(this)},endOperation:function(){return ai(this)},refresh:gi(function(){var t=this.display.cachedTextHeight;vi(this),this.curOp.forceUpdate=!0,nn(this),qn(this,this.doc.scrollLeft,this.doc.scrollTop),Ri(this),(null==t||Math.abs(t-bn(this.display))>.5)&&Sn(this),Ot(this,"refresh",this)}),swapDoc:gi(function(t){var e=this.doc;return e.cm=null,Qi(this,t),nn(this),this.display.input.reset(),qn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,we(this,"swapDoc",this,e),e}),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Nt(t),t.registerHelper=function(e,i,r){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=r},t.registerGlobalHelper=function(e,i,r,o){t.registerHelper(e,i,o),n[e]._global.push({pred:r,val:o})}}($o);var il="iter insert remove copy getEditor constructor".split(" ");for(var rl in Pa.prototype)Pa.prototype.hasOwnProperty(rl)&&p(il,rl)<0&&($o.prototype[rl]=function(t){return function(){return t.apply(this.doc,arguments)}}(Pa.prototype[rl]));return Nt(Pa),$o.inputStyles={textarea:nl,contenteditable:el},$o.defineMode=function(t){$o.defaults.mode||"null"==t||($o.defaults.mode=t),Ft.apply(this,arguments)},$o.defineMIME=Ht,$o.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),$o.defineMIME("text/plain","null"),$o.defineExtension=function(t,e){$o.prototype[t]=e},$o.defineDocExtension=function(t,e){Pa.prototype[t]=e},$o.fromTextArea=ps,function(t){t.off=Tt,t.on=na,t.wheelEventPixels=Ii,t.Doc=Pa,t.splitLines=ra,t.countColumn=h,t.findColumn=d,t.isWordChar=b,t.Pass=Ks,t.signal=Ot,t.Line=_a,t.changeEnd=Hi,t.scrollbarModel=Ca,t.Pos=W,t.cmpPos=P,t.modes=la,t.mimeModes=ua,t.resolveMode=Ut,t.getMode=Kt,t.modeExtensions=ca,t.extendMode=Vt,t.copyState=Gt,t.startState=$t,t.innerMode=Xt,t.commands=Ka,t.keyMap=Ua,t.keyName=co,t.isModifierKey=lo,t.lookupKey=ao,t.normalizeKeyMap=so,t.StringStream=ha,t.SharedTextMarker=Da,t.TextMarker=Ra,t.LineWidget=Na,t.e_preventDefault=At,t.e_stopPropagation=Rt,t.e_stop=Wt,t.addClass=a,t.contains=o,t.rmClass=Is,t.keyNames=Ba}($o),$o.version="5.41.0",$o})},function(t,e,n){var i,r;!function(){var n=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){return new r(t,e).beautify()}var r=n(1).Beautifier;t.exports=i},function(t,e,n){"use strict";function i(t,e){e.multiline_frame||e.mode===T.ForInitializer||e.mode===T.Conditional||t.remove_indent(e.start_line_index)}function r(t,e){return-1!==e.indexOf(t)}function o(t){return t.replace(/^\s+/g,"")}function s(t,e){return t&&t.type===w.RESERVED&&t.text===e}function a(t,e){return t&&t.type===w.RESERVED&&r(t.text,e)}function l(t){t=t.replace(g.allLineBreaks,"\n");for(var e=[],n=t.indexOf("\n");-1!==n;)e.push(t.substring(0,n)),t=t.substring(n+1),n=t.indexOf("\n");return t.length&&e.push(t),e}function u(t){return t===T.ArrayLiteral}function c(t){return r(t,[T.Expression,T.ForInitializer,T.Conditional])}function h(t,e){for(var n=0;n<t.length;n++){if(t[n].trim().charAt(0)!==e)return!1}return!0}function p(t,e){for(var n,i=0,r=t.length;i<r;i++)if((n=t[i])&&0!==n.indexOf(e))return!1;return!0}function d(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new m(e)}var f=n(2).Output,_=n(3).Token,g=n(4),m=n(5).Options,v=n(7).Tokenizer,y=n(7).line_starters,b=n(7).positionable_operators,w=n(7).TOKEN,k=["case","return","do","if","throw","else","await","break","continue","async"],x=["before-newline","after-newline","preserve-newline"],C=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].replace(/-/g,"_")]=t[n];return e}(x),S=[C.before_newline,C.preserve_newline],T={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};d.prototype.create_flags=function(t,e){var n=0;return t&&(n=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>n&&(n=t.line_indent_level)),{mode:e,parent:t,last_token:t?t.last_token:new _(w.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:t?t.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},d.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new f(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(T.BlockStatement);var n=new v(t,this._options);return this._tokens=n.tokenize(),t},d.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._reset(this._source_text),e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&g.lineBreak.test(t||"")&&(e=t.match(g.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(e)},d.prototype.handle_token=function(t,e){t.type===w.START_EXPR?this.handle_start_expr(t):t.type===w.END_EXPR?this.handle_end_expr(t):t.type===w.START_BLOCK?this.handle_start_block(t):t.type===w.END_BLOCK?this.handle_end_block(t):t.type===w.WORD?this.handle_word(t):t.type===w.RESERVED?this.handle_word(t):t.type===w.SEMICOLON?this.handle_semicolon(t):t.type===w.STRING?this.handle_string(t):t.type===w.EQUALS?this.handle_equals(t):t.type===w.OPERATOR?this.handle_operator(t):t.type===w.COMMA?this.handle_comma(t):t.type===w.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===w.COMMENT?this.handle_comment(t,e):t.type===w.DOT?this.handle_dot(t):t.type===w.EOF?this.handle_eof(t):(t.type,w.UNKNOWN,this.handle_unknown(t,e))},d.prototype.handle_whitespace_and_comments=function(t,e){var n=t.newlines,i=this._options.keep_array_indentation&&u(this._flags.mode);if(t.comments_before)for(var r=t.comments_before.next();r;)this.handle_whitespace_and_comments(r,e),this.handle_token(r,e),r=t.comments_before.next();if(i)for(var o=0;o<n;o+=1)this.print_newline(o>0,e);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,e);for(var s=1;s<n;s+=1)this.print_newline(!0,e)}};var O=["async","break","continue","return","throw","yield"];d.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=void 0!==e&&e,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&t.newlines||e;if(r(this._flags.last_token.text,b)||r(t.text,b)){var i=r(this._flags.last_token.text,b)&&r(this._options.operator_position,S)||r(t.text,b);n=n&&i}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(a(this._flags.last_token,O))return;var o=this._output.current_line.get_character_count()+t.text.length+(this._output.space_before_token?1:0);o>=this._options.wrap_line_length&&this.print_newline(!1,!0)}}},d.prototype.print_newline=function(t,e){if(!e&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==w.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var n=this._tokens.peek();this._flags.mode===T.Statement&&(!this._flags.if_block||!s(n,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)},d.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&u(this._flags.mode)&&t.newlines?(this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level)&&(this._flags.line_indent_level=this._flags.indentation_level))},d.prototype.print_token=function(t,e){if(this._output.raw)return void this._output.add_raw_token(t);if(this._options.comma_first&&t.previous&&t.previous.type===w.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var n=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(n),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}e=e||t.text,this.print_token_line_indentation(t),this._output.add_token(e)},d.prototype.indent=function(){this._flags.indentation_level+=1},d.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1)},d.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t)},d.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===T.Statement&&i(this._output,this._previous_flags))},d.prototype.start_of_object_property=function(){return this._flags.parent.mode===T.ObjectLiteral&&this._flags.mode===T.Statement&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||a(this._flags.last_token,["get","set"]))},d.prototype.start_of_statement=function(t){var e=!1;return e=e||a(this._flags.last_token,["var","let","const"])&&t.type===w.WORD,e=e||s(this._flags.last_token,"do"),e=e||!(this._flags.parent.mode===T.ObjectLiteral&&this._flags.mode===T.Statement)&&a(this._flags.last_token,O)&&!t.newlines,e=e||s(this._flags.last_token,"else")&&!(s(t,"if")&&!t.comments_before),e=e||this._flags.last_token.type===w.END_EXPR&&(this._previous_flags.mode===T.ForInitializer||this._previous_flags.mode===T.Conditional),e=e||this._flags.last_token.type===w.WORD&&this._flags.mode===T.BlockStatement&&!this._flags.in_case&&!("--"===t.text||"++"===t.text)&&"function"!==this._last_last_text&&t.type!==w.WORD&&t.type!==w.RESERVED,!!(e=e||this._flags.mode===T.ObjectLiteral&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||a(this._flags.last_token,["get","set"])))&&(this.set_mode(T.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,a(t,["do","for","if","while"])),!0)},d.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=T.Expression;if("["===t.text){if(this._flags.last_token.type===w.WORD||")"===this._flags.last_token.text)return a(this._flags.last_token,y)&&(this._output.space_before_token=!0),this.set_mode(e),this.print_token(t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));e=T.ArrayLiteral,u(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),r(this._flags.last_token.type,[w.START_EXPR,w.END_EXPR,w.WORD,w.OPERATOR])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===w.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,e=T.ForInitializer):r(this._flags.last_token.text,["if","while"])?(this._output.space_before_token=this._options.space_before_conditional,e=T.Conditional):r(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===t.whitespace_before?this._output.space_before_token=!1:(r(this._flags.last_token.text,y)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===w.EQUALS||this._flags.last_token.type===w.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===w.WORD){if(this._output.space_before_token=!1,this._options.space_after_named_function){var n=this._tokens.peek(-4),i=this._tokens.peek(-3);(a(i,["async","function"])||a(n,["async","function"])&&"*"===i.text)&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===w.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(r(this._last_last_text,["function","yield"])||this._flags.mode===T.ObjectLiteral&&r(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===w.START_BLOCK?this.print_newline():this._flags.last_token.type!==w.END_EXPR&&this._flags.last_token.type!==w.START_EXPR&&this._flags.last_token.type!==w.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==w.COMMA||this.allow_wrap_or_preserved_newline(t,t.newlines),this.set_mode(e),this.print_token(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},d.prototype.handle_end_expr=function(t){for(;this._flags.mode===T.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,"]"===t.text&&u(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==w.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),"]"===t.text&&this._options.keep_array_indentation?(this.print_token(t),this.restore_mode()):(this.restore_mode(),this.print_token(t)),i(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===T.Conditional&&(this._previous_flags.mode=T.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},d.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),n=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===w.END_EXPR?(this.set_mode(T.BlockStatement),this._flags.in_case_statement=!0):n&&(r(n.text,[":",","])&&r(e.type,[w.STRING,w.WORD,w.RESERVED])||r(e.text,["get","set","..."])&&r(n.type,[w.WORD,w.RESERVED]))?r(this._last_last_text,["class","interface"])?this.set_mode(T.BlockStatement):this.set_mode(T.ObjectLiteral):this._flags.last_token.type===w.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(T.BlockStatement):r(this._flags.last_token.type,[w.EQUALS,w.START_EXPR,w.COMMA,w.OPERATOR])||a(this._flags.last_token,["return","throw","import","default"])?this.set_mode(T.ObjectLiteral):this.set_mode(T.BlockStatement);var i=!e.comments_before&&"}"===e.text,o=i&&"function"===this._flags.last_word&&this._flags.last_token.type===w.END_EXPR;if(this._options.brace_preserve_inline){var s=0,l=null;this._flags.inline_frame=!0;do{if(s+=1,l=this._tokens.peek(s-1),l.newlines){this._flags.inline_frame=!1;break}}while(l.type!==w.EOF&&(l.type!==w.END_BLOCK||l.opened!==t))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==w.OPERATOR&&(o||this._flags.last_token.type===w.EQUALS||a(this._flags.last_token,k)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!u(this._previous_flags.mode)||this._flags.last_token.type!==w.START_EXPR&&this._flags.last_token.type!==w.COMMA||((this._flags.last_token.type===w.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===w.COMMA||this._flags.last_token.type===w.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==w.OPERATOR&&this._flags.last_token.type!==w.START_EXPR&&(this._flags.last_token.type!==w.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(t),this.indent()},d.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===T.Statement;)this.restore_mode();var e=this._flags.last_token.type===w.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:"expand"===this._options.brace_style?e||this.print_newline():e||(u(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)},d.prototype.handle_word=function(t){if(t.type===w.RESERVED)if(r(t.text,["set","get"])&&this._flags.mode!==T.ObjectLiteral)t.type=w.WORD;else if("import"===t.text&&"("===this._tokens.peek().text)t.type=w.WORD;else if(r(t.text,["as","from"])&&!this._flags.import_block)t.type=w.WORD;else if(this._flags.mode===T.ObjectLiteral){var e=this._tokens.peek();":"===e.text&&(t.type=w.WORD)}if(this.start_of_statement(t)?a(this._flags.last_token,["var","let","const"])&&t.type===w.WORD&&(this._flags.declaration_statement=!0):!t.newlines||c(this._flags.mode)||this._flags.last_token.type===w.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===w.EQUALS||!this._options.preserve_newlines&&a(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(t):(this.handle_whitespace_and_comments(t),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(s(t,"while"))return this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&s(t,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===T.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&a(t,["case","default"]))return this.print_newline(),(this._flags.case_body||this._options.jslint_happy)&&(this.deindent(),this._flags.case_body=!1),this.print_token(t),void(this._flags.in_case=!0);if(this._flags.last_token.type!==w.COMMA&&this._flags.last_token.type!==w.START_EXPR&&this._flags.last_token.type!==w.EQUALS&&this._flags.last_token.type!==w.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t),s(t,"function"))return(r(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!r(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==w.OPERATOR)&&(this._output.just_added_blankline()||t.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===w.RESERVED||this._flags.last_token.type===w.WORD?a(this._flags.last_token,["get","set","new","export"])||a(this._flags.last_token,O)?this._output.space_before_token=!0:s(this._flags.last_token,"default")&&"export"===this._last_last_text?this._output.space_before_token=!0:"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===w.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!c(this._flags.mode)&&!u(this._flags.mode))&&this.print_newline(),this.print_token(t),void(this._flags.last_word=t.text);var n="NONE";if(this._flags.last_token.type===w.END_BLOCK?this._previous_flags.inline_frame?n="SPACE":a(t,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines?n="NEWLINE":(n="SPACE",this._output.space_before_token=!0):n="NEWLINE":this._flags.last_token.type===w.SEMICOLON&&this._flags.mode===T.BlockStatement?n="NEWLINE":this._flags.last_token.type===w.SEMICOLON&&c(this._flags.mode)?n="SPACE":this._flags.last_token.type===w.STRING?n="NEWLINE":this._flags.last_token.type===w.RESERVED||this._flags.last_token.type===w.WORD||"*"===this._flags.last_token.text&&(r(this._last_last_text,["function","yield"])||this._flags.mode===T.ObjectLiteral&&r(this._last_last_text,["{",","]))?n="SPACE":this._flags.last_token.type===w.START_BLOCK?n=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===w.END_EXPR&&(this._output.space_before_token=!0,n="NEWLINE"),a(t,y)&&")"!==this._flags.last_token.text&&(n=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),a(t,["else","catch","finally"]))if((this._flags.last_token.type!==w.END_BLOCK||this._previous_flags.mode!==T.BlockStatement||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var i=this._output.current_line;"}"!==i.last()&&this.print_newline(),this._output.space_before_token=!0}else"NEWLINE"===n?a(this._flags.last_token,k)?this._output.space_before_token=!0:"declare"===this._flags.last_token.text&&a(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==w.END_EXPR?this._flags.last_token.type===w.START_EXPR&&a(t,["var","let","const"])||":"===this._flags.last_token.text||(s(t,"if")&&s(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):a(t,y)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&u(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===n&&(this._output.space_before_token=!0);!t.previous||t.previous.type!==w.WORD&&t.previous.type!==w.RESERVED||(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===w.RESERVED&&("do"===t.text?this._flags.do_block=!0:"if"===t.text?this._flags.if_block=!0:"import"===t.text?this._flags.import_block=!0:this._flags.import_block&&s(t,"from")&&(this._flags.import_block=!1))},d.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();this._flags.mode===T.Statement&&(!this._flags.if_block||!s(e,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)},d.prototype.handle_string=function(t){this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===w.RESERVED||this._flags.last_token.type===w.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===w.COMMA||this._flags.last_token.type===w.START_EXPR||this._flags.last_token.type===w.EQUALS||this._flags.last_token.type===w.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):this.print_newline()),this.print_token(t)},d.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0},d.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(c(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===T.ObjectLiteral||this._flags.mode===T.Statement&&this._flags.parent.mode===T.ObjectLiteral?(this._flags.mode===T.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)},d.prototype.handle_operator=function(t){var e="*"===t.text&&(a(this._flags.last_token,["function","yield"])||r(this._flags.last_token.type,[w.START_BLOCK,w.COMMA,w.END_BLOCK,w.SEMICOLON])),n=r(t.text,["-","+"])&&(r(this._flags.last_token.type,[w.START_BLOCK,w.START_EXPR,w.EQUALS,w.OPERATOR])||r(this._flags.last_token.text,y)||","===this._flags.last_token.text);if(this.start_of_statement(t));else{var i=!e;this.handle_whitespace_and_comments(t,i)}if(a(this._flags.last_token,k))return this._output.space_before_token=!0,void this.print_token(t);if("*"===t.text&&this._flags.last_token.type===w.DOT)return void this.print_token(t);if("::"===t.text)return void this.print_token(t);if(this._flags.last_token.type===w.OPERATOR&&r(this._options.operator_position,S)&&this.allow_wrap_or_preserved_newline(t),":"===t.text&&this._flags.in_case)return this._flags.case_body=!0,this.indent(),this.print_token(t),this.print_newline(),void(this._flags.in_case=!1);var o=!0,s=!0,l=!1;if(":"===t.text?0===this._flags.ternary_depth?o=!1:(this._flags.ternary_depth-=1,l=!0):"?"===t.text&&(this._flags.ternary_depth+=1),!n&&!e&&this._options.preserve_newlines&&r(t.text,b)){var u=":"===t.text,h=u&&l,p=u&&!l;switch(this._options.operator_position){case C.before_newline:return this._output.space_before_token=!p,this.print_token(t),u&&!h||this.allow_wrap_or_preserved_newline(t),void(this._output.space_before_token=!0);case C.after_newline:return this._output.space_before_token=!0,!u||h?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),void(this._output.space_before_token=!0);case C.preserve_newline:return p||this.allow_wrap_or_preserved_newline(t),o=!(this._output.just_added_newline()||p),this._output.space_before_token=o,this.print_token(t),void(this._output.space_before_token=!0)}}if(e){this.allow_wrap_or_preserved_newline(t),o=!1;var d=this._tokens.peek();s=d&&r(d.type,[w.WORD,w.RESERVED])}else"..."===t.text?(this.allow_wrap_or_preserved_newline(t),o=this._flags.last_token.type===w.START_BLOCK,s=!1):(r(t.text,["--","++","!","~"])||n)&&(this._flags.last_token.type!==w.COMMA&&this._flags.last_token.type!==w.START_EXPR||this.allow_wrap_or_preserved_newline(t),o=!1,s=!1,!t.newlines||"--"!==t.text&&"++"!==t.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&c(this._flags.mode)&&(o=!0),this._flags.last_token.type===w.RESERVED?o=!0:this._flags.last_token.type===w.END_EXPR?o=!("]"===this._flags.last_token.text&&("--"===t.text||"++"===t.text)):this._flags.last_token.type===w.OPERATOR&&(o=r(t.text,["--","-","++","+"])&&r(this._flags.last_token.text,["--","-","++","+"]),r(t.text,["+","-"])&&r(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode!==T.BlockStatement||this._flags.inline_frame)&&this._flags.mode!==T.Statement||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||o,this.print_token(t),this._output.space_before_token=s},d.prototype.handle_block_comment=function(t,e){if(this._output.raw)return this._output.add_raw_token(t),void(t.directives&&"end"===t.directives.preserve&&(this._output.raw=this._options.test_output_raw));if(t.directives)return this.print_newline(!1,e),this.print_token(t),"start"===t.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0);if(!g.newline.test(t.text)&&!t.newlines)return this._output.space_before_token=!0,this.print_token(t),void(this._output.space_before_token=!0);var n,i=l(t.text),r=!1,s=!1,a=t.whitespace_before,u=a.length;for(this.print_newline(!1,e),i.length>1&&(r=h(i.slice(1),"*"),s=p(i.slice(1),a)),this.print_token(t,i[0]),n=1;n<i.length;n++)this.print_newline(!1,!0),r?this.print_token(t," "+o(i[n])):s&&i[n].length>u?this.print_token(t,i[n].substring(u)):this._output.add_token(i[n]);this.print_newline(!1,e)},d.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)},d.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),a(this._flags.last_token,k)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)},d.prototype.handle_unknown=function(t,e){this.print_token(t),"\n"===t.text[t.text.length-1]&&this.print_newline(!1,e)},d.prototype.handle_eof=function(t){for(;this._flags.mode===T.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t)},t.exports.Beautifier=d},function(t,e,n){"use strict";function i(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__items=[]}function r(t,e){this.__cache=[t],this.__level_string=e}function o(t,e){var n=t.indent_char;t.indent_size>1&&(n=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(n)),this.__indent_cache=new r(e,n),this.__alignment_cache=new r(""," "),this.baseIndentLength=e.length,this.indent_length=n.length,this.raw=!1,this._end_with_newline=t.end_with_newline,this.__lines=[],this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.__add_outputline()}i.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},i.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},i.prototype.set_indent=function(t,e){this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.baseIndentLength+this.__alignment_count+this.__indent_count*this.__parent.indent_length},i.prototype.get_character_count=function(){return this.__character_count},i.prototype.is_empty=function(){return 0===this.__items.length},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(t){this.__items.push(t),this.__character_count+=t.length},i.prototype.push_raw=function(t){this.push(t);var e=t.lastIndexOf("\n");-1!==e&&(this.__character_count=t.length-e)},i.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},i.prototype.remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_length)},i.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var t="";return this.is_empty()||(this.__indent_count>=0&&(t=this.__parent.get_indent_string(this.__indent_count)),this.__alignment_count>=0&&(t+=this.__parent.get_alignment_string(this.__alignment_count)),t+=this.__items.join("")),t},r.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__cache.push(this.__cache[this.__cache.length-1]+this.__level_string)},r.prototype.get_level_string=function(t){return this.__ensure_cache(t),this.__cache[t]},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=new i(this),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t){return this.__indent_cache.get_level_string(t)},o.prototype.get_alignment_string=function(t){return this.__alignment_cache.get_level_string(t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){var e=this.__lines.join("\n").replace(/[\r\n\t ]+$/,"");return this._end_with_newline&&(e+="\n"),"\n"!==t&&(e=e.replace(/[\n]/g,t)),e},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.push(t.whitespace_before),this.current_line.push_raw(t.text),this.space_before_token=!1},o.prototype.add_token=function(t){this.add_space_before_token(),this.current_line.push(t)},o.prototype.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t].remove_indent(),t++},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim(this.indent_string,this.baseIndentString);t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;n>=0;){var r=this.__lines[n];if(r.is_empty())break;if(0!==r.item(0).indexOf(t)&&r.item(-1)!==e){this.__lines.splice(n+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=o},function(t,e,n){"use strict";function i(t,e,n,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}t.exports.Token=i},function(t,e,n){"use strict";e.identifier=new RegExp("[$@A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$0-9A-Z_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*","g");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp("\r\n|"+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,"g")},function(t,e,n){"use strict";function i(t){r.call(this,t,"js");var e=this.raw_options.brace_style||null;"expand-strict"===e?this.raw_options.brace_style="expand":"collapse-preserve-inline"===e?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<n.length;i++)"preserve-inline"===n[i]?this.brace_preserve_inline=!0:this.brace_style=n[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",o),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}var r=n(6).Options,o=["before-newline","after-newline","preserve-newline"];i.prototype=new r,t.exports.Options=i},function(t,e,n){"use strict";function i(t,e){this.raw_options=r(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs"),this.indent_with_tabs&&(this.indent_char="\t",this.indent_size=1),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char"))}function r(t,e){var n={};t=o(t);var i;for(i in t)i!==e&&(n[i]=t[i]);if(e&&t[e])for(i in t[e])n[i]=t[e][i];return n}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}i.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"===typeof n?null!==n&&"function"===typeof n.concat&&(i=n.concat()):"string"===typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},i.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},i.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"===typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},i.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},i.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},i.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},i.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(t){return-1===e.indexOf(t)})},t.exports.Options=i,t.exports.normalizeOpts=o,t.exports.mergeOpts=r},function(t,e,n){"use strict";function i(t,e){return-1!==e.indexOf(t)}function r(t){for(var e="",n=0,i=new o(t),r=null;i.hasNext();)if(r=i.match(/([\s]|[^\\]|\\\\)+/g),r&&(e+=r[0]),"\\"===i.peek()){if(i.next(),"x"===i.peek())r=i.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==i.peek()){e+="\\",i.hasNext()&&(e+=i.next());continue}r=i.match(/u([0-9A-Fa-f]{4})/g)}if(!r)return t;if((n=parseInt(r[1],16))>126&&n<=255&&0===r[0].indexOf("x"))return t;if(n>=0&&n<32){e+="\\"+r[0];continue}e+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return e}var o=n(8).InputScanner,s=n(9).Tokenizer,a=n(9).TOKEN,l=n(11).Directives,u=n(4),c={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:a.START,RAW:a.RAW,EOF:a.EOF},h=new l(/\/\*/,/\*\//),p=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/g,d=/[0-9]/,f=/[^\d\.]/,_=">>> === !== << && >= ** != == <= >> || < / - + > : & % ? ^ | *".split(" "),g=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ++ %= &= *= |= = ! ? > < : / ^ - + * & % ~ |";g=g.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),g=g.replace(/ /g,"|");var m,v=new RegExp(g,"g"),y=/#![^\n\r\u2028\u2029]*(?:\r\n|[\n\r\u2028\u2029])?/g,b=/#include[^\n\r\u2028\u2029]*(?:\r\n|[\n\r\u2028\u2029])?/g,w="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),k=w.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),x=new RegExp("^(?:"+k.join("|")+")$"),C=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,S=/\/\/(?:[^\n\r\u2028\u2029]*)/g,T=/(?:(?:<\?php|<\?=)[\s\S]*?\?>)|(?:<%[\s\S]*?%>)/g,O=function(t,e){s.call(this,t,e),this._whitespace_pattern=/[\n\r\u2028\u2029\t\u000B\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff ]+/g,this._newline_pattern=/([^\n\r\u2028\u2029]*)(\r\n|[\n\r\u2028\u2029])?/g};O.prototype=new s,O.prototype._is_comment=function(t){return t.type===c.COMMENT||t.type===c.BLOCK_COMMENT||t.type===c.UNKNOWN},O.prototype._is_opening=function(t){return t.type===c.START_BLOCK||t.type===c.START_EXPR},O.prototype._is_closing=function(t,e){return(t.type===c.END_BLOCK||t.type===c.END_EXPR)&&e&&("]"===t.text&&"["===e.text||")"===t.text&&"("===e.text||"}"===t.text&&"{"===e.text)},O.prototype._reset=function(){m=!1},O.prototype._get_next_token=function(t,e){this._readWhitespace();var n=null,i=this._input.peek();return n=n||this._read_singles(i),n=n||this._read_word(t),n=n||this._read_comment(i),n=n||this._read_string(i),n=n||this._read_regexp(i,t),n=n||this._read_xml(i,t),n=n||this._read_non_javascript(i),n=n||this._read_punctuation(),n=n||this._create_token(c.UNKNOWN,this._input.next())},O.prototype._read_word=function(t){var e;return""!==(e=this._input.read(u.identifier))?t.type!==c.DOT&&(t.type!==c.RESERVED||"set"!==t.text&&"get"!==t.text)&&x.test(e)?"in"===e||"of"===e?this._create_token(c.OPERATOR,e):this._create_token(c.RESERVED,e):this._create_token(c.WORD,e):(e=this._input.read(p),""!==e?this._create_token(c.WORD,e):void 0)},O.prototype._read_singles=function(t){var e=null;return null===t?e=this._create_token(c.EOF,""):"("===t||"["===t?e=this._create_token(c.START_EXPR,t):")"===t||"]"===t?e=this._create_token(c.END_EXPR,t):"{"===t?e=this._create_token(c.START_BLOCK,t):"}"===t?e=this._create_token(c.END_BLOCK,t):";"===t?e=this._create_token(c.SEMICOLON,t):"."===t&&f.test(this._input.peek(1))?e=this._create_token(c.DOT,t):","===t&&(e=this._create_token(c.COMMA,t)),e&&this._input.next(),e},O.prototype._read_punctuation=function(){var t=this._input.read(v);if(""!==t)return"="===t?this._create_token(c.EQUALS,t):this._create_token(c.OPERATOR,t)},O.prototype._read_non_javascript=function(t){var e="";if("#"===t){if(this._is_first_token()&&(e=this._input.read(y)))return this._create_token(c.UNKNOWN,e.trim()+"\n");if(e=this._input.read(b))return this._create_token(c.UNKNOWN,e.trim()+"\n");t=this._input.next();var n="#";if(this._input.hasNext()&&this._input.testChar(d)){do{t=this._input.next(),n+=t}while(this._input.hasNext()&&"#"!==t&&"="!==t);return"#"===t||("["===this._input.peek()&&"]"===this._input.peek(1)?(n+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(n+="{}",this._input.next(),this._input.next())),this._create_token(c.WORD,n)}this._input.back()}else if("<"===t){if("?"===this._input.peek(1)||"%"===this._input.peek(1)){if(e=this._input.read(T))return e=e.replace(u.allLineBreaks,"\n"),this._create_token(c.STRING,e)}else if(this._input.match(/<\!--/g)){for(t="\x3c!--";this._input.hasNext()&&!this._input.testChar(u.newline);)t+=this._input.next();return m=!0,this._create_token(c.COMMENT,t)}}else if("-"===t&&m&&this._input.match(/-->/g))return m=!1,this._create_token(c.COMMENT,"--\x3e");return null},O.prototype._read_comment=function(t){var e=null;if("/"===t){var n="";if("*"===this._input.peek(1)){n=this._input.read(C);var i=h.get_directives(n);i&&"start"===i.ignore&&(n+=h.readIgnored(this._input)),n=n.replace(u.allLineBreaks,"\n"),e=this._create_token(c.BLOCK_COMMENT,n),e.directives=i}else"/"===this._input.peek(1)&&(n=this._input.read(S),e=this._create_token(c.COMMENT,n))}return e},O.prototype._read_string=function(t){if("`"===t||"'"===t||'"'===t){var e=this._input.next();return this.has_char_escapes=!1,e+="`"===t?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=r(e)),this._input.peek()===t&&(e+=this._input.next()),this._create_token(c.STRING,e)}return null},O.prototype._allow_regexp_or_xml=function(t){return t.type===c.RESERVED&&i(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===c.END_EXPR&&")"===t.text&&t.opened.previous.type===c.RESERVED&&i(t.opened.previous.text,["if","while","for"])||i(t.type,[c.COMMENT,c.START_EXPR,c.START_BLOCK,c.START,c.END_BLOCK,c.OPERATOR,c.EQUALS,c.EOF,c.SEMICOLON,c.COMMA])},O.prototype._read_regexp=function(t,e){if("/"===t&&this._allow_regexp_or_xml(e)){for(var n=this._input.next(),i=!1,r=!1;this._input.hasNext()&&(i||r||this._input.peek()!==t)&&!this._input.testChar(u.newline);)n+=this._input.peek(),i?i=!1:(i="\\"===this._input.peek(),"["===this._input.peek()?r=!0:"]"===this._input.peek()&&(r=!1)),this._input.next();return this._input.peek()===t&&(n+=this._input.next(),n+=this._input.read(u.identifier)),this._create_token(c.STRING,n)}return null};var L=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g,E=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;O.prototype._read_xml=function(t,e){if(this._options.e4x&&"<"===t&&this._input.test(L)&&this._allow_regexp_or_xml(e)){var n="",i=this._input.match(L);if(i){for(var r=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),o=0===r.indexOf("{"),s=0;i;){var a=!!i[1],l=i[2];if(!(!!i[i.length-1]||"![CDATA["===l.slice(0,8))&&(l===r||o&&l.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(a?--s:++s),n+=i[0],s<=0)break;i=this._input.match(E)}return i||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(u.allLineBreaks,"\n"),this._create_token(c.STRING,n)}}return null},O.prototype._read_string_recursive=function(t,e,n){for(var i,r="",o=!1;this._input.hasNext()&&(i=this._input.peek(),o||i!==t&&(e||!u.newline.test(i)));)(o||e)&&u.newline.test(i)?("\r"===i&&"\n"===this._input.peek(1)&&(this._input.next(),i=this._input.peek()),r+="\n"):r+=i,o?("x"!==i&&"u"!==i||(this.has_char_escapes=!0),o=!1):o="\\"===i,this._input.next(),n&&-1!==r.indexOf(n,r.length-n.length)&&(r+="`"===t?this._read_string_recursive("}",e,"`"):this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(r+=this._input.next()));return r},t.exports.Tokenizer=O,t.exports.TOKEN=c,t.exports.positionable_operators=_.slice(),t.exports.line_starters=w.slice()},function(t,e,n){"use strict";function i(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},i.prototype.test=function(t,e){if(e=e||0,e+=this.__position,t.lastIndex=e,e>=0&&e<this.__input_length){var n=t.exec(this.__input);return n&&n.index===e}return!1},i.prototype.testChar=function(t,e){var n=this.peek(e);return null!==n&&t.test(n)},i.prototype.match=function(t){t.lastIndex=this.__position;var e=t.exec(this.__input);return e&&e.index===this.__position?this.__position+=e[0].length:e=null,e},i.prototype.read=function(t){var e="",n=this.match(t);return n&&(e=n[0]),e},i.prototype.readUntil=function(t,e){var n="",i=this.__position;t.lastIndex=this.__position;var r=t.exec(this.__input);return i=r?e?r.index+r[0].length:r.index:this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},i.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},i.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},i.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=i},function(t,e,n){"use strict";var i=n(8).InputScanner,r=n(3).Token,o=n(10).TokenStream,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},a=function(t,e){this._input=new i(t),this._options=e||{},this.__tokens=null,this.__newline_count=0,this.__whitespace_before_token="",this._whitespace_pattern=/[\n\r\t ]+/g,this._newline_pattern=/([^\n\r]*)(\r\n|[\n\r])?/g};a.prototype.tokenize=function(){this._input.restart(),this.__tokens=new o,this._reset();for(var t,e=new r(s.START,""),n=null,i=[],a=new o;e.type!==s.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)a.add(t),t=this._get_next_token(e,n);a.isEmpty()||(t.comments_before=a,a=new o),t.parent=n,this._is_opening(t)?(i.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=i.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},a.prototype._is_first_token=function(){return this.__tokens.isEmpty()},a.prototype._reset=function(){},a.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},a.prototype._is_comment=function(t){return!1},a.prototype._is_opening=function(t){return!1},a.prototype._is_closing=function(t,e){return!1},a.prototype._create_token=function(t,e){var n=new r(t,e,this.__newline_count,this.__whitespace_before_token);return this.__newline_count=0,this.__whitespace_before_token="",n},a.prototype._readWhitespace=function(){var t=this._input.read(this._whitespace_pattern);if(" "===t)this.__whitespace_before_token=t;else if(""!==t){this._newline_pattern.lastIndex=0;for(var e=this._newline_pattern.exec(t);e[2];)this.__newline_count+=1,e=this._newline_pattern.exec(t);this.__whitespace_before_token=e[1]}},t.exports.Tokenizer=a,t.exports.TOKEN=s},function(t,e,n){"use strict";function i(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return 0===this.__tokens_length},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},i.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=i},function(t,e,n){"use strict";function i(t,e){t="string"===typeof t?t:t.source,e="string"===typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp("(?:[\\s\\S]*?)((?:"+t+/\sbeautify\signore:end\s/.source+e+")|$)","g")}i.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},i.prototype.readIgnored=function(t){return t.read(this.__directives_end_ignore_pattern)},t.exports.Directives=i}]),o=n;i=[],void 0!==(r=function(){return{js_beautify:o}}.apply(e,i))&&(t.exports=r)}()},function(t,e,n){var i,r;!function(){var n=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}([,,function(t,e,n){"use strict";function i(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__items=[]}function r(t,e){this.__cache=[t],this.__level_string=e}function o(t,e){var n=t.indent_char;t.indent_size>1&&(n=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(n)),this.__indent_cache=new r(e,n),this.__alignment_cache=new r(""," "),this.baseIndentLength=e.length,this.indent_length=n.length,this.raw=!1,this._end_with_newline=t.end_with_newline,this.__lines=[],this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.__add_outputline()}i.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},i.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},i.prototype.set_indent=function(t,e){this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.baseIndentLength+this.__alignment_count+this.__indent_count*this.__parent.indent_length},i.prototype.get_character_count=function(){return this.__character_count},i.prototype.is_empty=function(){return 0===this.__items.length},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(t){this.__items.push(t),this.__character_count+=t.length},i.prototype.push_raw=function(t){this.push(t);var e=t.lastIndexOf("\n");-1!==e&&(this.__character_count=t.length-e)},i.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},i.prototype.remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_length)},i.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var t="";return this.is_empty()||(this.__indent_count>=0&&(t=this.__parent.get_indent_string(this.__indent_count)),this.__alignment_count>=0&&(t+=this.__parent.get_alignment_string(this.__alignment_count)),t+=this.__items.join("")),t},r.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__cache.push(this.__cache[this.__cache.length-1]+this.__level_string)},r.prototype.get_level_string=function(t){return this.__ensure_cache(t),this.__cache[t]},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=new i(this),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t){return this.__indent_cache.get_level_string(t)},o.prototype.get_alignment_string=function(t){return this.__alignment_cache.get_level_string(t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){var e=this.__lines.join("\n").replace(/[\r\n\t ]+$/,"");return this._end_with_newline&&(e+="\n"),"\n"!==t&&(e=e.replace(/[\n]/g,t)),e},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.push(t.whitespace_before),this.current_line.push_raw(t.text),this.space_before_token=!1},o.prototype.add_token=function(t){this.add_space_before_token(),this.current_line.push(t)},o.prototype.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t].remove_indent(),t++},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim(this.indent_string,this.baseIndentString);t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;n>=0;){var r=this.__lines[n];if(r.is_empty())break;if(0!==r.item(0).indexOf(t)&&r.item(-1)!==e){this.__lines.splice(n+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=o},,,,function(t,e,n){"use strict";function i(t,e){this.raw_options=r(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs"),this.indent_with_tabs&&(this.indent_char="\t",this.indent_size=1),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char"))}function r(t,e){var n={};t=o(t);var i;for(i in t)i!==e&&(n[i]=t[i]);if(e&&t[e])for(i in t[e])n[i]=t[e][i];return n}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}i.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"===typeof n?null!==n&&"function"===typeof n.concat&&(i=n.concat()):"string"===typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},i.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},i.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"===typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},i.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},i.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},i.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},i.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(t){return-1===e.indexOf(t)})},t.exports.Options=i,t.exports.normalizeOpts=o,t.exports.mergeOpts=r},,function(t,e,n){"use strict";function i(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},i.prototype.test=function(t,e){if(e=e||0,e+=this.__position,t.lastIndex=e,e>=0&&e<this.__input_length){var n=t.exec(this.__input);return n&&n.index===e}return!1},i.prototype.testChar=function(t,e){var n=this.peek(e);return null!==n&&t.test(n)},i.prototype.match=function(t){t.lastIndex=this.__position;var e=t.exec(this.__input);return e&&e.index===this.__position?this.__position+=e[0].length:e=null,e},i.prototype.read=function(t){var e="",n=this.match(t);return n&&(e=n[0]),e},i.prototype.readUntil=function(t,e){var n="",i=this.__position;t.lastIndex=this.__position;var r=t.exec(this.__input);return i=r?e?r.index+r[0].length:r.index:this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},i.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},i.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},i.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=i},,,,function(t,e,n){"use strict";function i(t,e){return new r(t,e).beautify()}var r=n(13).Beautifier;t.exports=i},function(t,e,n){"use strict";function i(t,e){this._source_text=t||"",this._options=new r(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}var r=n(14).Options,o=n(2).Output,s=n(8).InputScanner,a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,u=/\s/,c=/(?:\s|\n)+/g,h=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,p=/\/\/(?:[^\n\r\u2028\u2029]*)/g;i.prototype.eatString=function(t){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,"\\"===this._ch)e+=this._input.next();else if(-1!==t.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return e},i.prototype.eatWhitespace=function(t){for(var e=u.test(this._input.peek()),n=!0;u.test(this._input.peek());)this._ch=this._input.next(),t&&"\n"===this._ch&&(this._options.preserve_newlines||n)&&(n=!1,this._output.add_new_line(!0));return e},i.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,n=this._input.peek(e);n;){if("{"===n)return!0;if("("===n)t+=1;else if(")"===n){if(0===t)return!1;t-=1}else if(";"===n||"}"===n)return!1;e++,n=this._input.peek(e)}return!1},i.prototype.print_string=function(t){this._output.just_added_newline()&&this._output.set_indent(this._indentLevel),this._output.add_token(t)},i.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)},i.prototype.indent=function(){this._indentLevel++},i.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},i.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===e&&(e="\n",t&&a.test(t||"")&&(e=t.match(a)[0])),t=t.replace(l,"\n");var n=t.match(/^[\t ]*/)[0];this._output=new o(this._options,n),this._input=new s(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var i=0,r=!1,d=!1,f=!1,_=!1,g=!1,m=this._ch;;){var v=this._input.read(c),y=""!==v,b=m;if(this._ch=this._input.next(),m=this._ch,!this._ch)break;if("/"===this._ch&&"*"===this._input.peek())this._output.add_new_line(),this._input.back(),this.print_string(this._input.read(h)),this.eatWhitespace(!0),this._output.add_new_line();else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(p)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(y),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var w=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);w.match(/[ :]$/)&&(w=this.eatString(": ").replace(/\s$/,""),this.print_string(w),this._output.space_before_token=!0),w=w.replace(/\s$/,""),"extend"===w?_=!0:"import"===w&&(g=!0),w in this.NESTED_AT_RULE?(this._nestedLevel+=1,w in this.CONDITIONAL_GROUP_RULE&&(f=!0)):r||0!==i||-1===w.indexOf(":")||(d=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(y),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(d&&(d=!1,this.outdent()),this.indent(),this._output.space_before_token=!0,this.print_string(this._ch),f?(f=!1,r=this._indentLevel>this._nestedLevel):r=this._indentLevel>=this._nestedLevel,this._options.newline_between_rules&&r&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===b&&this._output.trim(!0),g=!1,_=!1,d&&(this.outdent(),d=!1),this.print_string(this._ch),r=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!r&&!f||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||_?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),d||(d=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(y),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?(d&&(this.outdent(),d=!1),_=!1,g=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?(this._input.back(),i++):this._ch&&this.print_string(this._ch+this.eatString(")"))):(i++,this.preserveSingleSpace(y),this.print_string(this._ch),this.eatWhitespace()):")"===this._ch?(this.print_string(this._ch),i--):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&!d&&i<1&&!g?this._output.add_new_line():this._output.space_before_token=!0):(">"===this._ch||"+"===this._ch||"~"===this._ch)&&!d&&i<1?this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&u.test(this._ch)&&(this._ch="")):"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(y),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),u.test(this._ch)&&(this._ch="")):"!"===this._ch?(this.print_string(" "),this.print_string(this._ch)):(this.preserveSingleSpace(y),this.print_string(this._ch))}return this._output.get_code(e)},t.exports.Beautifier=i},function(t,e,n){"use strict";function i(t){r.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e}var r=n(6).Options;i.prototype=new r,t.exports.Options=i}]),o=n;i=[],void 0!==(r=function(){return{css_beautify:o}}.apply(e,i))&&(t.exports=r)}()},function(t,e,n){!function(t){t(n(0))}(function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(i,r){function o(t,e){function n(n){return e.tokenize=n,n(t,e)}var i=t.next();if("<"==i)return t.eat("!")?t.eat("[")?t.match("CDATA[")?n(l("atom","]]>")):null:t.match("--")?n(l("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(u(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=l("meta","?>"),"meta"):(T=t.eat("/")?"closeTag":"openTag",e.tokenize=s,"tag bracket");if("&"==i){var r;return r=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),r?"atom":"error"}return t.eatWhile(/[^&<]/),null}function s(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=o,T=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return T="equals",null;if("<"==n){e.tokenize=o,e.state=d,e.tagName=e.tagStart=null;var i=e.tokenize(t,e);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(e.tokenize=a(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=s;break}return"string"};return e.isInAttribute=!0,e}function l(t,e){return function(n,i){for(;!n.eol();){if(n.match(e)){i.tokenize=o;break}n.next()}return t}}function u(t){return function(e,n){for(var i;null!=(i=e.next());){if("<"==i)return n.tokenize=u(t+1),n.tokenize(e,n);if(">"==i){if(1==t){n.tokenize=o;break}return n.tokenize=u(t-1),n.tokenize(e,n)}}return"meta"}}function c(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(x.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function h(t){t.context&&(t.context=t.context.prev)}function p(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!x.contextGrabbers.hasOwnProperty(n)||!x.contextGrabbers[n].hasOwnProperty(e))return;h(t)}}function d(t,e,n){return"openTag"==t?(n.tagStart=e.column(),f):"closeTag"==t?_:d}function f(t,e,n){return"word"==t?(n.tagName=e.current(),O="tag",v):x.allowMissingTagName&&"endTag"==t?(O="tag bracket",v(t,e,n)):(O="error",f)}function _(t,e,n){if("word"==t){var i=e.current();return n.context&&n.context.tagName!=i&&x.implicitlyClosed.hasOwnProperty(n.context.tagName)&&h(n),n.context&&n.context.tagName==i||!1===x.matchClosing?(O="tag",g):(O="tag error",m)}return x.allowMissingTagName&&"endTag"==t?(O="tag bracket",g(t,e,n)):(O="error",m)}function g(t,e,n){return"endTag"!=t?(O="error",g):(h(n),d)}function m(t,e,n){return O="error",g(t,e,n)}function v(t,e,n){if("word"==t)return O="attribute",y;if("endTag"==t||"selfcloseTag"==t){var i=n.tagName,r=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||x.autoSelfClosers.hasOwnProperty(i)?p(n,i):(p(n,i),n.context=new c(n,i,r==n.indented)),d}return O="error",v}function y(t,e,n){return"equals"==t?b:(x.allowMissing||(O="error"),v(t,e,n))}function b(t,e,n){return"string"==t?w:"word"==t&&x.allowUnquoted?(O="string",v):(O="error",v(t,e,n))}function w(t,e,n){return"string"==t?w:v(t,e,n)}var k=i.indentUnit,x={},C=r.htmlMode?e:n;for(var S in C)x[S]=C[S];for(var S in r)x[S]=r[S];var T,O;return o.isInText=!0,{startState:function(t){var e={tokenize:o,state:d,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;T=null;var n=e.tokenize(t,e);return(n||T)&&"comment"!=n&&(O=null,e.state=e.state(T||n,t,e),O&&(n="error"==O?n+" error":O)),n},indent:function(e,n,i){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+k;if(r&&r.noIndent)return t.Pass;if(e.tokenize!=s&&e.tokenize!=o)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==x.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+k*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var a=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(a&&a[1])for(;r;){if(r.tagName==a[2]){r=r.prev;break}if(!x.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(a)for(;r;){var l=x.contextGrabbers[r.tagName];if(!l||!l.hasOwnProperty(a[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+k:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(t){t.state==b&&(t.state=v)}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})},function(t,e,n){!function(t){t(n(0))}(function(t){"use strict";t.defineMode("javascript",function(e,n){function i(t){for(var e,n=!1,i=!1;null!=(e=t.next());){if(!n){if("/"==e&&!i)return;"["==e?i=!0:i&&"]"==e&&(i=!1)}n=!n&&"\\"==e}}function r(t,e,n){return Bt=t,jt=n,e}function o(t,e){var n=t.next();if('"'==n||"'"==n)return e.tokenize=s(n),e.tokenize(t,e);if("."==n&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return r("number","number");if("."==n&&t.match(".."))return r("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return r(n);if("="==n&&t.eat(">"))return r("=>","operator");if("0"==n&&t.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return r("number","number");if(/\d/.test(n))return t.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),r("number","number");if("/"==n)return t.eat("*")?(e.tokenize=a,a(t,e)):t.eat("/")?(t.skipToEnd(),r("comment","comment")):It(t,e,1)?(i(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),r("regexp","string-2")):(t.eat("="),r("operator","operator",t.current()));if("`"==n)return e.tokenize=l,l(t,e);if("#"==n)return t.skipToEnd(),r("error","error");if($t.test(n))return">"==n&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=n&&"="!=n||t.eat("="):/[<>*+\-]/.test(n)&&(t.eat(n),">"==n&&t.eat(n))),r("operator","operator",t.current());if(Gt.test(n)){t.eatWhile(Gt);var o=t.current();if("."!=e.lastType){if(Xt.propertyIsEnumerable(o)){var u=Xt[o];return r(u.type,u.style,o)}if("async"==o&&t.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return r("async","keyword",o)}return r("variable","variable",o)}}function s(t){return function(e,n){var i,s=!1;if(Ut&&"@"==e.peek()&&e.match(qt))return n.tokenize=o,r("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=t||s);)s=!s&&"\\"==i;return s||(n.tokenize=o),r("string","string")}}function a(t,e){for(var n,i=!1;n=t.next();){if("/"==n&&i){e.tokenize=o;break}i="*"==n}return r("comment","comment")}function l(t,e){for(var n,i=!1;null!=(n=t.next());){if(!i&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=o;break}i=!i&&"\\"==n}return r("quasi","string-2",t.current())}function u(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){if(Vt){var i=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,n));i&&(n=i.index)}for(var r=0,o=!1,s=n-1;s>=0;--s){var a=t.string.charAt(s),l=Yt.indexOf(a);if(l>=0&&l<3){if(!r){++s;break}if(0==--r){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++r;else if(Gt.test(a))o=!0;else{if(/["'\/]/.test(a))return;if(o&&!r){++s;break}}}o&&!r&&(e.fatArrowAt=s)}}function c(t,e,n,i,r,o){this.indented=t,this.column=e,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function h(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var i=t.context;i;i=i.prev)for(var n=i.vars;n;n=n.next)if(n.name==e)return!0}function p(t,e,n,i,r){var o=t.cc;for(Qt.state=t,Qt.stream=r,Qt.marked=null,Qt.cc=o,Qt.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){if((o.length?o.pop():Kt?E:O)(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Qt.marked?Qt.marked:"variable"==n&&h(t,i)?"variable-2":e}}}function d(){for(var t=arguments.length-1;t>=0;t--)Qt.cc.push(arguments[t])}function f(){return d.apply(null,arguments),!0}function _(t,e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}function g(t){var e=Qt.state;if(Qt.marked="def",e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var i=m(t,e.context);if(null!=i)return void(e.context=i)}else if(!_(t,e.localVars))return void(e.localVars=new b(t,e.localVars));n.globalVars&&!_(t,e.globalVars)&&(e.globalVars=new b(t,e.globalVars))}function m(t,e){if(e){if(e.block){var n=m(t,e.prev);return n?n==e.prev?e:new y(n,e.vars,!0):null}return _(t,e.vars)?e:new y(e.prev,new b(t,e.vars),!1)}return null}function v(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function y(t,e,n){this.prev=t,this.vars=e,this.block=n}function b(t,e){this.name=t,this.next=e}function w(){Qt.state.context=new y(Qt.state.context,Qt.state.localVars,!1),Qt.state.localVars=Jt}function k(){Qt.state.context=new y(Qt.state.context,Qt.state.localVars,!0),Qt.state.localVars=null}function x(){Qt.state.localVars=Qt.state.context.vars,Qt.state.context=Qt.state.context.prev}function C(t,e){var n=function(){var n=Qt.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new c(i,Qt.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function S(){var t=Qt.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function T(t){function e(n){return n==t?f():";"==t||"}"==n||")"==n||"]"==n?d():f(e)}return e}function O(t,e){return"var"==t?f(C("vardef",e),lt,T(";"),S):"keyword a"==t?f(C("form"),N,O,S):"keyword b"==t?f(C("form"),O,S):"keyword d"==t?Qt.stream.match(/^\s*$/,!1)?f():f(C("stat"),R,T(";"),S):"debugger"==t?f(T(";")):"{"==t?f(C("}"),k,Y,S,x):";"==t?f():"if"==t?("else"==Qt.state.lexical.info&&Qt.state.cc[Qt.state.cc.length-1]==S&&Qt.state.cc.pop()(),f(C("form"),N,O,S,ft)):"function"==t?f(bt):"for"==t?f(C("form"),_t,O,S):"class"==t||Vt&&"interface"==e?(Qt.marked="keyword",f(C("form"),xt,S)):"variable"==t?Vt&&"declare"==e?(Qt.marked="keyword",f(O)):Vt&&("module"==e||"enum"==e||"type"==e)&&Qt.stream.match(/^\s*\w/,!1)?(Qt.marked="keyword","enum"==e?f(Wt):"type"==e?f(tt,T("operator"),tt,T(";")):f(C("form"),ut,T("{"),C("}"),Y,S,S)):Vt&&"namespace"==e?(Qt.marked="keyword",f(C("form"),E,Y,S)):Vt&&"abstract"==e?(Qt.marked="keyword",f(O)):f(C("stat"),U):"switch"==t?f(C("form"),N,T("{"),C("}","switch"),k,Y,S,S,x):"case"==t?f(E,T(":")):"default"==t?f(T(":")):"catch"==t?f(C("form"),w,L,O,S,x):"export"==t?f(C("stat"),Ot,S):"import"==t?f(C("stat"),Et,S):"async"==t?f(O):"@"==e?f(E,O):d(C("stat"),E,T(";"),S)}function L(t){if("("==t)return f(wt,T(")"))}function E(t,e){return A(t,e,!1)}function M(t,e){return A(t,e,!0)}function N(t){return"("!=t?d():f(C(")"),E,T(")"),S)}function A(t,e,n){if(Qt.state.fatArrowAt==Qt.stream.start){var i=n?B:I;if("("==t)return f(w,C(")"),$(wt,")"),S,T("=>"),i,x);if("variable"==t)return d(w,ut,T("=>"),i,x)}var r=n?W:D;return Zt.hasOwnProperty(t)?f(r):"function"==t?f(bt,r):"class"==t||Vt&&"interface"==e?(Qt.marked="keyword",f(C("form"),kt,S)):"keyword c"==t||"async"==t?f(n?M:E):"("==t?f(C(")"),R,T(")"),S,r):"operator"==t||"spread"==t?f(n?M:E):"["==t?f(C("]"),Dt,S,r):"{"==t?q(V,"}",null,r):"quasi"==t?d(P,r):"new"==t?f(j(n)):"import"==t?f(E):f()}function R(t){return t.match(/[;\}\)\],]/)?d():d(E)}function D(t,e){return","==t?f(E):W(t,e,!1)}function W(t,e,n){var i=0==n?D:W,r=0==n?E:M;return"=>"==t?f(w,n?B:I,x):"operator"==t?/\+\+|--/.test(e)||Vt&&"!"==e?f(i):Vt&&"<"==e&&Qt.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?f(C(">"),$(tt,">"),S,i):"?"==e?f(E,T(":"),r):f(r):"quasi"==t?d(P,i):";"!=t?"("==t?q(M,")","call",i):"."==t?f(K,i):"["==t?f(C("]"),R,T("]"),S,i):Vt&&"as"==e?(Qt.marked="keyword",f(tt,i)):"regexp"==t?(Qt.state.lastType=Qt.marked="operator",Qt.stream.backUp(Qt.stream.pos-Qt.stream.start-1),f(r)):void 0:void 0}function P(t,e){return"quasi"!=t?d():"${"!=e.slice(e.length-2)?f(P):f(E,z)}function z(t){if("}"==t)return Qt.marked="string-2",Qt.state.tokenize=l,f(P)}function I(t){return u(Qt.stream,Qt.state),d("{"==t?O:E)}function B(t){return u(Qt.stream,Qt.state),d("{"==t?O:M)}function j(t){return function(e){return"."==e?f(t?H:F):"variable"==e&&Vt?f(ot,t?W:D):d(t?M:E)}}function F(t,e){if("target"==e)return Qt.marked="keyword",f(D)}function H(t,e){if("target"==e)return Qt.marked="keyword",f(W)}function U(t){return":"==t?f(S,O):d(D,T(";"),S)}function K(t){if("variable"==t)return Qt.marked="property",f()}function V(t,e){if("async"==t)return Qt.marked="property",f(V);if("variable"==t||"keyword"==Qt.style){if(Qt.marked="property","get"==e||"set"==e)return f(G);var n;return Vt&&Qt.state.fatArrowAt==Qt.stream.start&&(n=Qt.stream.match(/^\s*:\s*/,!1))&&(Qt.state.fatArrowAt=Qt.stream.pos+n[0].length),f(X)}return"number"==t||"string"==t?(Qt.marked=Ut?"property":Qt.style+" property",f(X)):"jsonld-keyword"==t?f(X):Vt&&v(e)?(Qt.marked="keyword",f(V)):"["==t?f(E,Z,T("]"),X):"spread"==t?f(M,X):"*"==e?(Qt.marked="keyword",f(V)):":"==t?d(X):void 0}function G(t){return"variable"!=t?d(X):(Qt.marked="property",f(bt))}function X(t){return":"==t?f(M):"("==t?d(bt):void 0}function $(t,e,n){function i(r,o){if(n?n.indexOf(r)>-1:","==r){var s=Qt.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),f(function(n,i){return n==e||i==e?d():d(t)},i)}return r==e||o==e?f():f(T(e))}return function(n,r){return n==e||r==e?f():d(t,i)}}function q(t,e,n){for(var i=3;i<arguments.length;i++)Qt.cc.push(arguments[i]);return f(C(e,n),$(t,e),S)}function Y(t){return"}"==t?f():d(O,Y)}function Z(t,e){if(Vt){if(":"==t)return f(tt);if("?"==e)return f(Z)}}function Q(t){if(Vt&&":"==t)return Qt.stream.match(/^\s*\w+\s+is\b/,!1)?f(E,J,tt):f(tt)}function J(t,e){if("is"==e)return Qt.marked="keyword",f()}function tt(t,e){return"keyof"==e||"typeof"==e?(Qt.marked="keyword",f("keyof"==e?tt:M)):"variable"==t||"void"==e?(Qt.marked="type",f(rt)):"string"==t||"number"==t||"atom"==t?f(rt):"["==t?f(C("]"),$(tt,"]",","),S,rt):"{"==t?f(C("}"),$(nt,"}",",;"),S,rt):"("==t?f($(it,")"),et):"<"==t?f($(tt,">"),tt):void 0}function et(t){if("=>"==t)return f(tt)}function nt(t,e){return"variable"==t||"keyword"==Qt.style?(Qt.marked="property",f(nt)):"?"==e?f(nt):":"==t?f(tt):"["==t?f(E,Z,T("]"),nt):void 0}function it(t,e){return"variable"==t&&Qt.stream.match(/^\s*[?:]/,!1)||"?"==e?f(it):":"==t?f(tt):d(tt)}function rt(t,e){return"<"==e?f(C(">"),$(tt,">"),S,rt):"|"==e||"."==t||"&"==e?f(tt):"["==t?f(T("]"),rt):"extends"==e||"implements"==e?(Qt.marked="keyword",f(tt)):void 0}function ot(t,e){if("<"==e)return f(C(">"),$(tt,">"),S,rt)}function st(){return d(tt,at)}function at(t,e){if("="==e)return f(tt)}function lt(t,e){return"enum"==e?(Qt.marked="keyword",f(Wt)):d(ut,Z,pt,dt)}function ut(t,e){return Vt&&v(e)?(Qt.marked="keyword",f(ut)):"variable"==t?(g(e),f()):"spread"==t?f(ut):"["==t?q(ht,"]"):"{"==t?q(ct,"}"):void 0}function ct(t,e){return"variable"!=t||Qt.stream.match(/^\s*:/,!1)?("variable"==t&&(Qt.marked="property"),"spread"==t?f(ut):"}"==t?d():f(T(":"),ut,pt)):(g(e),f(pt))}function ht(){return d(ut,pt)}function pt(t,e){if("="==e)return f(M)}function dt(t){if(","==t)return f(lt)}function ft(t,e){if("keyword b"==t&&"else"==e)return f(C("form","else"),O,S)}function _t(t,e){return"await"==e?f(_t):"("==t?f(C(")"),gt,T(")"),S):void 0}function gt(t){return"var"==t?f(lt,T(";"),vt):";"==t?f(vt):"variable"==t?f(mt):d(E,T(";"),vt)}function mt(t,e){return"in"==e||"of"==e?(Qt.marked="keyword",f(E)):f(D,vt)}function vt(t,e){return";"==t?f(yt):"in"==e||"of"==e?(Qt.marked="keyword",f(E)):d(E,T(";"),yt)}function yt(t){")"!=t&&f(E)}function bt(t,e){return"*"==e?(Qt.marked="keyword",f(bt)):"variable"==t?(g(e),f(bt)):"("==t?f(w,C(")"),$(wt,")"),S,Q,O,x):Vt&&"<"==e?f(C(">"),$(st,">"),S,bt):void 0}function wt(t,e){return"@"==e&&f(E,wt),"spread"==t?f(wt):Vt&&v(e)?(Qt.marked="keyword",f(wt)):d(ut,Z,pt)}function kt(t,e){return"variable"==t?xt(t,e):Ct(t,e)}function xt(t,e){if("variable"==t)return g(e),f(Ct)}function Ct(t,e){return"<"==e?f(C(">"),$(st,">"),S,Ct):"extends"==e||"implements"==e||Vt&&","==t?("implements"==e&&(Qt.marked="keyword"),f(Vt?tt:E,Ct)):"{"==t?f(C("}"),St,S):void 0}function St(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||Vt&&v(e))&&Qt.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Qt.marked="keyword",f(St)):"variable"==t||"keyword"==Qt.style?(Qt.marked="property",f(Vt?Tt:bt,St)):"["==t?f(E,Z,T("]"),Vt?Tt:bt,St):"*"==e?(Qt.marked="keyword",f(St)):";"==t?f(St):"}"==t?f():"@"==e?f(E,St):void 0}function Tt(t,e){return"?"==e?f(Tt):":"==t?f(tt,pt):"="==e?f(M):d(bt)}function Ot(t,e){return"*"==e?(Qt.marked="keyword",f(Rt,T(";"))):"default"==e?(Qt.marked="keyword",f(E,T(";"))):"{"==t?f($(Lt,"}"),Rt,T(";")):d(O)}function Lt(t,e){return"as"==e?(Qt.marked="keyword",f(T("variable"))):"variable"==t?d(M,Lt):void 0}function Et(t){return"string"==t?f():"("==t?d(E):d(Mt,Nt,Rt)}function Mt(t,e){return"{"==t?q(Mt,"}"):("variable"==t&&g(e),"*"==e&&(Qt.marked="keyword"),f(At))}function Nt(t){if(","==t)return f(Mt,Nt)}function At(t,e){if("as"==e)return Qt.marked="keyword",f(Mt)}function Rt(t,e){if("from"==e)return Qt.marked="keyword",f(E)}function Dt(t){return"]"==t?f():d($(M,"]"))}function Wt(){return d(C("form"),ut,T("{"),C("}"),$(Pt,"}"),S,S)}function Pt(){return d(ut,pt)}function zt(t,e){return"operator"==t.lastType||","==t.lastType||$t.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}function It(t,e,n){return e.tokenize==o&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(n||0)))}var Bt,jt,Ft=e.indentUnit,Ht=n.statementIndent,Ut=n.jsonld,Kt=n.json||Ut,Vt=n.typescript,Gt=n.wordCharacters||/[\w$\xa1-\uffff]/,Xt=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),i=t("keyword c"),r=t("keyword d"),o=t("operator"),s={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:t("new"),delete:i,void:i,throw:i,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:t("this"),class:t("class"),super:t("atom"),yield:i,export:t("export"),import:t("import"),extends:i,await:i}}(),$t=/[+\-*&%=<>!?|~^@]/,qt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Yt="([{}])",Zt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Qt={state:null,column:null,marked:null,cc:null},Jt=new b("this",new b("arguments",null));return x.lex=!0,S.lex=!0,{startState:function(t){var e={tokenize:o,lastType:"sof",cc:[],lexical:new c((t||0)-Ft,0,"block",!1),localVars:n.localVars,context:n.localVars&&new y(null,null,!1),indented:t||0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),u(t,e)),e.tokenize!=a&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==Bt?n:(e.lastType="operator"!=Bt||"++"!=jt&&"--"!=jt?Bt:"incdec",p(e,n,Bt,jt,t))},indent:function(e,i){if(e.tokenize==a)return t.Pass;if(e.tokenize!=o)return 0;var r,s=i&&i.charAt(0),l=e.lexical;if(!/^\s*else\b/.test(i))for(var u=e.cc.length-1;u>=0;--u){var c=e.cc[u];if(c==S)l=l.prev;else if(c!=ft)break}for(;("stat"==l.type||"form"==l.type)&&("}"==s||(r=e.cc[e.cc.length-1])&&(r==D||r==W)&&!/^[,\.=+\-*:?[\(]/.test(i));)l=l.prev;Ht&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var h=l.type,p=s==h;return"vardef"==h?l.indented+("operator"==e.lastType||","==e.lastType?l.info.length+1:0):"form"==h&&"{"==s?l.indented:"form"==h?l.indented+Ft:"stat"==h?l.indented+(zt(e,i)?Ht||Ft:0):"switch"!=l.info||p||0==n.doubleIndentSwitch?l.align?l.column+(p?0:1):l.indented+(p?0:Ft):l.indented+(/^(?:case|default)\b/.test(i)?Ft:2*Ft)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Kt?null:"/*",blockCommentEnd:Kt?null:"*/",blockCommentContinue:Kt?null:" * ",lineComment:Kt?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Kt?"json":"javascript",jsonldMode:Ut,jsonMode:Kt,expressionAllowed:It,skipExpression:function(t){var e=t.cc[t.cc.length-1];e!=E&&e!=M||t.cc.pop()}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},function(t,e,n){!function(t){t(n(0))}(function(t){"use strict";function e(t){for(var e={},n=0;n<t.length;++n)e[t[n].toLowerCase()]=!0;return e}function n(t,e){for(var n,i=!1;null!=(n=t.next());){if(i&&"/"==n){e.tokenize=null;break}i="*"==n}return["comment","comment"]}t.defineMode("css",function(e,n){function i(t,e){return f=e,t}function r(t,e){var n=t.next();if(m[n]){var r=m[n](t,e);if(!1!==r)return r}return"@"==n?(t.eatWhile(/[\w\\\-]/),i("def",t.current())):"="==n||("~"==n||"|"==n)&&t.eat("=")?i(null,"compare"):'"'==n||"'"==n?(e.tokenize=o(n),e.tokenize(t,e)):"#"==n?(t.eatWhile(/[\w\\\-]/),i("atom","hash")):"!"==n?(t.match(/^\s*\w*/),i("keyword","important")):/\d/.test(n)||"."==n&&t.eat(/\d/)?(t.eatWhile(/[\w.%]/),i("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?i(null,"select-op"):"."==n&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?i("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?i(null,n):("u"==n||"U"==n)&&t.match(/rl(-prefix)?\(/i)||("d"==n||"D"==n)&&t.match("omain(",!0,!0)||("r"==n||"R"==n)&&t.match("egexp(",!0,!0)?(t.backUp(1),e.tokenize=s,i("property","word")):/[\w\\\-]/.test(n)?(t.eatWhile(/[\w\\\-]/),i("property","word")):i(null,null):/[\d.]/.test(t.peek())?(t.eatWhile(/[\w.%]/),i("number","unit")):t.match(/^-[\w\\\-]+/)?(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?i("variable-2","variable-definition"):i("variable-2","variable")):t.match(/^\w+-/)?i("meta","meta"):void 0}function o(t){return function(e,n){for(var r,o=!1;null!=(r=e.next());){if(r==t&&!o){")"==t&&e.backUp(1);break}o=!o&&"\\"==r}return(r==t||!o&&")"!=t)&&(n.tokenize=null),i("string","string")}}function s(t,e){return t.next(),t.match(/\s*[\"\')]/,!1)?e.tokenize=null:e.tokenize=o(")"),i(null,"(")}function a(t,e,n){this.type=t,this.indent=e,this.prev=n}function l(t,e,n,i){return t.context=new a(n,e.indentation()+(!1===i?0:g),t.context),n}function u(t){return t.context.prev&&(t.context=t.context.prev),t.context.type}function c(t,e,n){return N[n.context.type](t,e,n)}function h(t,e,n,i){for(var r=i||1;r>0;r--)n.context=n.context.prev;return c(t,e,n)}function p(t){var e=t.current().toLowerCase();_=O.hasOwnProperty(e)?"atom":T.hasOwnProperty(e)?"keyword":"variable"}var d=n.inline;n.propertyKeywords||(n=t.resolveMode("text/css"));var f,_,g=e.indentUnit,m=n.tokenHooks,v=n.documentTypes||{},y=n.mediaTypes||{},b=n.mediaFeatures||{},w=n.mediaValueKeywords||{},k=n.propertyKeywords||{},x=n.nonStandardPropertyKeywords||{},C=n.fontProperties||{},S=n.counterDescriptors||{},T=n.colorKeywords||{},O=n.valueKeywords||{},L=n.allowNested,E=n.lineComment,M=!0===n.supportsAtComponent,N={};return N.top=function(t,e,n){if("{"==t)return l(n,e,"block");if("}"==t&&n.context.prev)return u(n);if(M&&/@component/i.test(t))return l(n,e,"atComponentBlock");if(/^@(-moz-)?document$/i.test(t))return l(n,e,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(t))return l(n,e,"atBlock");if(/^@(font-face|counter-style)/i.test(t))return n.stateArg=t,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(t))return"keyframes";if(t&&"@"==t.charAt(0))return l(n,e,"at");if("hash"==t)_="builtin";else if("word"==t)_="tag";else{if("variable-definition"==t)return"maybeprop";if("interpolation"==t)return l(n,e,"interpolation");if(":"==t)return"pseudo";if(L&&"("==t)return l(n,e,"parens")}return n.context.type},N.block=function(t,e,n){if("word"==t){var i=e.current().toLowerCase();return k.hasOwnProperty(i)?(_="property","maybeprop"):x.hasOwnProperty(i)?(_="string-2","maybeprop"):L?(_=e.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(_+=" error","maybeprop")}return"meta"==t?"block":L||"hash"!=t&&"qualifier"!=t?N.top(t,e,n):(_="error","block")},N.maybeprop=function(t,e,n){return":"==t?l(n,e,"prop"):c(t,e,n)},N.prop=function(t,e,n){if(";"==t)return u(n);if("{"==t&&L)return l(n,e,"propBlock");if("}"==t||"{"==t)return h(t,e,n);if("("==t)return l(n,e,"parens");if("hash"!=t||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(e.current())){if("word"==t)p(e);else if("interpolation"==t)return l(n,e,"interpolation")}else _+=" error";return"prop"},N.propBlock=function(t,e,n){return"}"==t?u(n):"word"==t?(_="property","maybeprop"):n.context.type},N.parens=function(t,e,n){return"{"==t||"}"==t?h(t,e,n):")"==t?u(n):"("==t?l(n,e,"parens"):"interpolation"==t?l(n,e,"interpolation"):("word"==t&&p(e),"parens")},N.pseudo=function(t,e,n){return"meta"==t?"pseudo":"word"==t?(_="variable-3",n.context.type):c(t,e,n)},N.documentTypes=function(t,e,n){return"word"==t&&v.hasOwnProperty(e.current())?(_="tag",n.context.type):N.atBlock(t,e,n)},N.atBlock=function(t,e,n){if("("==t)return l(n,e,"atBlock_parens");if("}"==t||";"==t)return h(t,e,n);if("{"==t)return u(n)&&l(n,e,L?"block":"top");if("interpolation"==t)return l(n,e,"interpolation");if("word"==t){var i=e.current().toLowerCase();_="only"==i||"not"==i||"and"==i||"or"==i?"keyword":y.hasOwnProperty(i)?"attribute":b.hasOwnProperty(i)?"property":w.hasOwnProperty(i)?"keyword":k.hasOwnProperty(i)?"property":x.hasOwnProperty(i)?"string-2":O.hasOwnProperty(i)?"atom":T.hasOwnProperty(i)?"keyword":"error"}return n.context.type},N.atComponentBlock=function(t,e,n){return"}"==t?h(t,e,n):"{"==t?u(n)&&l(n,e,L?"block":"top",!1):("word"==t&&(_="error"),n.context.type)},N.atBlock_parens=function(t,e,n){return")"==t?u(n):"{"==t||"}"==t?h(t,e,n,2):N.atBlock(t,e,n)},N.restricted_atBlock_before=function(t,e,n){return"{"==t?l(n,e,"restricted_atBlock"):"word"==t&&"@counter-style"==n.stateArg?(_="variable","restricted_atBlock_before"):c(t,e,n)},N.restricted_atBlock=function(t,e,n){return"}"==t?(n.stateArg=null,u(n)):"word"==t?(_="@font-face"==n.stateArg&&!C.hasOwnProperty(e.current().toLowerCase())||"@counter-style"==n.stateArg&&!S.hasOwnProperty(e.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},N.keyframes=function(t,e,n){return"word"==t?(_="variable","keyframes"):"{"==t?l(n,e,"top"):c(t,e,n)},N.at=function(t,e,n){return";"==t?u(n):"{"==t||"}"==t?h(t,e,n):("word"==t?_="tag":"hash"==t&&(_="builtin"),"at")},N.interpolation=function(t,e,n){return"}"==t?u(n):"{"==t||";"==t?h(t,e,n):("word"==t?_="variable":"variable"!=t&&"("!=t&&")"!=t&&(_="error"),"interpolation")},{startState:function(t){return{tokenize:null,state:d?"block":"top",stateArg:null,context:new a(d?"block":"top",t||0,null)}},token:function(t,e){if(!e.tokenize&&t.eatSpace())return null;var n=(e.tokenize||r)(t,e);return n&&"object"==typeof n&&(f=n[1],n=n[0]),_=n,"comment"!=f&&(e.state=N[e.state](f,t,e)),_},indent:function(t,e){var n=t.context,i=e&&e.charAt(0),r=n.indent;return"prop"!=n.type||"}"!=i&&")"!=i||(n=n.prev),n.prev&&("}"!=i||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"restricted_atBlock"!=n.type?(")"!=i||"parens"!=n.type&&"atBlock_parens"!=n.type)&&("{"!=i||"at"!=n.type&&"atBlock"!=n.type)||(r=Math.max(0,n.indent-g)):(n=n.prev,r=n.indent)),r},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:E,fold:"brace"}});var i=["domain","regexp","url","url-prefix"],r=e(i),o=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],s=e(o),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],l=e(a),u=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],c=e(u),h=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],p=e(h),d=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],f=e(d),_=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],g=e(_),m=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],v=e(m),y=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],b=e(y),w=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],k=e(w),x=i.concat(o).concat(a).concat(u).concat(h).concat(d).concat(y).concat(w);t.registerHelper("hintWords","css",x),t.defineMIME("text/css",{documentTypes:r,mediaTypes:s,mediaFeatures:l,mediaValueKeywords:c,propertyKeywords:p,nonStandardPropertyKeywords:f,fontProperties:g,counterDescriptors:v,colorKeywords:b,valueKeywords:k,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=n,n(t,e))}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:s,mediaFeatures:l,mediaValueKeywords:c,propertyKeywords:p,nonStandardPropertyKeywords:f,colorKeywords:b,valueKeywords:k,fontProperties:g,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=n,n(t,e)):["operator","operator"]},":":function(t){return!!t.match(/\s*\{/,!1)&&[null,null]},$:function(t){return t.match(/^[\w-]+/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(t){return!!t.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:s,mediaFeatures:l,mediaValueKeywords:c,propertyKeywords:p,nonStandardPropertyKeywords:f,colorKeywords:b,valueKeywords:k,fontProperties:g,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=n,n(t,e)):["operator","operator"]},"@":function(t){return t.eat("{")?[null,"interpolation"]:!t.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:r,mediaTypes:s,mediaFeatures:l,propertyKeywords:p,nonStandardPropertyKeywords:f,fontProperties:g,counterDescriptors:v,colorKeywords:b,valueKeywords:k,supportsAtComponent:!0,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=n,n(t,e))}},name:"css",helperType:"gss"})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(7)},function(t,e,n){"use strict";var i=n(8),r=(n.n(i),n(9)),o=(n.n(r),n(12)),s=(n.n(o),n(10).html);n(3),n(4),n(15),n(5);var a=wp.i18n.__,l=wp.blocks.registerBlockType,u=wp.editor,c=u.MediaUpload,h=u.RichText,p=wp.components.Button;l("copesa-blocks/svg-infography",{title:"Copesa SVG",icon:"shield",category:"common",attributes:{url:{type:"string",source:"attribute",selector:"img",attribute:"src"},id:{type:"number"},src:{type:"string"},width:{type:"number"},height:{type:"number"},title:{source:"attribute",selector:"h2"},undertitle:{source:"attribute",selector:"h3"},description:{source:"attribute",selector:"p"},source:{source:"attribute",selector:"h4"}},keywords:[a("copesa")],edit:function(t){var e=t.className,n=t.attributes,i=(n.url,n.id),r=n.src,l=n.title,u=n.undertitle,d=n.description,f=n.source,_=t.setAttributes,g="",m=function(t){fetch(t.url).then(function(t){return t.text()}).then(function(e){g=e,_({url:t.url,id:t.id,src:e})})},v=function(t){g=t},y=function(){_({src:g})},b={name:"htmlmixed"};return wp.element.createElement("div",{className:e},wp.element.createElement(h,{tagName:"h2",className:"svgtitle",placeholder:"T\xedtulo de la Infograf\xeda",value:l,onChange:function(t){return _({title:t})}}),wp.element.createElement(h,{tagName:"h3",className:"svgundertitle",placeholder:"Bajada",value:u,onChange:function(t){return _({undertitle:t})}}),wp.element.createElement("div",{className:"svgimage"},wp.element.createElement(c,{onSelect:m,allowedTypes:["image/svg+xml"],value:i,render:function(t){var e=t.open;return wp.element.createElement(p,{className:i?"image-button":"button button-large",onClick:e},i?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r}}):a("Subir SVG"))}}),i&&wp.element.createElement("div",null,wp.element.createElement(p,{className:"button button-large",onClick:y},"Guardar SVG"),wp.element.createElement(o.UnControlled,{value:s(r,{indent_size:2}),options:{mode:b,selectionPointer:!0,theme:"material",lineNumbers:!0},onChange:function(t,e,n){v(n)}}))),wp.element.createElement(h,{tagName:"p",className:"svgdescription",placeholder:"Descripci\xf3n",value:d,onChange:function(t){return _({description:t})}}),wp.element.createElement(h,{tagName:"h4",className:"svgsource",placeholder:"Fuente",value:f,onChange:function(t){return _({source:t})}}))},save:function(t){var e=t.className,n=t.attributes,i=n.src,r=n.title,o=n.undertitle,s=n.description,a=n.source;return wp.element.createElement("div",{className:e},r&&wp.element.createElement(h.Content,{tagName:"h2",className:"svgtitle",value:r}),o&&wp.element.createElement(h.Content,{tagName:"h3",className:"svgundertitle",value:o}),i&&wp.element.createElement("span",{className:"svgcode",dangerouslySetInnerHTML:{__html:i}}),s&&wp.element.createElement(h.Content,{tagName:"p",className:"svgdescription",value:s}),a&&wp.element.createElement(h.Content,{tagName:"h4",className:"svgsource",value:a}))}})},function(t,e){},function(t,e){},function(t,e,n){"use strict";function i(t,e,n){var i=function(e,n){return t.js_beautify(e,n)};return i.js=t.js_beautify,i.css=e.css_beautify,i.html=n.html_beautify,i.js_beautify=t.js_beautify,i.css_beautify=e.css_beautify,i.html_beautify=n.html_beautify,i}var r,o;r=[n(1),n(2),n(11)],void 0!==(o=function(t,e,n){return i(t,e,n)}.apply(e,r))&&(t.exports=o)},function(t,e,n){var i,r;!function(){var o=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([,,function(t,e,n){"use strict";function i(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__items=[]}function r(t,e){this.__cache=[t],this.__level_string=e}function o(t,e){var n=t.indent_char;t.indent_size>1&&(n=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(n)),this.__indent_cache=new r(e,n),this.__alignment_cache=new r(""," "),this.baseIndentLength=e.length,this.indent_length=n.length,this.raw=!1,this._end_with_newline=t.end_with_newline,this.__lines=[],this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.__add_outputline()}i.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},i.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},i.prototype.set_indent=function(t,e){this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.baseIndentLength+this.__alignment_count+this.__indent_count*this.__parent.indent_length},i.prototype.get_character_count=function(){return this.__character_count},i.prototype.is_empty=function(){return 0===this.__items.length},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(t){this.__items.push(t),this.__character_count+=t.length},i.prototype.push_raw=function(t){this.push(t);var e=t.lastIndexOf("\n");-1!==e&&(this.__character_count=t.length-e)},i.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},i.prototype.remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_length)},i.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var t="";return this.is_empty()||(this.__indent_count>=0&&(t=this.__parent.get_indent_string(this.__indent_count)),this.__alignment_count>=0&&(t+=this.__parent.get_alignment_string(this.__alignment_count)),t+=this.__items.join("")),t},r.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__cache.push(this.__cache[this.__cache.length-1]+this.__level_string)},r.prototype.get_level_string=function(t){return this.__ensure_cache(t),this.__cache[t]},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=new i(this),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t){return this.__indent_cache.get_level_string(t)},o.prototype.get_alignment_string=function(t){return this.__alignment_cache.get_level_string(t)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){var e=this.__lines.join("\n").replace(/[\r\n\t ]+$/,"");return this._end_with_newline&&(e+="\n"),"\n"!==t&&(e=e.replace(/[\n]/g,t)),e},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.push(t.whitespace_before),this.current_line.push_raw(t.text),this.space_before_token=!1},o.prototype.add_token=function(t){this.add_space_before_token(),this.current_line.push(t)},o.prototype.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t].remove_indent(),t++},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim(this.indent_string,this.baseIndentString);t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,e){for(var n=this.__lines.length-2;n>=0;){var r=this.__lines[n];if(r.is_empty())break;if(0!==r.item(0).indexOf(t)&&r.item(-1)!==e){this.__lines.splice(n+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}n--}},t.exports.Output=o},function(t,e,n){"use strict";function i(t,e,n,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}t.exports.Token=i},,,function(t,e,n){"use strict";function i(t,e){this.raw_options=r(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs"),this.indent_with_tabs&&(this.indent_char="\t",this.indent_size=1),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char"))}function r(t,e){var n={};t=o(t);var i;for(i in t)i!==e&&(n[i]=t[i]);if(e&&t[e])for(i in t[e])n[i]=t[e][i];return n}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}i.prototype._get_array=function(t,e){var n=this.raw_options[t],i=e||[];return"object"===typeof n?null!==n&&"function"===typeof n.concat&&(i=n.concat()):"string"===typeof n&&(i=n.split(/[^a-zA-Z0-9_\/\-]+/)),i},i.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},i.prototype._get_characters=function(t,e){var n=this.raw_options[t],i=e||"";return"string"===typeof n&&(i=n.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),i},i.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(n,10);return isNaN(i)&&(i=e),i},i.prototype._get_selection=function(t,e,n){var i=this._get_selection_list(t,e,n);if(1!==i.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i[0]},i.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,n);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return i},i.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(t){return-1===e.indexOf(t)})},t.exports.Options=i,t.exports.normalizeOpts=o,t.exports.mergeOpts=r},,function(t,e,n){"use strict";function i(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}i.prototype.restart=function(){this.__position=0},i.prototype.back=function(){this.__position>0&&(this.__position-=1)},i.prototype.hasNext=function(){return this.__position<this.__input_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},i.prototype.test=function(t,e){if(e=e||0,e+=this.__position,t.lastIndex=e,e>=0&&e<this.__input_length){var n=t.exec(this.__input);return n&&n.index===e}return!1},i.prototype.testChar=function(t,e){var n=this.peek(e);return null!==n&&t.test(n)},i.prototype.match=function(t){t.lastIndex=this.__position;var e=t.exec(this.__input);return e&&e.index===this.__position?this.__position+=e[0].length:e=null,e},i.prototype.read=function(t){var e="",n=this.match(t);return n&&(e=n[0]),e},i.prototype.readUntil=function(t,e){var n="",i=this.__position;t.lastIndex=this.__position;var r=t.exec(this.__input);return i=r?e?r.index+r[0].length:r.index:this.__input_length,n=this.__input.substring(this.__position,i),this.__position=i,n},i.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},i.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},i.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=i},function(t,e,n){"use strict";var i=n(8).InputScanner,r=n(3).Token,o=n(10).TokenStream,s={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},a=function(t,e){this._input=new i(t),this._options=e||{},this.__tokens=null,this.__newline_count=0,this.__whitespace_before_token="",this._whitespace_pattern=/[\n\r\t ]+/g,this._newline_pattern=/([^\n\r]*)(\r\n|[\n\r])?/g};a.prototype.tokenize=function(){this._input.restart(),this.__tokens=new o,this._reset();for(var t,e=new r(s.START,""),n=null,i=[],a=new o;e.type!==s.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)a.add(t),t=this._get_next_token(e,n);a.isEmpty()||(t.comments_before=a,a=new o),t.parent=n,this._is_opening(t)?(i.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=i.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},a.prototype._is_first_token=function(){return this.__tokens.isEmpty()},a.prototype._reset=function(){},a.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(s.RAW,n):this._create_token(s.EOF,"")},a.prototype._is_comment=function(t){return!1},a.prototype._is_opening=function(t){return!1},a.prototype._is_closing=function(t,e){return!1},a.prototype._create_token=function(t,e){var n=new r(t,e,this.__newline_count,this.__whitespace_before_token);return this.__newline_count=0,this.__whitespace_before_token="",n},a.prototype._readWhitespace=function(){var t=this._input.read(this._whitespace_pattern);if(" "===t)this.__whitespace_before_token=t;else if(""!==t){this._newline_pattern.lastIndex=0;for(var e=this._newline_pattern.exec(t);e[2];)this.__newline_count+=1,e=this._newline_pattern.exec(t);this.__whitespace_before_token=e[1]}},t.exports.Tokenizer=a,t.exports.TOKEN=s},function(t,e,n){"use strict";function i(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return 0===this.__tokens_length},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},i.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},i.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=i},function(t,e,n){"use strict";function i(t,e){t="string"===typeof t?t:t.source,e="string"===typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp("(?:[\\s\\S]*?)((?:"+t+/\sbeautify\signore:end\s/.source+e+")|$)","g")}i.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},i.prototype.readIgnored=function(t){return t.read(this.__directives_end_ignore_pattern)},t.exports.Directives=i},,,,function(t,e,n){"use strict";function i(t,e,n,i){return new r(t,e,n,i).beautify()}var r=n(16).Beautifier;t.exports=i},function(t,e,n){"use strict";function i(t,e){return-1!==e.indexOf(t)}function r(t,e,n){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=n||0,this.parser_token=e||null}function o(t){this._printer=t,this._current_frame=null}function s(t,e,n,i){this._source_text=t||"",e=e||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;var r=new a(e,"html");this._options=r,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}var a=n(17).Options,l=n(2).Output,u=n(18).Tokenizer,c=n(18).TOKEN,h=/\r\n|[\r\n]/,p=/\r\n|[\r\n]/g,d=function(t,e){this.indent_level=0,this.alignment_size=0,this.wrap_line_length=t.wrap_line_length,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new l(t,e)};d.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},d.prototype.set_space_before_token=function(t){this._output.space_before_token=t},d.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},d.prototype.print_preserved_newlines=function(t){var e=0;t.type!==c.TEXT&&t.previous.type!==c.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(n>0);return 0!==e},d.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines)&&(this.print_preserved_newlines(t)||(this._output.space_before_token=!0,this.print_space_or_wrap(t.text)),!0)},d.prototype.print_space_or_wrap=function(t){return!!(this.wrap_line_length&&this._output.current_line.get_character_count()+t.length+1>=this.wrap_line_length)&&this._output.add_new_line()},d.prototype.print_newline=function(t){this._output.add_new_line(t)},d.prototype.print_token=function(t){t&&(this._output.current_line.is_empty()&&this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t))},d.prototype.print_raw_text=function(t){this._output.current_line.push_raw(t)},d.prototype.indent=function(){this.indent_level++},d.prototype.unindent=function(){this.indent_level>0&&this.indent_level--},d.prototype.get_full_indent=function(t){return t=this.indent_level+(t||0),t<1?"":this._output.get_indent_string(t)};var f=function(t,e){var n=e.next;if(!e.closed)return!1;for(;n.type!==c.EOF&&n.closed!==e;){if(n.type===c.ATTRIBUTE&&"type"===n.text){var i=n.next?n.next:n,r=i.next?i.next:i;return i.type===c.EQUALS&&r.type===c.VALUE&&("style"===t&&r.text.search("text/css")>-1||"script"===t&&r.text.search(/(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)}n=n.next}return!0};o.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},o.prototype.record_tag=function(t){var e=new r(this._current_frame,t,this._printer.indent_level);this._current_frame=e},o.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},o.prototype._get_frame=function(t,e){for(var n=this._current_frame;n&&-1===t.indexOf(n.tag);){if(e&&-1!==e.indexOf(n.tag)){n=null;break}n=n.parent}return n},o.prototype.try_pop=function(t,e){var n=this._get_frame([t],e);return this._try_pop_frame(n)},o.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)},s.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&h.test(t)&&(e=t.match(h)[0])),t=t.replace(p,"\n");var n={text:"",type:""},i=new _,r=new d(this._options,""),s=new u(t,this._options).tokenize();this._tag_stack=new o(r);for(var a=null,l=s.next();l.type!==c.EOF;)l.type===c.TAG_OPEN||l.type===c.COMMENT?(a=this._handle_tag_open(r,l,i,n),i=a):l.type===c.ATTRIBUTE||l.type===c.EQUALS||l.type===c.VALUE||l.type===c.TEXT&&!i.tag_complete?a=this._handle_inside_tag(r,l,i,s):l.type===c.TAG_CLOSE?a=this._handle_tag_close(r,l,i):l.type===c.TEXT?a=this._handle_text(r,l,i):r.add_raw_token(l),n=a,l=s.next();return r._output.get_code(e)},s.prototype._handle_tag_close=function(t,e,n){var i={text:e.text,type:e.type};return t.alignment_size=0,n.tag_complete=!0,t.set_space_before_token(e.newlines||""!==e.whitespace_before),n.is_unformatted?t.add_raw_token(e):("<"===n.tag_start_char&&(t.set_space_before_token("/"===e.text[0]),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e.text)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(t.indent(),n.indent_content=!1),i},s.prototype._handle_inside_tag=function(t,e,n,i){var r={text:e.text,type:e.type};if(t.set_space_before_token(e.newlines||""!==e.whitespace_before),n.is_unformatted)t.add_raw_token(e);else if("{"===n.tag_start_char&&e.type===c.TEXT)t.print_preserved_newlines(e)?t.print_raw_text(e.whitespace_before+e.text):t.print_token(e.text);else{if(e.type===c.ATTRIBUTE?(t.set_space_before_token(!0),n.attr_count+=1):e.type===c.EQUALS?t.set_space_before_token(!1):e.type===c.VALUE&&e.previous.type===c.EQUALS&&t.set_space_before_token(!1),t._output.space_before_token&&"<"===n.tag_start_char){var o=t.print_space_or_wrap(e.text);if(e.type===c.ATTRIBUTE&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),o=o||0!==e.newlines),n.has_wrapped_attrs=n.has_wrapped_attrs||o,this._is_wrap_attributes_force)){var s=n.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===n.attr_count){var a,l=!0,u=0;do{if(a=i.peek(u),a.type===c.ATTRIBUTE){l=!1;break}u+=1}while(u<4&&a.type!==c.EOF&&a.type!==c.TAG_CLOSE);s=!l}s&&(t.print_newline(!1),n.has_wrapped_attrs=!0)}}t.print_token(e.text)}return r},s.prototype._handle_text=function(t,e,n){var i={text:e.text,type:"TK_CONTENT"};return n.custom_beautifier?this._print_custom_beatifier_text(t,e,n):n.is_unformatted||n.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e.text)),i},s.prototype._print_custom_beatifier_text=function(t,e,n){if(""!==e.text){t.print_newline(!1);var i,r=e.text,o=1;"script"===n.tag_name?i="function"===typeof this._js_beautify&&this._js_beautify:"style"===n.tag_name&&(i="function"===typeof this._css_beautify&&this._css_beautify),"keep"===this._options.indent_scripts?o=0:"separate"===this._options.indent_scripts&&(o=-t.indent_level);var s=t.get_full_indent(o);if(r=r.replace(/\n[ \t]*$/,""),i){var a=function(){this.eol="\n"};a.prototype=this._options.raw_options;r=i(s+r,new a)}else{var l=r.match(/^\s*/)[0],u=l.match(/[^\n\r]*$/)[0].split(this._options.indent_string).length-1,c=this._get_full_indent(o-u);r=(s+r.trim()).replace(/\r\n|\r|\n/g,"\n"+c)}r&&(t.print_raw_text(r),t.print_newline(!0))}},s.prototype._handle_tag_open=function(t,e,n,i){var r=this._get_tag_open_token(e);return(n.is_unformatted||n.is_content_unformatted)&&e.type===c.TAG_OPEN&&0===e.text.indexOf("</")?t.add_raw_token(e):(t.traverse_whitespace(e),this._set_tag_position(t,e,r,n,i),t.print_token(e.text)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(r.alignment_size=e.text.length+1),r.tag_complete||r.is_unformatted||(t.alignment_size=r.alignment_size),r};var _=function(t,e){if(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier=!1,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",e){var n;this.tag_start_char=e.text[0],this.text=e.text,"<"===this.tag_start_char?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:""):(n=e.text.match(/^{{\#?([^\s}]+)/),this.tag_check=n?n[1]:""),this.tag_check=this.tag_check.toLowerCase(),e.type===c.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&"/>"===e.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))}else this.tag_complete=!0};s.prototype._get_tag_open_token=function(t){var e=new _(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||i(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&i(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&i(e.tag_check,this._options.content_unformatted),e.is_inline_element=i(e.tag_name,this._options.inline)||"{"===e.tag_start_char,e},s.prototype._set_tag_position=function(t,e,n,r,o){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n),this._tag_stack.record_tag(n),"script"!==n.tag_name&&"style"!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier=f(n.tag_check,e)))),i(n.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),n.is_empty_element){if("{"===n.tag_start_char&&"else"===n.tag_check){this._tag_stack.indent_to_tag(["if","unless","each"]),n.indent_content=!0;t.current_line_has_match(/{{#if/)||t.print_newline(!1)}"!--"===n.tag_name&&o.type===c.TAG_CLOSE&&r.is_end_tag&&-1===n.text.indexOf("\n")||n.is_inline_element||n.is_unformatted||t.print_newline(!1)}else n.is_unformatted||n.is_content_unformatted?n.is_inline_element||n.is_unformatted||t.print_newline(!1):n.is_end_tag?(n.start_tag_token&&n.start_tag_token.multiline_content||!(n.is_inline_element||r.is_inline_element||o.type===c.TAG_CLOSE&&n.start_tag_token===r||"TK_CONTENT"===o.type))&&t.print_newline(!1):(n.indent_content=!n.custom_beautifier,"<"===n.tag_start_char&&("html"===n.tag_name?n.indent_content=this._options.indent_inner_html:"head"===n.tag_name?n.indent_content=this._options.indent_head_inner_html:"body"===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||"TK_CONTENT"===o.type||(n.parent&&(n.parent.multiline_content=!0),t.print_newline(!1)))},s.prototype._do_optional_end_element=function(t){!t.is_empty_element&&t.is_start_tag&&t.parent&&("body"===t.tag_name?this._tag_stack.try_pop("head"):"li"===t.tag_name?this._tag_stack.try_pop("li",["ol","ul"]):"dd"===t.tag_name||"dt"===t.tag_name?(this._tag_stack.try_pop("dt",["dl"]),this._tag_stack.try_pop("dd",["dl"])):"rp"===t.tag_name||"rt"===t.tag_name?(this._tag_stack.try_pop("rt",["ruby","rtc"]),this._tag_stack.try_pop("rp",["ruby","rtc"])):"optgroup"===t.tag_name?this._tag_stack.try_pop("optgroup",["select"]):"option"===t.tag_name?this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===t.tag_name?this._tag_stack.try_pop("caption",["table"]):"thead"===t.tag_name?(this._tag_stack.try_pop("caption",["table"]),this._tag_stack.try_pop("colgroup",["table"])):"tbody"===t.tag_name||"tfoot"===t.tag_name?(this._tag_stack.try_pop("caption",["table"]),this._tag_stack.try_pop("colgroup",["table"]),this._tag_stack.try_pop("thead",["table"]),this._tag_stack.try_pop("tbody",["table"])):"tr"===t.tag_name?(this._tag_stack.try_pop("caption",["table"]),this._tag_stack.try_pop("colgroup",["table"]),this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):"th"!==t.tag_name&&"td"!==t.tag_name||(this._tag_stack.try_pop("td",["tr"]),this._tag_stack.try_pop("th",["tr"])),t.parent=this._tag_stack.get_parser_token())},t.exports.Beautifier=s},function(t,e,n){"use strict";function i(t){r.call(this,t,"html"),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","?=","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}var r=n(6).Options;i.prototype=new r,t.exports.Options=i},function(t,e,n){"use strict";var i=n(9).Tokenizer,r=n(9).TOKEN,o=n(11).Directives,s={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:r.START,RAW:r.RAW,EOF:r.EOF},a=new o(/<\!--/,/-->/),l=function(t,e){i.call(this,t,e),this._current_tag_name="",this._word_pattern=this._options.indent_handlebars?/[\n\r\t <]|{{/g:/[\n\r\t <]/g};l.prototype=new i,l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return t.type===s.TAG_OPEN},l.prototype._is_closing=function(t,e){return t.type===s.TAG_CLOSE&&e&&((">"===t.text||"/>"===t.text)&&"<"===e.text[0]||"}}"===t.text&&"{"===e.text[0]&&"{"===e.text[1])},l.prototype._reset=function(){this._current_tag_name=""},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=null,i=this._input.peek();return null===i?this._create_token(s.EOF,""):(n=n||this._read_attribute(i,t,e),n=n||this._read_raw_content(t,e),n=n||this._read_comment(i),n=n||this._read_open(i,e),n=n||this._read_close(i,e),n=n||this._read_content_word(),n=n||this._create_token(s.UNKNOWN,this._input.next()))},l.prototype._read_comment=function(t){var e=null;if("<"===t||"{"===t){var n=this._input.peek(1),i=this._input.peek(2);if("<"===t&&("!"===n||"?"===n||"%"===n)||this._options.indent_handlebars&&"{"===t&&"{"===n&&"!"===i){for(var r="",o=">",l=!1,u=this._input.next();u&&(r+=u,r.charAt(r.length-1)!==o.charAt(o.length-1)||-1===r.indexOf(o));)l||(l=r.length>10,0===r.indexOf("<![if")?(o="<![endif]>",l=!0):0===r.indexOf("<![cdata[")?(o="]]>",l=!0):0===r.indexOf("<![")?(o="]>",l=!0):0===r.indexOf("\x3c!--")?(o="--\x3e",l=!0):0===r.indexOf("{{!--")?(o="--}}",l=!0):0===r.indexOf("{{!")?5===r.length&&-1===r.indexOf("{{!--")&&(o="}}",l=!0):0===r.indexOf("<?")?(o="?>",l=!0):0===r.indexOf("<%")&&(o="%>",l=!0)),u=this._input.next();var c=a.get_directives(r);c&&"start"===c.ignore&&(r+=a.readIgnored(this._input)),e=this._create_token(s.COMMENT,r),e.directives=c}}return e},l.prototype._read_open=function(t,e){var n=null,i=null;return e||("<"===t?(n=this._input.read(/<(?:[^\n\r\t >{][^\n\r\t >{\/]*)?/g),i=this._create_token(s.TAG_OPEN,n)):this._options.indent_handlebars&&"{"===t&&"{"===this._input.peek(1)&&(n=this._input.readUntil(/[\n\r\t }]/g),i=this._create_token(s.TAG_OPEN,n))),i},l.prototype._read_close=function(t,e){var n=null,i=null;return e&&("<"===e.text[0]&&(">"===t||"/"===t&&">"===this._input.peek(1))?(n=this._input.next(),"/"===t&&(n+=this._input.next()),i=this._create_token(s.TAG_CLOSE,n)):"{"===e.text[0]&&"}"===t&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),i=this._create_token(s.TAG_CLOSE,"}}"))),i},l.prototype._read_attribute=function(t,e,n){var i=null,r="";if(n&&"<"===n.text[0])if("="===t)i=this._create_token(s.EQUALS,this._input.next());else if('"'===t||"'"===t){for(var o=this._input.next(),a="",l=new RegExp(t+"|{{","g");this._input.hasNext()&&(a=this._input.readUntilAfter(l),o+=a,'"'!==a[a.length-1]&&"'"!==a[a.length-1]);)this._input.hasNext()&&(o+=this._input.readUntilAfter(/}}/g));i=this._create_token(s.VALUE,o)}else(r="{"===t&&"{"===this._input.peek(1)?this._input.readUntilAfter(/}}/g):this._input.readUntil(/[\n\r\t =\/>]/g))&&(i=e.type===s.EQUALS?this._create_token(s.VALUE,r):this._create_token(s.ATTRIBUTE,r));return i},l.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&("script"===t||"style"===t||-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},l.prototype._read_raw_content=function(t,e){var n="";if(e&&"{"===e.text[0])n=this._input.readUntil(/}}/g);else if(t.type===s.TAG_CLOSE&&"<"===t.opened.text[0]){var i=t.opened.text.substr(1).toLowerCase();this._is_content_unformatted(i)&&(n=this._input.readUntil(new RegExp("</"+i+"[\\n\\r\\t ]*?>","ig")))}return n?this._create_token(s.TEXT,n):null},l.prototype._read_content_word=function(){var t=this._input.readUntil(this._word_pattern);if(t)return this._create_token(s.TEXT,t)},t.exports.Tokenizer=l,t.exports.TOKEN=s}]),s=o;i=[n,n(1),n(2)],void 0!==(r=function(t){var e=n(1),i=n(2);return{html_beautify:function(t,n){return s(t,n,e.js_beautify,i.css_beautify)}}}.apply(e,i))&&(t.exports=r)}()},function(t,e,n){"use strict";(function(t){var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var s,a=n(14),l="undefined"===typeof navigator||!0===t.PREVENT_CODEMIRROR_RENDER;l||(s=n(0));var u=function(){function t(){}return t.equals=function(t,e){var n=this,i=Object.keys,o="undefined"===typeof t?"undefined":r(t),s="undefined"===typeof e?"undefined":r(e);return t&&e&&"object"===o&&o===s?i(t).length===i(e).length&&i(t).every(function(i){return n.equals(t[i],e[i])}):t===e},t}(),c=function(){function t(t,e){this.editor=t,this.props=e}return t.prototype.delegateCursor=function(t,e,n){var i=this.editor.getDoc();n&&this.editor.focus(),e?i.setCursor(t):i.setCursor(t,null,{scroll:!1})},t.prototype.delegateScroll=function(t){this.editor.scrollTo(t.x,t.y)},t.prototype.delegateSelection=function(t,e){this.editor.setSelections(t),e&&this.editor.focus()},t.prototype.apply=function(t){t&&t.selection&&t.selection.ranges&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),t&&t.cursor&&this.delegateCursor(t.cursor,t.autoScroll||!1,this.editor.getOption("autofocus")||!1),t&&t.scroll&&this.delegateScroll(t.scroll)},t.prototype.applyNext=function(t,e,n){t&&t.selection&&t.selection.ranges&&e&&e.selection&&e.selection.ranges&&!u.equals(t.selection.ranges,e.selection.ranges)&&this.delegateSelection(e.selection.ranges,e.selection.focus||!1),t&&t.cursor&&e&&e.cursor&&!u.equals(t.cursor,e.cursor)&&this.delegateCursor(n.cursor||e.cursor,e.autoScroll||!1,e.autoCursor||!1),t&&t.scroll&&e&&e.scroll&&!u.equals(t.scroll,e.scroll)&&this.delegateScroll(e.scroll)},t.prototype.applyUserDefined=function(t,e){e&&e.cursor&&this.delegateCursor(e.cursor,t.autoScroll||!1,this.editor.getOption("autofocus")||!1)},t.prototype.wire=function(t){var e=this;Object.keys(t||{}).filter(function(t){return/^on/.test(t)}).forEach(function(t){switch(t){case"onBlur":e.editor.on("blur",function(t,n){e.props.onBlur(e.editor,n)});break;case"onContextMenu":e.editor.on("contextmenu",function(t,n){e.props.onContextMenu(e.editor,n)});break;case"onCopy":e.editor.on("copy",function(t,n){e.props.onCopy(e.editor,n)});break;case"onCursor":e.editor.on("cursorActivity",function(t){e.props.onCursor(e.editor,e.editor.getCursor())});break;case"onCursorActivity":e.editor.on("cursorActivity",function(t){e.props.onCursorActivity(e.editor)});break;case"onCut":e.editor.on("cut",function(t,n){e.props.onCut(e.editor,n)});break;case"onDblClick":e.editor.on("dblclick",function(t,n){e.props.onDblClick(e.editor,n)});break;case"onDragEnter":e.editor.on("dragenter",function(t,n){e.props.onDragEnter(e.editor,n)});break;case"onDragLeave":e.editor.on("dragleave",function(t,n){e.props.onDragLeave(e.editor,n)});break;case"onDragOver":e.editor.on("dragover",function(t,n){e.props.onDragOver(e.editor,n)});break;case"onDragStart":e.editor.on("dragstart",function(t,n){e.props.onDragStart(e.editor,n)});break;case"onDrop":e.editor.on("drop",function(t,n){e.props.onDrop(e.editor,n)});break;case"onFocus":e.editor.on("focus",function(t,n){e.props.onFocus(e.editor,n)});break;case"onGutterClick":e.editor.on("gutterClick",function(t,n,i,r){e.props.onGutterClick(e.editor,n,i,r)});break;case"onKeyDown":e.editor.on("keydown",function(t,n){e.props.onKeyDown(e.editor,n)});break;case"onKeyPress":e.editor.on("keypress",function(t,n){e.props.onKeyPress(e.editor,n)});break;case"onKeyUp":e.editor.on("keyup",function(t,n){e.props.onKeyUp(e.editor,n)});break;case"onMouseDown":e.editor.on("mousedown",function(t,n){e.props.onMouseDown(e.editor,n)});break;case"onPaste":e.editor.on("paste",function(t,n){e.props.onPaste(e.editor,n)});break;case"onRenderLine":e.editor.on("renderLine",function(t,n,i){e.props.onRenderLine(e.editor,n,i)});break;case"onScroll":e.editor.on("scroll",function(t){e.props.onScroll(e.editor,e.editor.getScrollInfo())});break;case"onSelection":e.editor.on("beforeSelectionChange",function(t,n){e.props.onSelection(e.editor,n)});break;case"onTouchStart":e.editor.on("touchstart",function(t,n){e.props.onTouchStart(e.editor,n)});break;case"onUpdate":e.editor.on("update",function(t){e.props.onUpdate(e.editor)});break;case"onViewportChange":e.editor.on("viewportChange",function(t,n,i){e.props.onViewportChange(e.editor,n,i)})}})},t}(),h=function(t){function e(e){var n=t.call(this,e)||this;return l?n:(n.applied=!1,n.appliedNext=!1,n.appliedUserDefined=!1,n.deferred=null,n.emulating=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n)}return o(e,t),e.prototype.hydrate=function(t){var e=this,n=i({},s.defaults,this.editor.options,t.options||{});Object.keys(n).some(function(t){return e.editor.getOption(t)!==n[t]})&&Object.keys(n).forEach(function(i){t.options.hasOwnProperty(i)&&e.editor.getOption(i)!==n[i]&&(e.editor.setOption(i,n[i]),e.mirror.setOption(i,n[i]))}),this.hydrated||(this.mounted&&this.deferred?this.resolveChange():this.initChange(t.value||"")),this.hydrated=!0},e.prototype.initChange=function(t){this.emulating=!0;var e=this.editor.lastLine(),n=this.editor.getLine(this.editor.lastLine()).length;this.editor.replaceRange(t||"",{line:0,ch:0},{line:e,ch:n}),this.mirror.setValue(t),this.editor.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},e.prototype.resolveChange=function(){this.emulating=!0,"undo"===this.deferred.origin?this.editor.undo():"redo"===this.deferred.origin?this.editor.redo():this.editor.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),this.emulating=!1,this.deferred=null},e.prototype.mirrorChange=function(t){return"undo"===t.origin?(this.editor.setHistory(this.mirror.getHistory()),this.mirror.undo()):"redo"===t.origin?(this.editor.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(t.text,t.from,t.to,t.origin),this.mirror.getValue()},e.prototype.componentWillMount=function(){l||this.props.editorWillMount&&this.props.editorWillMount()},e.prototype.componentDidMount=function(){var t=this;l||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&s.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=s(this.ref),this.shared=new c(this.editor,this.props),this.mirror=s(function(){}),this.editor.on("electricInput",function(){t.mirror.setHistory(t.editor.getHistory())}),this.editor.on("cursorActivity",function(){t.mirror.setCursor(t.editor.getCursor())}),this.editor.on("beforeChange",function(e,n){if(!t.emulating){n.cancel(),t.deferred=n;var i=t.mirrorChange(t.deferred);t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,t.deferred,i)}}),this.editor.on("change",function(e,n){t.mounted&&t.props.onChange&&t.props.onChange(t.editor,n,t.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentWillReceiveProps=function(t){if(!l){var e={cursor:null};t.value!==this.props.value&&(this.hydrated=!1),this.props.autoCursor||void 0===this.props.autoCursor||(e.cursor=this.editor.getCursor()),this.hydrate(t),this.appliedNext||(this.shared.applyNext(this.props,t,e),this.appliedNext=!0),this.shared.applyUserDefined(this.props,e),this.appliedUserDefined=!0}},e.prototype.componentWillUnmount=function(){l||this.props.editorWillUnmount&&this.props.editorWillUnmount(s)},e.prototype.shouldComponentUpdate=function(t,e){return!l},e.prototype.render=function(){var t=this;if(l)return null;var e=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return a.createElement("div",{className:e,ref:function(e){return t.ref=e}})},e}(a.Component);e.Controlled=h;var p=function(t){function e(e){var n=t.call(this,e)||this;return l?n:(n.applied=!1,n.appliedUserDefined=!1,n.continueChange=!1,n.detached=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n.onBeforeChangeCb=function(){n.continueChange=!0},n)}return o(e,t),e.prototype.hydrate=function(t){var e=this,n=i({},s.defaults,this.editor.options,t.options||{});if(Object.keys(n).some(function(t){return e.editor.getOption(t)!==n[t]})&&Object.keys(n).forEach(function(i){t.options.hasOwnProperty(i)&&e.editor.getOption(i)!==n[i]&&e.editor.setOption(i,n[i])}),!this.hydrated){var r=this.editor.lastLine(),o=this.editor.getLine(this.editor.lastLine()).length;this.editor.replaceRange(t.value||"",{line:0,ch:0},{line:r,ch:o})}this.hydrated=!0},e.prototype.componentWillMount=function(){l||this.props.editorWillMount&&this.props.editorWillMount()},e.prototype.componentDidMount=function(){var t=this;l||(this.detached=!0===this.props.detach,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&s.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=s(this.ref),this.shared=new c(this.editor,this.props),this.editor.on("beforeChange",function(e,n){t.props.onBeforeChange&&t.props.onBeforeChange(t.editor,n,t.editor.getValue(),t.onBeforeChangeCb)}),this.editor.on("change",function(e,n){t.mounted&&t.props.onChange&&(t.props.onBeforeChange?t.continueChange&&t.props.onChange(t.editor,n,t.editor.getValue()):t.props.onChange(t.editor,n,t.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},e.prototype.componentWillReceiveProps=function(t){if(this.detached&&!1===t.detach&&(this.detached=!1,this.props.editorDidAttach&&this.props.editorDidAttach(this.editor)),this.detached||!0!==t.detach||(this.detached=!0,this.props.editorDidDetach&&this.props.editorDidDetach(this.editor)),!l&&!this.detached){var e={cursor:null};t.value!==this.props.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),this.props.autoCursor||void 0===this.props.autoCursor||(e.cursor=this.editor.getCursor()),this.hydrate(t),this.applied||(this.shared.apply(this.props),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(this.props,e),this.appliedUserDefined=!0)}},e.prototype.componentWillUnmount=function(){l||this.props.editorWillUnmount&&this.props.editorWillUnmount(s)},e.prototype.shouldComponentUpdate=function(t,e){var n=!0;return l&&(n=!1),this.detached&&(n=!1),n},e.prototype.render=function(){var t=this;if(l)return null;var e=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return a.createElement("div",{className:e,ref:function(e){return t.ref=e}})},e}(a.Component);e.UnControlled=p}).call(e,n(13))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=React},function(t,e,n){!function(t){t(n(0),n(3),n(4),n(5))}(function(t){"use strict";function e(t,e,n){var i=t.current(),r=i.search(e);return r>-1?t.backUp(i.length-r):i.match(/<\/?$/)&&(t.backUp(i.length),t.match(e,!1)||t.match(i)),n}function n(t){var e=l[t];return e||(l[t]=new RegExp("\\s+"+t+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}function i(t,e){var i=t.match(n(e));return i?/^\s*(.*?)\s*$/.exec(i[2])[1]:""}function r(t,e){return new RegExp((e?"^":"")+"</s*"+t+"s*>","i")}function o(t,e){for(var n in t)for(var i=e[n]||(e[n]=[]),r=t[n],o=r.length-1;o>=0;o--)i.unshift(r[o])}function s(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(!r[0]||r[1].test(i(e,r[0])))return r[2]}}var a={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},l={};t.defineMode("htmlmixed",function(n,i){function l(i,o){var a,h=u.token(i,o.htmlState),p=/\btag\b/.test(h);if(p&&!/[<>\s\/]/.test(i.current())&&(a=o.htmlState.tagName&&o.htmlState.tagName.toLowerCase())&&c.hasOwnProperty(a))o.inTag=a+" ";else if(o.inTag&&p&&/>$/.test(i.current())){var d=/^([\S]+) (.*)/.exec(o.inTag);o.inTag=null;var f=">"==i.current()&&s(c[d[1]],d[2]),_=t.getMode(n,f),g=r(d[1],!0),m=r(d[1],!1);o.token=function(t,n){return t.match(g,!1)?(n.token=l,n.localState=n.localMode=null,null):e(t,m,n.localMode.token(t,n.localState))},o.localMode=_,o.localState=t.startState(_,u.indent(o.htmlState,""))}else o.inTag&&(o.inTag+=i.current(),i.eol()&&(o.inTag+=" "));return h}var u=t.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag}),c={},h=i&&i.tags,p=i&&i.scriptTypes;if(o(a,c),h&&o(h,c),p)for(var d=p.length-1;d>=0;d--)c.script.unshift(["type",p[d].matches,p[d].mode]);return{startState:function(){return{token:l,inTag:null,localMode:null,localState:null,htmlState:t.startState(u)}},copyState:function(e){var n;return e.localState&&(n=t.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:n,htmlState:t.copyState(u,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,n,i){return!e.localMode||/^\s*<\//.test(n)?u.indent(e.htmlState,n):e.localMode.indent?e.localMode.indent(e.localState,n,i):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||u}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})}]);